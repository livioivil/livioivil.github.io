(function(e,t){sumo.define("plugins/css",[],function(){if(typeof window=="undefined")return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,r=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?r=!1:t[4]&&(n=parseInt(t[4])<18);var i={};i.pluginBuilder="./css-builder";var s,o=function(){s=document.createElement("style"),e.appendChild(s)},u=function(e,t){o();var n=s.styleSheet||s.sheet;if(n&&n.addImport)n.addImport(e),s.onload=t;else{s.textContent='@import "'+e+'";';var r=setInterval(function(){try{s.sheet.cssRules,clearInterval(r),t()}catch(e){}},10)}},a=function(t,n){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet";if(r)i.onload=function(){i.onload=function(){},setTimeout(n,7)};else var s=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==i.href)return clearInterval(s),n()}},10);i.href=t,e.appendChild(i)};return i.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)},i.load=function(e,t,r,i){(n?u:a)(t.toUrl(e+".css"),r)},i}),function(){var n=this,r=n._,i={},s=Array.prototype,o=Object.prototype,u=Function.prototype;try{var a=document.createElement("iframe");a.style.display="none",document.body.appendChild(a),u=a.contentWindow.Function.prototype,s=a.contentWindow.Array.prototype,o=a.contentWindow.Object.prototype,a.parentNode.removeChild(a)}catch(f){}var l=s.push,c=s.slice,h=s.concat,p=o.toString,d=o.hasOwnProperty,v=s.forEach,m=s.map,g=s.reduce,y=s.reduceRight,b=s.filter,w=s.every,E=s.some,S=s.indexOf,x=s.lastIndexOf,T=Array.isArray,N=Object.keys,C=u.bind,k=function(e){if(e instanceof k)return e;if(!(this instanceof k))return new k(e);this._wrapped=e};typeof e!="undefined"?(typeof t!="undefined"&&t.exports&&(e=t.exports=k),e._=k):n!=window&&(n._=k),k.VERSION="1.5.2";var L=k.each=k.forEach=function(e,t,n){if(e==null)return;if(v&&e.forEach===v)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,s=e.length;r<s;r++)if(t.call(n,e[r],r,e)===i)return}else{var o=k.keys(e);for(var r=0,s=o.length;r<s;r++)if(t.call(n,e[o[r]],o[r],e)===i)return}};k.map=k.collect=function(e,t,n){var r=[];return e==null?r:m&&e.map===m?e.map(t,n):(L(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var A="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(g&&e.reduce===g)return r&&(t=k.bind(t,r)),i?e.reduce(t,n):e.reduce(t);L(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(A);return n},k.reduceRight=k.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(y&&e.reduceRight===y)return r&&(t=k.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=k.keys(e);s=o.length}L(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(A);return n},k.find=k.detect=function(e,t,n){var r;return O(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},k.filter=k.select=function(e,t,n){var r=[];return e==null?r:b&&e.filter===b?e.filter(t,n):(L(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},k.reject=function(e,t,n){return k.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},k.every=k.all=function(e,t,n){t||(t=k.identity);var r=!0;return e==null?r:w&&e.every===w?e.every(t,n):(L(e,function(e,s,o){if(!(r=r&&t.call(n,e,s,o)))return i}),!!r)};var O=k.some=k.any=function(e,t,n){t||(t=k.identity);var r=!1;return e==null?r:E&&e.some===E?e.some(t,n):(L(e,function(e,s,o){if(r||(r=t.call(n,e,s,o)))return i}),!!r)};k.contains=k.include=function(e,t){return e==null?!1:S&&e.indexOf===S?e.indexOf(t)!=-1:O(e,function(e){return e===t})},k.invoke=function(e,t){var n=c.call(arguments,2),r=k.isFunction(t);return k.map(e,function(e){return(r?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t,n){return k.isEmpty(t)?n?void 0:[]:k[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return L(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},k.min=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return L(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},k.shuffle=function(e){var t,n=0,r=[];return L(e,function(e){t=k.random(n++),r[n-1]=r[t],r[t]=e}),r},k.sample=function(e,t,n){return arguments.length<2||n?e[k.random(e.length-1)]:k.shuffle(e).slice(0,Math.max(0,t))};var M=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,n){var r=M(t);return k.pluck(k.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var _=function(e){return function(t,n,r){var i={},s=n==null?k.identity:M(n);return L(t,function(n,o){var u=s.call(r,n,o,t);e(i,u,n)}),i}};k.groupBy=_(function(e,t,n){(k.has(e,t)?e[t]:e[t]=[]).push(n)}),k.indexBy=_(function(e,t,n){e[t]=n}),k.countBy=_(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,n,r){n=n==null?k.identity:M(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},k.toArray=function(e){return e?k.isArray(e)?c.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return e==null?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:c.call(e,0,t)},k.initial=function(e,t,n){return c.call(e,0,e.length-(t==null||n?1:t))},k.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return c.call(e,t==null||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var D=function(e,t,n){return t&&k.every(e,k.isArray)?h.apply(n,e):(L(e,function(e){k.isArray(e)||k.isArguments(e)?t?l.apply(n,e):D(e,t,n):n.push(e)}),n)};k.flatten=function(e,t){return D(e,t,[])},k.without=function(e){return k.difference(e,c.call(arguments,1))},k.uniq=k.unique=function(e,t,n,r){k.isFunction(t)&&(r=n,n=t,t=!1);var i=n?k.map(e,n,r):e,s=[],o=[];return L(i,function(n,r){if(t?!r||o[o.length-1]!==n:!k.contains(o,n))o.push(n),s.push(e[r])}),s},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=c.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=h.apply(s,c.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=k.pluck(arguments,""+n);return t},k.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},k.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=k.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(S&&e.indexOf===S)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},k.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(x&&e.lastIndexOf===x)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var P=function(){};k.bind=function(e,t){var n,r;if(C&&e.bind===C)return C.apply(e,c.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return n=c.call(arguments,2),r=function(){if(this instanceof r){P.prototype=e.prototype;var i=new P;P.prototype=null;var s=e.apply(i,n.concat(c.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(c.call(arguments)))}},k.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},k.bindAll=function(e){var t=c.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return L(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var n={};return t||(t=k.identity),function(){var r=t.apply(this,arguments);return k.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},k.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(c.call(arguments,1)))},k.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},k.debounce=function(e,t,n){var r,i,s,o,u;return function(){s=this,i=arguments,o=new Date;var a=function(){var f=new Date-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i)))},f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i)),u}},k.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},k.wrap=function(e,t){return function(){var n=[e];return l.apply(n,arguments),t.apply(this,n)}},k.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},k.keys=N||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)k.has(e,n)&&t.push(n);return t},k.values=function(e){var t=k.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},k.pairs=function(e){var t=k.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},k.invert=function(e){var t={},n=k.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(e){return L(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},k.pick=function(e){var t={},n=h.apply(s,c.call(arguments,1));return L(n,function(n){n in e&&(t[n]=e[n])}),t},k.omit=function(e){var t={},n=h.apply(s,c.call(arguments,1));for(var r in e)k.contains(n,r)||(t[r]=e[r]);return t},k.defaults=function(e){return L(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var H=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var i=p.call(e);if(i!=p.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(k.isFunction(o)&&o instanceof o&&k.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,f=!0;if(i=="[object Array]"){a=e.length,f=a==t.length;if(f)while(a--)if(!(f=H(e[a],t[a],n,r)))break}else{for(var l in e)if(k.has(e,l)){a++;if(!(f=k.has(t,l)&&H(e[l],t[l],n,r)))break}if(f){for(l in t)if(k.has(t,l)&&!(a--))break;f=!a}}return n.pop(),r.pop(),f};k.isEqual=function(e,t){return H(e,t,[],[])},k.isEmpty=function(e){if(e==null)return!0;if(k.isArray(e)||k.isString(e))return e.length===0;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!!e&&e.nodeType===1},k.isArray=T||function(e){return p.call(e)=="[object Array]"},k.isObject=function(e){return e===Object(e)},L(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return p.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!!e&&!!k.has(e,"callee")}),typeof /./!="function"&&(k.isFunction=function(e){return typeof e=="function"}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||p.call(e)=="[object Boolean]"},k.isNull=function(e){return e===null},k.isUndefined=function(e){return e===void 0},k.has=function(e,t){return d.call(e,t)},k.noConflict=function(){return n._=r,this},k.identity=function(e){return e},k.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},k.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var B={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};B.unescape=k.invert(B.escape);var j={escape:new RegExp("["+k.keys(B.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(B.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return t==null?"":(""+t).replace(j[e],function(t){return B[e][t]})}}),k.result=function(e,t){if(e==null)return void 0;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(e){L(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),U.call(this,n.apply(k,e))}})};var F=0;k.uniqueId=function(e){var t=++F+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,n){var r;n=k.defaults({},n,k.templateSettings);var i=new RegExp([(n.escape||I).source,(n.interpolate||I).source,(n.evaluate||I).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(R,function(e){return"\\"+q[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,k);var a=function(e){return r.call(this,e,k)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},k.chain=function(e){return k(e).chain()};var U=function(e){return this._chain?k(e).chain():e};k.mixin(k),L(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],U.call(this,n)}}),L(["concat","join","slice"],function(e){var t=s[e];k.prototype[e]=function(){return U.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof sumo.define=="function"&&sumo.define.amd&&sumo.define("underscore",[],function(){return k})}.call(this),sumo.define("underscore-lib",function(){}),sumo.define("underscore",["underscore-lib"],function(e){return e.noConflict()}),function(t,n){typeof e!="undefined"?n(t,e,require("underscore")):typeof sumo.define=="function"&&sumo.define.amd?sumo.define("backbone-lib",["underscore","jquery","exports"],function(e,r,i){t.Backbone=n(t,i,e,r)}):t.Backbone=n(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.0",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events={},this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=!0);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i],a instanceof d?o=u=a:o=a[h.prototype.idAttribute];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),u.on("all",this._onModelEvent,this),this._byId[u.cid]=u,u.id!=null&&(this._byId[u.id]=u)}x&&x.push(f||u)}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r]);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,t,n){n.wait&&r.add(e,n),i&&i(e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);i&&i.apply(s,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/]+)"}).replace(A,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e){return e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/[?#].*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/"),s&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(r)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var o=this.location,u=o.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&u&&o.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),function(e){typeof require=="function"&&typeof t!="undefined"&&t.exports?t.exports=e(require("underscore")):typeof sumo.define=="function"?sumo.define("cocktail",["underscore","jquery"],e):this.Cocktail=e(_)}(function(e,t){var n={};n.mixins={},n.mixin=function(r){var i=e.chain(arguments).toArray().rest().flatten().value(),s=r.prototype||r,o={};return e(i).each(function(t){e.isString(t)&&(t=n.mixins[t]),e(t).each(function(t,n){if(e.isFunction(t)){if(s[n]===t)return;s[n]&&(o[n]=o.hasOwnProperty(n)?o[n]:[s[n]],o[n].push(t)),s[n]=t}else e.isArray(t)?s[n]=e.union(t,s[n]||[]):e.isObject(t)?s[n]=e.extend({},t,s[n]||{}):n in s||(s[n]=t)})}),e(o).each(function(t,n){s[n]=function(){var n=this,r=arguments,i;return e(t).each(function(t){var s=e.isFunction(t)?t.apply(n,r):t;i=typeof s=="undefined"?i:s}),i}}),r};var r;return n.patch=function(s){r=s.Model.extend;var o=function(r,i){var s=this,o;r&&e.has(r,"constructor")?o=r.constructor:o=function(){if("defaultProps"in this){var e=this.defaultProps;t.extend(!0,this,e)}return s.apply(this,arguments)},e.extend(o,s,i);var u=function(){this.constructor=o};u.prototype=s.prototype,o.prototype=new u,r&&e.extend(o.prototype,r),o.__super__=s.prototype,klass=o;var a=klass.prototype.mixins;return a&&klass.prototype.hasOwnProperty("mixins")&&n.mixin(klass,a),klass};e([s.Model,s.Collection,s.Router,s.View]).each(function(t){t.mixin=function(){n.mixin(this,e.toArray(arguments))},t.extend=o})},n.unpatch=function(n){e([n.Model,n.Collection,n.Router,n.View]).each(function(e){e.mixin=undefined,e.extend=r})},n}),sumo.define("backbone",["backbone-lib","cocktail"],function(e,t){return t.patch(e),e.noConflict()}),sumo.define("handlebars/safe-string",["exports"],function(e){function t(e){this.string=e}t.prototype.toString=function(){return""+this.string},e["default"]=t}),sumo.define("handlebars/utils",["./safe-string","exports"],function(e,t){function o(e){return r[e]||"&amp;"}function u(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function c(e){return e instanceof n?e.toString():!e&&e!==0?"":(e=""+e,s.test(e)?e.replace(i,o):e)}function h(e){return!e&&e!==0?!0:l(e)&&e.length===0?!0:!1}var n=e["default"],r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,s=/[&<>"'`]/;t.extend=u;var a=Object.prototype.toString;t.toString=a;var f=function(e){return typeof e=="function"};f(/x/)&&(f=function(e){return typeof e=="function"&&a.call(e)==="[object Function]"});var f;t.isFunction=f;var l=Array.isArray||function(e){return e&&typeof e=="object"?a.call(e)==="[object Array]":!1};t.isArray=l,t.escapeExpression=c,t.isEmpty=h}),sumo.define("handlebars/exception",["exports"],function(e){function n(e,n){var r;n&&n.firstLine&&(r=n.firstLine,e+=" - "+r+":"+n.firstColumn);var i=Error.prototype.constructor.call(this,e);for(var s=0;s<t.length;s++)this[t[s]]=i[t[s]];r&&(this.lineNumber=r,this.column=n.firstColumn)}var t=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e["default"]=n}),sumo.define("handlebars/base",["./utils","./exception","exports"],function(e,t,n){function h(e,t){this.helpers=e||{},this.partials=t||{},p(this)}function p(e){e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new i("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse||function(){},i=n.fn;return f(t)&&(t=t.call(this)),t===!0?i(this):t===!1||t==null?r(this):a(t)?t.length>0?e.helpers.each(t,n):r(this):i(t)}),e.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse,i=0,s="",o;f(e)&&(e=e.call(this)),t.data&&(o=m(t.data));if(e&&typeof e=="object")if(a(e))for(var u=e.length;i<u;i++)o&&(o.index=i,o.first=i===0,o.last=i===e.length-1),s+=n(e[i],{data:o});else for(var l in e)e.hasOwnProperty(l)&&(o&&(o.key=l,o.index=i,o.first=i===0),s+=n(e[l],{data:o}),i++);return i===0&&(s=r(this)),s}),e.registerHelper("if",function(e,t){return f(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){f(e)&&(e=e.call(this));if(!r.isEmpty(e))return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper("capitalize",function(e){return e.charAt(0).toUpperCase()+e.slice(1)})}function v(e,t){d.log(e,t)}var r=e,i=t["default"],s="1.3.0";n.VERSION=s;var o=4;n.COMPILER_REVISION=o;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=u;var a=r.isArray,f=r.isFunction,l=r.toString,c="[object Object]";n.HandlebarsEnvironment=h,h.prototype={constructor:h,logger:d,log:v,registerHelper:function(e,t,n){if(l.call(e)===c){if(n||t)throw new i("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){l.call(e)===c?r.extend(this.partials,e):this.partials[e]=t}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(d.level<=e){var n=d.methodMap[e];typeof console!="undefined"&&console[n]&&console[n].call(console,t)}}};n.logger=d,n.log=v;var m=function(e){var t={};return r.extend(t,e),t};n.createFrame=m}),sumo.define("handlebars/runtime",["./utils","./exception","./base","exports"],function(e,t,n,r){function a(e){var t=e&&e[0]||1,n=o;if(t!==n){if(t<n){var r=u[n],i=u[t];throw new s("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new s("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function f(e,t){if(!t)throw new s("No environment passed to template");var n=function(e,n,r,i,o,u){var a=t.VM.invokePartial.apply(this,arguments);if(a!=null)return a;if(t.compile){var f={helpers:i,partials:o,data:u};return o[n]=t.compile(e,{data:u!==undefined},t),o[n](r,f)}throw new s("The partial "+n+" could not be compiled when running in runtime-only mode")},r={escapeExpression:i.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var r=this.programs[e];return n?r=c(e,t,n):r||(r=this.programs[e]=c(e,t)),r},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},i.extend(n,t),i.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var s=i.partial?i:t,o,u;i.partial||(o=i.helpers,u=i.partials);var a=e.call(r,s,n,o,u,i.data);return i.partial||t.VM.checkRevision(r.compilerInfo),a}}function l(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i}function c(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r}function h(e,t,n,r,i,o){var u={partial:!0,helpers:r,partials:i,data:o};if(e===undefined)throw new s("The partial "+t+" could not be found");if(e instanceof Function)return e(n,u)}function p(){return""}var i=e,s=t["default"],o=n.COMPILER_REVISION,u=n.REVISION_CHANGES;r.checkRevision=a,r.template=f,r.programWithDepth=l,r.program=c,r.invokePartial=h,r.noop=p}),sumo.define("handlebars.runtime",["./handlebars/base","./handlebars/safe-string","./handlebars/exception","./handlebars/utils","./handlebars/runtime","exports"],function(e,t,n,r,i,s){var o=e,u=t["default"],a=n["default"],f=r,l=i,c=function(){var e=new o.HandlebarsEnvironment;return f.extend(e,o),e.SafeString=u,e.Exception=a,e.Utils=f,e.VM=l,e.template=function(t){return l.template(t,e)},e},h=c();h.create=c,s["default"]=h}),sumo.define("handlebars/compiler/ast",["../exception","exports"],function(e,t){function r(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var n=e["default"],i={ProgramNode:function(e,t,n,s){var o,u;arguments.length===3?(s=n,n=null):arguments.length===2&&(s=t,t=null),r.call(this,s),this.type="program",this.statements=e,this.strip={},n?(u=n[0],u?(o={first_line:u.firstLine,last_line:u.lastLine,last_column:u.lastColumn,first_column:u.firstColumn},this.inverse=new i.ProgramNode(n,t,o)):this.inverse=new i.ProgramNode(n,t),this.strip.right=t.left):t&&(this.strip.left=t.right)},MustacheNode:function(e,t,n,s,o){r.call(this,o),this.type="mustache",this.strip=s;if(n!=null&&n.charAt){var u=n.charAt(3)||n.charAt(2);this.escaped=u!=="{"&&u!=="&"}else this.escaped=!!n;e instanceof i.SexprNode?this.sexpr=e:this.sexpr=new i.SexprNode(e,t),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,n){r.call(this,n),this.type="sexpr",this.hash=t;var i=this.id=e[0],s=this.params=e.slice(1),o=this.eligibleHelper=i.isSimple;this.isHelper=o&&(s.length||t)},PartialNode:function(e,t,n,i){r.call(this,i),this.type="partial",this.partialName=e,this.context=t,this.strip=n},BlockNode:function(e,t,i,s,o){r.call(this,o);if(e.sexpr.id.original!==s.path.original)throw new n(e.sexpr.id.original+" doesn't match "+s.path.original,this);this.type="block",this.mustache=e,this.program=t,this.inverse=i,this.strip={left:e.strip.left,right:s.strip.right},(t||i).strip.left=e.strip.right,(i||t).strip.right=s.strip.left,i&&!t&&(this.isInverse=!0)},ContentNode:function(e,t){r.call(this,t),this.type="content",this.string=e},HashNode:function(e,t){r.call(this,t),this.type="hash",this.pairs=e},IdNode:function(e,t){r.call(this,t),this.type="ID";var i="",s=[],o=0;for(var u=0,a=e.length;u<a;u++){var f=e[u].part;i+=(e[u].separator||"")+f;if(f===".."||f==="."||f==="this"){if(s.length>0)throw new n("Invalid path: "+i,this);f===".."?o++:this.isScoped=!0}else s.push(f)}this.original=i,this.parts=s,this.string=s.join("."),this.depth=o,this.isSimple=e.length===1&&!this.isScoped&&o===0,this.stringModeValue=this.string},PartialNameNode:function(e,t){r.call(this,t),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,t){r.call(this,t),this.type="DATA",this.id=e},StringNode:function(e,t){r.call(this,t),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,t){r.call(this,t),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,t){r.call(this,t),this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},CommentNode:function(e,t){r.call(this,t),this.type="comment",this.comment=e}};t["default"]=i}),sumo.define("handlebars/compiler/parser",["exports"],function(e){var t=function(){function t(e,t){return{left:e.charAt(2)==="~",right:t.charAt(0)==="~"||t.charAt(1)==="~"}}function r(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(n,r,i,s,o,u,a){var f=u.length-1;switch(o){case 1:return new s.ProgramNode(u[f-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],u[f-1],u[f],this._$);break;case 4:this.$=new s.ProgramNode(u[f-2],u[f-1],u[f],this._$);break;case 5:this.$=new s.ProgramNode(u[f-1],u[f],[],this._$);break;case 6:this.$=new s.ProgramNode(u[f],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[u[f]];break;case 10:u[f-1].push(u[f]),this.$=u[f-1];break;case 11:this.$=new s.BlockNode(u[f-2],u[f-1].inverse,u[f-1],u[f],this._$);break;case 12:this.$=new s.BlockNode(u[f-2],u[f-1],u[f-1].inverse,u[f],this._$);break;case 13:this.$=u[f];break;case 14:this.$=u[f];break;case 15:this.$=new s.ContentNode(u[f],this._$);break;case 16:this.$=new s.CommentNode(u[f],this._$);break;case 17:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 18:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 19:this.$={path:u[f-1],strip:t(u[f-2],u[f])};break;case 20:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 21:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 22:this.$=new s.PartialNode(u[f-2],u[f-1],t(u[f-3],u[f]),this._$);break;case 23:this.$=t(u[f-1],u[f]);break;case 24:this.$=new s.SexprNode([u[f-2]].concat(u[f-1]),u[f],this._$);break;case 25:this.$=new s.SexprNode([u[f]],null,this._$);break;case 26:this.$=u[f];break;case 27:this.$=new s.StringNode(u[f],this._$);break;case 28:this.$=new s.IntegerNode(u[f],this._$);break;case 29:this.$=new s.BooleanNode(u[f],this._$);break;case 30:this.$=u[f];break;case 31:u[f-1].isHelper=!0,this.$=u[f-1];break;case 32:this.$=new s.HashNode(u[f],this._$);break;case 33:this.$=[u[f-2],u[f]];break;case 34:this.$=new s.PartialNameNode(u[f],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(u[f],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(u[f],this._$));break;case 37:this.$=new s.DataNode(u[f],this._$);break;case 38:this.$=new s.IdNode(u[f],this._$);break;case 39:u[f-2].push({part:u[f],separator:u[f-1]}),this.$=u[f-2];break;case 40:this.$=[{part:u[f]}];break;case 43:this.$=[];break;case 44:u[f-1].push(u[f]);break;case 47:this.$=[u[f]];break;case 48:u[f-1].push(u[f])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){function s(e,t){return n.yytext=n.yytext.substr(e,n.yyleng-t)}var o=i;switch(r){case 0:n.yytext.slice(-2)==="\\\\"?(s(0,1),this.begin("mu")):n.yytext.slice(-1)==="\\"?(s(0,1),this.begin("emu")):this.begin("mu");if(n.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return n.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return n.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return n.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return e.lexer=n,r.prototype=e,e.Parser=r,new r}();e["default"]=t}),sumo.define("handlebars/compiler/base",["./parser","./ast","exports"],function(e,t,n){function s(e){return e.constructor===i.ProgramNode?e:(r.yy=i,r.parse(e))}var r=e["default"],i=t["default"];n.parser=r,n.parse=s}),sumo.define("handlebars/compiler/compiler",["../exception","exports"],function(e,t){function r(){}function i(e,t,r){if(e==null||typeof e!="string"&&e.constructor!==r.AST.ProgramNode)throw new n("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i=r.parse(e),s=(new r.Compiler).compile(i,t);return(new r.JavaScriptCompiler).compile(s,t)}function s(e,t,r){function s(){var n=r.parse(e),i=(new r.Compiler).compile(n,t),s=(new r.JavaScriptCompiler).compile(i,t,undefined,!0);return r.template(s)}if(e==null||typeof e!="string"&&e.constructor!==r.AST.ProgramNode)throw new n("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i;return function(e,t){return i||(i=s()),i.call(this,e,t)}}var n=e["default"];t.Compiler=r,r.prototype={compiler:r,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.accept(e)},accept:function(e){var t=e.strip||{},n;return t.left&&this.opcode("strip"),n=this[e.type](e),t.right&&this.opcode("strip"),n},program:function(e){var t=e.statements;for(var n=0,r=t.length;n<r;n++)this.accept(t[n]);return this.isSimple=r===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=t.sexpr,s=this.classifySexpr(i);s==="helper"?this.helperSexpr(i,n,r):s==="simple"?(this.simpleSexpr(i),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(i,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?(r.depth&&this.addDepth(r.depth),this.opcode("getContext",r.depth||0),this.opcode("pushStringParam",r.stringModeValue,r.type),r.type==="sexpr"&&this.sexpr(r)):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleSexpr:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var i=this.setupFullMustacheParams(e,t,r),s=e.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new n("You specified knownHelpersOnly, but used the unknown helper "+s,e);this.opcode("invokeHelper",i.length,s,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);t==="simple"?this.simpleSexpr(e):t==="helper"?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0;if(e.id.isScoped||e.id.depth)throw new n("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");var t=e.id.parts;for(var r=0,i=t.length;r<i;r++)this.opcode("lookup",t[r])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),n.type==="sexpr"&&this.sexpr(n)):this[n.type](n)},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}},t.precompile=i,t.compile=s}),sumo.define("handlebars/compiler/javascript-compiler",["../base","../exception","exports"],function(e,t,n){function u(e){this.value=e}function a(){}var r=e.COMPILER_REVISION,i=e.REVISION_CHANGES,s=e.log,o=t["default"];a.prototype={nameLookup:function(e,t){var n,r;return e.indexOf("depth")===0&&(n=!0),/^[0-9]+$/.test(t)?r=e+"["+t+"]":a.isValidJavaScriptVariableName(t)?r=e+"."+t:r=e+"['"+t+"']",n?"("+e+" && "+r+")":r},compilerInfo:function(){var e=r,t=i[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var i=e.opcodes,u;this.i=0;for(var a=i.length;this.i<a;this.i++)u=i[this.i],u.opcode==="DECLARE"?this[u.name]=u.value:this[u.opcode].apply(this,u.args),u.opcode!==this.stripNext&&(this.stripNext=!1);this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o("Compile completed with content left on stack");return this.createFunctionContext(r)},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,o=this.environment.depths.list.length;i<o;i++)r.push("depth"+this.environment.depths.list[i]);var u=this.mergeSource();this.isChild||(u=this.compilerInfo()+u);if(e)return r.push(u),Function.apply(this,r);var a="function "+(this.name||"")+"("+r.join(",")+") {\n  "+u+"}";return s("debug",a+"\n\n"),a},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];i.appendToBuffer?t?t=t+"\n    + "+i.content:t=i.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=i+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),t!=="sexpr"&&(typeof e=="string"?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var r=this.lastHelper=this.setupHelper(e,t,!0),i=this.nameLookup("depth"+this.lastContext,t,"context"),s="helper = "+r.name+" || "+i;r.paramsInit&&(s+=","+r.paramsInit),this.push("("+s+",helper "+"? helper.call("+r.callParams+") "+": helperMissing.call("+r.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+r+") { "+s+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+i+"; "+s+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,r;this.options.stringParams&&(r=this.popStack(),n=this.popStack());var i=this.hash;n&&i.contexts.push("'"+e+"': "+n),r&&i.types.push("'"+e+"': "+r),i.values.push("'"+e+"': ("+t+")")},compiler:a,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return(n.length===0?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new u(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=undefined),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),r,i,s;if(n){var o=this.popStack(!0);if(o instanceof u)r=o.value,s=!0;else{i=!this.stackSlot;var a=i?this.incrStack():this.topStackName();t="("+this.push(a)+" = "+o+"),",r=this.topStack()}}else r=this.topStack();var f=e.call(this,r);return n?(s||this.popStack(),i&&this.stackSlot--,this.push("("+t+f+")")):(/^stack/.test(r)||(r=this.nextStack()),this.pushSource(r+" = ("+t+f+");")),r},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];r instanceof u?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof u)return n.value;if(!t){if(!this.stackSlot)throw new o("Invalid stack pop");this.stackSlot--}return n},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof u?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var r=[],i=this.setupParams(e,r,n),s=this.nameLookup("helpers",t,"helper");return{params:r,paramsInit:i,name:s,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupOptions:function(e,t){var n=[],r=[],i=[],s,o,u;n.push("hash:"+this.popStack()),this.options.stringParams&&(n.push("hashTypes:"+this.popStack()),n.push("hashContexts:"+this.popStack())),o=this.popStack(),u=this.popStack();if(u||o)u||(this.context.aliases.self="this",u="self.noop"),o||(this.context.aliases.self="this",o="self.noop"),n.push("inverse:"+o),n.push("fn:"+u);for(var a=0;a<e;a++)s=this.popStack(),t.push(s),this.options.stringParams&&(i.push(this.popStack()),r.push(this.popStack()));return this.options.stringParams&&(n.push("contexts:["+r.join(",")+"]"),n.push("types:["+i.join(",")+"]")),this.options.data&&n.push("data:data"),n},setupParams:function(e,t,n){var r="{"+this.setupOptions(e,t).join(",")+"}";return n?(this.useRegister("options"),t.push("options"),"options="+r):(t.push(r),"")}};var f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=a.RESERVED_WORDS={};for(var c=0,h=f.length;c<h;c++)l[f[c]]=!0;a.isValidJavaScriptVariableName=function(e){return!a.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?!0:!1},n["default"]=a}),sumo.define("handlebars",["./handlebars.runtime","./handlebars/compiler/ast","./handlebars/compiler/base","./handlebars/compiler/compiler","./handlebars/compiler/javascript-compiler","exports"],function(e,t,n,r,i,s){var o=e["default"],u=t["default"],a=n.parser,f=n.parse,l=r.Compiler,c=r.compile,h=r.precompile,p=i["default"],d=o.create,v=function(){var e=d();return e.compile=function(t,n){return c(t,n,e)},e.precompile=function(t,n){return h(t,n,e)},e.AST=u,e.Compiler=l,e.JavaScriptCompiler=p,e.Parser=a,e.parse=f,e};return o=v(),o.create=v,s["default"]=o,o}),function(n,r){typeof sumo.define=="function"&&sumo.define.amd?sumo.define("tether",r):typeof e=="object"?t.exports=r(require,e,t):n.Tether=r()}(this,function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=getComputedStyle(e),n=t.position;if(n==="fixed")return e;var r=e;while(r=r.parentNode){var i=undefined;try{i=getComputedStyle(r)}catch(s){}if(typeof i=="undefined"||i===null)return r;var o=i.overflow,u=i.overflowX,a=i.overflowY;if(/(auto|scroll)/.test(o+a+u))if(n!=="absolute"||["relative","absolute","fixed"].indexOf(i.position)>=0)return r}return document.body}function l(e){var t=undefined;e===document?(t=document,e=document.documentElement):t=e.ownerDocument;var n=t.documentElement,r={},i=e.getBoundingClientRect();for(var s in i)r[s]=i[s];var o=f(t);return r.top-=o.top,r.left-=o.left,typeof r.width=="undefined"&&(r.width=document.body.scrollWidth-r.left-r.right),typeof r.height=="undefined"&&(r.height=document.body.scrollHeight-r.top-r.bottom),r.top=r.top-n.clientTop,r.left=r.left-n.clientLeft,r.right=t.body.clientWidth-r.width-r.left,r.bottom=t.body.clientHeight-r.height-r.top,r}function c(e){return e.offsetParent||document.documentElement}function h(){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");p(t.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var r=e.offsetWidth;n===r&&(r=t.clientWidth),document.body.removeChild(t);var i=n-r;return{width:i,height:i}}function p(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],t=[];return Array.prototype.push.apply(t,arguments),t.slice(1).forEach(function(t){if(t)for(var n in t)(({})).hasOwnProperty.call(t,n)&&(e[n]=t[n])}),e}function d(e,t){if(typeof e.classList!="undefined")t.split(" ").forEach(function(t){t.trim()&&e.classList.remove(t)});else{var n=new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi"),r=g(e).replace(n," ");y(e,r)}}function v(e,t){if(typeof e.classList!="undefined")t.split(" ").forEach(function(t){t.trim()&&e.classList.add(t)});else{d(e,t);var n=g(e)+(" "+t);y(e,n)}}function m(e,t){if(typeof e.classList!="undefined")return e.classList.contains(t);var n=g(e);return(new RegExp("(^| )"+t+"( |$)","gi")).test(n)}function g(e){return e.className instanceof SVGAnimatedString?e.className.baseVal:e.className}function y(e,t){e.setAttribute("class",t)}function b(e,t,n){n.forEach(function(n){t.indexOf(n)===-1&&m(e,n)&&d(e,n)}),t.forEach(function(t){m(e,t)||v(e,t)})}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){var n=arguments.length<=2||arguments[2]===undefined?1:arguments[2];return e+n>=t&&t>=e-n}function M(){return typeof performance!="undefined"&&typeof performance.now!="undefined"?performance.now():+(new Date)}function j(){var e={top:0,left:0};for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){var n=t.top,r=t.left;typeof n=="string"&&(n=parseFloat(n,10)),typeof r=="string"&&(r=parseFloat(r,10)),e.top+=n,e.left+=r}),e}function F(e,t){return typeof e.left=="string"&&e.left.indexOf("%")!==-1&&(e.left=parseFloat(e.left,10)/100*t.width),typeof e.top=="string"&&e.top.indexOf("%")!==-1&&(e.top=parseFloat(e.top,10)/100*t.height),e}function W(e,t){return t==="scrollParent"?t=e.scrollParent:t==="window"&&(t=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),t===document&&(t=t.documentElement),typeof t.nodeType!="undefined"&&function(){var e=l(t),n=e,r=getComputedStyle(t);t=[n.left,n.top,e.width+n.left,e.height+n.top],z.forEach(function(e,n){e=e[0].toUpperCase()+e.substr(1),e==="Top"||e==="Left"?t[n]+=parseFloat(r["border"+e+"Width"]):t[n]-=parseFloat(r["border"+e+"Width"])})}(),t}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=undefined;typeof s=="undefined"&&(s={modules:[]});var u=function(){var e=0;return function(){return++e}}(),a={},f=function(t){var n=t._tetherZeroElement;typeof n=="undefined"&&(n=t.createElement("div"),n.setAttribute("data-tether-id",u()),p(n.style,{top:0,left:0,position:"absolute"}),t.body.appendChild(n),t._tetherZeroElement=n);var r=n.getAttribute("data-tether-id");if(typeof a[r]=="undefined"){a[r]={};var i=n.getBoundingClientRect();for(var s in i)a[r][s]=i[s];E(function(){delete a[r]})}return a[r]},w=[],E=function(t){w.push(t)},S=function(){var t=undefined;while(t=w.pop())t()},x=function(){function e(){i(this,e)}return r(e,[{key:"on",value:function(t,n,r){var i=arguments.length<=3||arguments[3]===undefined?!1:arguments[3];typeof this.bindings=="undefined"&&(this.bindings={}),typeof this.bindings[t]=="undefined"&&(this.bindings[t]=[]),this.bindings[t].push({handler:n,ctx:r,once:i})}},{key:"once",value:function(t,n,r){this.on(t,n,r,!0)}},{key:"off",value:function(t,n){if(typeof this.bindings!="undefined"&&typeof this.bindings[t]!="undefined")return;if(typeof n=="undefined")delete this.bindings[t];else{var r=0;while(r<this.bindings[t].length)this.bindings[t][r].handler===n?this.bindings[t].splice(r,1):++r}}},{key:"trigger",value:function(t){if(typeof this.bindings!="undefined"&&this.bindings[t]){var n=0;while(n<this.bindings[t].length){var r=this.bindings[t][n],i=r.handler,s=r.ctx,o=r.once,u=s;typeof u=="undefined"&&(u=this);for(var a=arguments.length,f=Array(a>1?a-1:0),l=1;l<a;l++)f[l-1]=arguments[l];i.apply(u,f),o?this.bindings[t].splice(n,1):++n}}}}]),e}();s.Utils={getScrollParent:o,getBounds:l,getOffsetParent:c,extend:p,addClass:v,removeClass:d,hasClass:m,updateClasses:b,defer:E,flush:S,uniqueId:u,Evented:x,getScrollBarSize:h};var T=function(){function e(e,t){var n=[],r=!0,i=!1,s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=!0){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=!0,s=a}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();if(typeof s=="undefined")throw new Error("You must include the utils.js file before tether.js");var N=s.Utils,o=N.getScrollParent,l=N.getBounds,c=N.getOffsetParent,p=N.extend,v=N.addClass,d=N.removeClass,b=N.updateClasses,E=N.defer,S=N.flush,h=N.getScrollBarSize,k=function(){var e=document.createElement("div"),t=["transform","webkitTransform","OTransform","MozTransform","msTransform"];for(var n=0;n<t.length;++n){var r=t[n];if(e.style[r]!==undefined)return r}}(),L=null,A=[],O=function(){A.forEach(function(e){e.position(!1)}),S()};(function(){var e=null,t=null,n=null,r=function i(){if(typeof t!="undefined"&&t>16){t=Math.min(t-16,250),n=setTimeout(i,250);return}if(typeof e!="undefined"&&M()-e<10)return;typeof n!="undefined"&&(clearTimeout(n),n=null),e=M(),O(),t=M()-e};["resize","scroll","touchmove"].forEach(function(e){window.addEventListener(e,r)})})();var _={center:"center",left:"right",right:"left"},D={middle:"middle",top:"bottom",bottom:"top"},P={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},H=function(t,n){var r=t.left,i=t.top;return r==="auto"&&(r=_[n.left]),i==="auto"&&(i=D[n.top]),{left:r,top:i}},B=function(t){var n=t.left,r=t.top;return typeof P[t.left]!="undefined"&&(n=P[t.left]),typeof P[t.top]!="undefined"&&(r=P[t.top]),{left:n,top:r}},I=function(t){var n=t.split(" "),r=T(n,2),i=r[0],s=r[1];return{top:i,left:s}},q=I,R=function(){function e(t){var n=this;i(this,e),this.position=this.position.bind(this),A.push(this),L===null&&(L=window.setInterval(U.position,500)),this.history=[],this.setOptions(t,!1),s.modules.forEach(function(e){typeof e.initialize!="undefined"&&e.initialize.call(n)}),this.position()}return r(e,[{key:"getClass",value:function(){var t=arguments.length<=0||arguments[0]===undefined?"":arguments[0],n=this.options.classes;return typeof n!="undefined"&&n[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var n=this,r=arguments.length<=1||arguments[1]===undefined?!0:arguments[1],i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=p(i,t);var s=this.options,u=s.element,a=s.target,f=s.targetModifier;this.element=u,this.target=a,this.targetModifier=f,this.target==="viewport"?(this.target=document.body,this.targetModifier="visible"):this.target==="scroll-handle"&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(e){if(typeof n[e]=="undefined")throw new Error("Tether Error: Both element and target must be defined");typeof n[e].jquery!="undefined"?n[e]=n[e][0]:typeof n[e]=="string"&&(n[e]=document.querySelector(n[e]))}),v(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&v(this.target,this.getClass("target"));if(!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=q(this.options.targetAttachment),this.attachment=q(this.options.attachment),this.offset=I(this.options.offset),this.targetOffset=I(this.options.targetOffset),typeof this.scrollParent!="undefined"&&this.disable(),this.targetModifier==="scroll-handle"?this.scrollParent=this.target:this.scrollParent=o(this.target),this.options.enabled!==!1&&this.enable(r)}},{key:"getTargetBounds",value:function(){if(typeof this.targetModifier=="undefined")return l(this.target);if(this.targetModifier==="visible"){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=l(this.target),n={height:t.height,width:t.width,top:t.top,left:t.left};return n.height=Math.min(n.height,t.height-(pageYOffset-t.top)),n.height=Math.min(n.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),n.height=Math.min(innerHeight,n.height),n.height-=2,n.width=Math.min(n.width,t.width-(pageXOffset-t.left)),n.width=Math.min(n.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),n.width=Math.min(innerWidth,n.width),n.width-=2,n.top<pageYOffset&&(n.top=pageYOffset),n.left<pageXOffset&&(n.left=pageXOffset),n}if(this.targetModifier==="scroll-handle"){var t=undefined,r=this.target;r===document.body?(r=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=l(r);var i=getComputedStyle(r),s=r.scrollWidth>r.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body,o=0;s&&(o=15);var u=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-o,n={width:15,height:u*.975*(u/r.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},a=0;u<408&&this.target===document.body&&(a=-0.00011*Math.pow(u,2)-.00727*u+22.58),this.target!==document.body&&(n.height=Math.max(n.height,24));var f=this.target.scrollTop/(r.scrollHeight-u);return n.top=f*(u-n.height-a)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(n.height=Math.max(n.height,24)),n}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,n){return typeof this._cache=="undefined"&&(this._cache={}),typeof this._cache[t]=="undefined"&&(this._cache[t]=n.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=arguments.length<=0||arguments[0]===undefined?!0:arguments[0];this.options.addTargetClasses!==!1&&v(this.target,this.getClass("enabled")),v(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),t&&this.position()}},{key:"disable",value:function(){d(this.target,this.getClass("enabled")),d(this.element,this.getClass("enabled")),this.enabled=!1,typeof this.scrollParent!="undefined"&&this.scrollParent.removeEventListener("scroll",this.position)}},{key:"destroy",value:function(){var t=this;this.disable(),A.forEach(function(e,n){if(e===t){A.splice(n,1);return}}),A.length===0&&L!==null&&(window.clearInterval(L),L=null)}},{key:"updateAttachClasses",value:function(t,n){var r=this;t=t||this.attachment,n=n||this.targetAttachment;var i=["left","top","bottom","right","middle","center"];typeof this._addAttachClasses!="undefined"&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),typeof this._addAttachClasses=="undefined"&&(this._addAttachClasses=[]);var s=this._addAttachClasses;t.top&&s.push(this.getClass("element-attached")+"-"+t.top),t.left&&s.push(this.getClass("element-attached")+"-"+t.left),n.top&&s.push(this.getClass("target-attached")+"-"+n.top),n.left&&s.push(this.getClass("target-attached")+"-"+n.left);var o=[];i.forEach(function(e){o.push(r.getClass("element-attached")+"-"+e),o.push(r.getClass("target-attached")+"-"+e)}),E(function(){if(typeof r._addAttachClasses=="undefined")return;b(r.element,r._addAttachClasses,o),r.options.addTargetClasses!==!1&&b(r.target,r._addAttachClasses,o),delete r._addAttachClasses})}},{key:"position",value:function(){var t=this,n=arguments.length<=0||arguments[0]===undefined?!0:arguments[0];if(!this.enabled)return;this.clearCache();var r=H(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,r);var i=this.cache("element-bounds",function(){return l(t.element)}),o=i.width,u=i.height;if(o===0&&u===0&&typeof this.lastSize!="undefined"){var a=this.lastSize;o=a.width,u=a.height}else this.lastSize={width:o,height:u};var f=this.cache("target-bounds",function(){return t.getTargetBounds()}),p=f,d=F(B(this.attachment),{width:o,height:u}),v=F(B(r),p),m=F(this.offset,{width:o,height:u}),g=F(this.targetOffset,p);d=j(d,m),v=j(v,g);var y=f.left+v.left-d.left,b=f.top+v.top-d.top;for(var w=0;w<s.modules.length;++w){var E=s.modules[w],x=E.position.call(this,{left:y,top:b,targetAttachment:r,targetPos:f,elementPos:i,offset:d,targetOffset:v,manualOffset:m,manualTargetOffset:g,scrollbarSize:N,attachment:this.attachment});if(x===!1)return!1;if(typeof x=="undefined"||typeof x!="object")continue;b=x.top,y=x.left}var T={page:{top:b,left:y},viewport:{top:b-pageYOffset,bottom:pageYOffset-b-u+innerHeight,left:y-pageXOffset,right:pageXOffset-y-o+innerWidth}},N=undefined;document.body.scrollWidth>window.innerWidth&&(N=this.cache("scrollbar-size",h),T.viewport.bottom-=N.height),document.body.scrollHeight>window.innerHeight&&(N=this.cache("scrollbar-size",h),T.viewport.right-=N.width);if(["","static"].indexOf(document.body.style.position)===-1||["","static"].indexOf(document.body.parentElement.style.position)===-1)T.page.bottom=document.body.scrollHeight-b-u,T.page.right=document.body.scrollWidth-y-o;return typeof this.options.optimizations!="undefined"&&this.options.optimizations.moveElement!==!1&&typeof this.targetModifier=="undefined"&&function(){var e=t.cache("target-offsetparent",function(){return c(t.target)}),n=t.cache("target-offsetparent-bounds",function(){return l(e)}),r=getComputedStyle(e),i=n,s={};["Top","Left","Bottom","Right"].forEach(function(e){s[e.toLowerCase()]=parseFloat(r["border"+e+"Width"])}),n.right=document.body.scrollWidth-n.left-i.width+s.right,n.bottom=document.body.scrollHeight-n.top-i.height+s.bottom;if(T.page.top>=n.top+s.top&&T.page.bottom>=n.bottom&&T.page.left>=n.left+s.left&&T.page.right>=n.right){var o=e.scrollTop,u=e.scrollLeft;T.offset={top:T.page.top-n.top+o-s.top,left:T.page.left-n.left+u-s.left}}}(),this.move(T),this.history.unshift(T),this.history.length>3&&this.history.pop(),n&&S(),!0}},{key:"move",value:function(t){var n=this;if(typeof this.element.parentNode=="undefined")return;var r={};for(var i in t){r[i]={};for(var s in t[i]){var o=!1;for(var u=0;u<this.history.length;++u){var a=this.history[u];if(typeof a[i]!="undefined"&&!C(a[i][s],t[i][s])){o=!0;break}}o||(r[i][s]=!0)}}var f={top:"",left:"",right:"",bottom:""},l=function(t,r){var i=typeof n.options.optimizations!="undefined",s=i?n.options.optimizations.gpu:null;if(s!==!1){var o=undefined,u=undefined;t.top?(f.top=0,o=r.top):(f.bottom=0,o=-r.bottom),t.left?(f.left=0,u=r.left):(f.right=0,u=-r.right),f[k]="translateX("+Math.round(u)+"px) translateY("+Math.round(o)+"px)",k!=="msTransform"&&(f[k]+=" translateZ(0)")}else t.top?f.top=r.top+"px":f.bottom=r.bottom+"px",t.left?f.left=r.left+"px":f.right=r.right+"px"},h=!1;(r.page.top||r.page.bottom)&&(r.page.left||r.page.right)?(f.position="absolute",l(r.page,t.page)):(r.viewport.top||r.viewport.bottom)&&(r.viewport.left||r.viewport.right)?(f.position="fixed",l(r.viewport,t.viewport)):typeof r.offset!="undefined"&&r.offset.top&&r.offset.left?function(){f.position="absolute";var e=n.cache("target-offsetparent",function(){return c(n.target)});c(n.element)!==e&&E(function(){n.element.parentNode.removeChild(n.element),e.appendChild(n.element)}),l(r.offset,t.offset),h=!0}():(f.position="absolute",l({top:!0,left:!0},t.page));if(!h){var d=!0,v=this.element.parentNode;while(v&&v.tagName!=="BODY"){if(getComputedStyle(v).position!=="static"){d=!1;break}v=v.parentNode}d||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var m={},g=!1;for(var s in f){var y=f[s],b=this.element.style[s];b!==""&&y!==""&&["top","left","bottom","right"].indexOf(s)>=0&&(b=parseFloat(b),y=parseFloat(y)),b!==y&&(g=!0,m[s]=y)}g&&E(function(){p(n.element.style,m)})}}]),e}();R.modules=[],s.position=O;var U=p(R,s),T=function(){function e(e,t){var n=[],r=!0,i=!1,s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=!0){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=!0,s=a}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),N=s.Utils,l=N.getBounds,p=N.extend,b=N.updateClasses,E=N.defer,z=["left","top","right","bottom"];s.modules.push({position:function(t){var n=this,r=t.top,i=t.left,s=t.targetAttachment;if(!this.options.constraints)return!0;var o=this.cache("element-bounds",function(){return l(n.element)}),u=o.height,a=o.width;if(a===0&&u===0&&typeof this.lastSize!="undefined"){var f=this.lastSize;a=f.width,u=f.height}var c=this.cache("target-bounds",function(){return n.getTargetBounds()}),h=c.height,d=c.width,v=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(e){var t=e.outOfBoundsClass,n=e.pinnedClass;t&&v.push(t),n&&v.push(n)}),v.forEach(function(e){["left","top","right","bottom"].forEach(function(t){v.push(e+"-"+t)})});var m=[],g=p({},s),y=p({},this.attachment);return this.options.constraints.forEach(function(e){var t=e.to,o=e.attachment,f=e.pin;typeof o=="undefined"&&(o="");var l=undefined,c=undefined;if(o.indexOf(" ")>=0){var p=o.split(" "),v=T(p,2);c=v[0],l=v[1]}else l=c=o;var b=W(n,t);if(c==="target"||c==="both")r<b[1]&&g.top==="top"&&(r+=h,g.top="bottom"),r+u>b[3]&&g.top==="bottom"&&(r-=h,g.top="top");c==="together"&&(r<b[1]&&g.top==="top"&&(y.top==="bottom"?(r+=h,g.top="bottom",r+=u,y.top="top"):y.top==="top"&&(r+=h,g.top="bottom",r-=u,y.top="bottom")),r+u>b[3]&&g.top==="bottom"&&(y.top==="top"?(r-=h,g.top="top",r-=u,y.top="bottom"):y.top==="bottom"&&(r-=h,g.top="top",r+=u,y.top="top")),g.top==="middle"&&(r+u>b[3]&&y.top==="top"?(r-=u,y.top="bottom"):r<b[1]&&y.top==="bottom"&&(r+=u,y.top="top")));if(l==="target"||l==="both")i<b[0]&&g.left==="left"&&(i+=d,g.left="right"),i+a>b[2]&&g.left==="right"&&(i-=d,g.left="left");l==="together"&&(i<b[0]&&g.left==="left"?y.left==="right"?(i+=d,g.left="right",i+=a,y.left="left"):y.left==="left"&&(i+=d,g.left="right",i-=a,y.left="right"):i+a>b[2]&&g.left==="right"?y.left==="left"?(i-=d,g.left="left",i-=a,y.left="right"):y.left==="right"&&(i-=d,g.left="left",i+=a,y.left="left"):g.left==="center"&&(i+a>b[2]&&y.left==="left"?(i-=a,y.left="right"):i<b[0]&&y.left==="right"&&(i+=a,y.left="left")));if(c==="element"||c==="both")r<b[1]&&y.top==="bottom"&&(r+=u,y.top="top"),r+u>b[3]&&y.top==="top"&&(r-=u,y.top="bottom");if(l==="element"||l==="both")i<b[0]&&y.left==="right"&&(i+=a,y.left="left"),i+a>b[2]&&y.left==="left"&&(i-=a,y.left="right");typeof f=="string"?f=f.split(",").map(function(e){return e.trim()}):f===!0&&(f=["top","left","right","bottom"]),f=f||[];var w=[],E=[];r<b[1]&&(f.indexOf("top")>=0?(r=b[1],w.push("top")):E.push("top")),r+u>b[3]&&(f.indexOf("bottom")>=0?(r=b[3]-u,w.push("bottom")):E.push("bottom")),i<b[0]&&(f.indexOf("left")>=0?(i=b[0],w.push("left")):E.push("left")),i+a>b[2]&&(f.indexOf("right")>=0?(i=b[2]-a,w.push("right")):E.push("right")),w.length&&function(){var e=undefined;typeof n.options.pinnedClass!="undefined"?e=n.options.pinnedClass:e=n.getClass("pinned"),m.push(e),w.forEach(function(t){m.push(e+"-"+t)})}(),E.length&&function(){var e=undefined;typeof n.options.outOfBoundsClass!="undefined"?e=n.options.outOfBoundsClass:e=n.getClass("out-of-bounds"),m.push(e),E.forEach(function(t){m.push(e+"-"+t)})}();if(w.indexOf("left")>=0||w.indexOf("right")>=0)y.left=g.left=!1;if(w.indexOf("top")>=0||w.indexOf("bottom")>=0)y.top=g.top=!1;(g.top!==s.top||g.left!==s.left||y.top!==n.attachment.top||y.left!==n.attachment.left)&&n.updateAttachClasses(y,g)}),E(function(){n.options.addTargetClasses!==!1&&b(n.target,m,v),b(n.element,m,v)}),{top:r,left:i}}});var N=s.Utils,l=N.getBounds,b=N.updateClasses,E=N.defer;s.modules.push({position:function(t){var n=this,r=t.top,i=t.left,s=this.cache("element-bounds",function(){return l(n.element)}),o=s.height,u=s.width,a=this.getTargetBounds(),f=r+o,c=i+u,h=[];r<=a.bottom&&f>=a.top&&["left","right"].forEach(function(e){var t=a[e];(t===i||t===c)&&h.push(e)}),i<=a.right&&c>=a.left&&["top","bottom"].forEach(function(e){var t=a[e];(t===r||t===f)&&h.push(e)});var p=[],d=[],v=["left","top","right","bottom"];return p.push(this.getClass("abutted")),v.forEach(function(e){p.push(n.getClass("abutted")+"-"+e)}),h.length&&d.push(this.getClass("abutted")),h.forEach(function(e){d.push(n.getClass("abutted")+"-"+e)}),E(function(){n.options.addTargetClasses!==!1&&b(n.target,d,p),b(n.element,d,p)}),!0}});var T=function(){function e(e,t){var n=[],r=!0,i=!1,s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=!0){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=!0,s=a}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return s.modules.push({position:function(t){var n=t.top,r=t.left;if(!this.options.shift)return;var i=this.options.shift;typeof this.options.shift=="function"&&(i=this.options.shift.call(this,{top:n,left:r}));var s=undefined,o=undefined;if(typeof i=="string"){i=i.split(" "),i[1]=i[1]||i[0];var u=T(i,2);s=u[0],o=u[1],s=parseFloat(s,10),o=parseFloat(o,10)}else s=i.top,o=i.left;return n+=s,r+=o,{top:n,left:r}}}),U}),function(n,r){typeof sumo.define=="function"&&sumo.define.amd?sumo.define("shepherd",["tether"],r):typeof e=="object"?t.exports=r(require("tether")):n.Shepherd=r(n.Tether)}(this,function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function d(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]}function v(e,t){var n=undefined;return typeof e.matches!="undefined"?n=e.matches:typeof e.matchesSelector!="undefined"?n=e.matchesSelector:typeof e.msMatchesSelector!="undefined"?n=e.msMatchesSelector:typeof e.webkitMatchesSelector!="undefined"?n=e.webkitMatchesSelector:typeof e.mozMatchesSelector!="undefined"?n=e.mozMatchesSelector:typeof e.oMatchesSelector!="undefined"&&(n=e.oMatchesSelector),n.call(e,t)}function m(e,t){if(e===null||typeof e=="undefined")return e;if(typeof e=="object")return e;var n=e.split(" "),r=n.length,i=t.length;r>i&&(n[0]=n.slice(0,r-i+1).join(" "),n.splice(1,(r,i)));var s={};for(var o=0;o<i;++o){var u=t[o];s[u]=n[o]}return s}var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=function(t,n,r){var i=!0;e:while(i){var s=t,o=n,u=r;a=f=l=undefined,i=!1,s===null&&(s=Function.prototype);var a=Object.getOwnPropertyDescriptor(s,o);if(a===undefined){var f=Object.getPrototypeOf(s);if(f===null)return undefined;t=f,n=o,r=u,i=!0;continue e}if("value"in a)return a.value;var l=a.get;return l===undefined?undefined:l.call(u)}},s=e.Utils,o=s.Evented,u=s.addClass,a=s.extend,f=s.hasClass,l=s.removeClass,c=s.uniqueId,h=new o,p={"top right":"bottom left","top left":"bottom right","top center":"bottom center","middle right":"middle left","middle left":"middle right","middle center":"middle center","bottom left":"top right","bottom right":"top left","bottom center":"top center",top:"bottom center",left:"middle right",right:"middle left",bottom:"top center",center:"middle center",middle:"middle center"},g=function(s){function o(e,t){return r(this,o),n(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e,t),this.tour=e,this.bindMethods(),this.setOptions(t),this}return i(o,s),t(o,[{key:"bindMethods",value:function(){var t=this,n=["_show","show","hide","isOpen","cancel","complete","scrollTo","destroy"];n.map(function(e){t[e]=t[e].bind(t)})}},{key:"setOptions",value:function(){var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.options=t,this.destroy(),this.id=this.options.id||this.id||"step-"+c();var n=this.options.when;if(n)for(var r in n)if({}.hasOwnProperty.call(n,r)){var i=n[r];this.on(r,i,this)}this.options.buttons!==!1}},{key:"getTour",value:function(){return this.tour}},{key:"bindAdvance",value:function(){var t=this,n=m(this.options.advanceOn,["selector","event"]),r=n.event,i=n.selector,s=function(n){if(!t.isOpen())return;typeof i!="undefined"?v(n.target,i)&&t.tour.next():t.el&&n.target===t.el&&t.tour.next()};document.body.addEventListener(r,s),this.on("destroy",function(){return document.body.removeEventListener(r,s)})}},{key:"getAttachTo",value:function(){var t=m(this.options.attachTo,["element","on"])||{},n=t.element;if(typeof n=="string"){t.element=document.querySelector(n);if(!t.element)throw new Error("The element for this Shepherd step was not found "+n)}return t}},{key:"setupTether",value:function(){if(typeof e=="undefined")throw new Error("Using the attachment feature of Shepherd requires the Tether library");var n=this.getAttachTo(),r=n.on in p?p[n.on]:p.right;typeof n.element=="undefined"&&(n.element="viewport",r="middle center");var i={classPrefix:"sumome-shepherd",element:this.el,constraints:[{to:"window",pin:!0,attachment:"together"}],target:n.element,offset:n.offset||"0 0",attachment:r};this.tether&&this.tether.destroy(),this.tether=new e(a(i,this.options.tetherOptions))}},{key:"show",value:function(){var t=this;if(typeof this.options.beforeShowPromise!="undefined"){var n=this.options.beforeShowPromise();if(typeof n!="undefined")return n.then(function(){return t._show()})}this._show()}},{key:"_show",value:function(){var t=this;this.trigger("before-show"),this.el||this.render(),u(this.el,"sumome-shepherd-open"),document.body.setAttribute("data-shepherd-step",this.id),this.setupTether(),this.options.scrollTo&&setTimeout(function(){t.scrollTo()}),this.trigger("show")}},{key:"hide",value:function(){this.trigger("before-hide"),l(this.el,"sumome-shepherd-open"),document.body.removeAttribute("data-shepherd-step"),this.tether&&this.tether.destroy(),this.tether=null,this.trigger("hide")}},{key:"isOpen",value:function(){return f(this.el,"sumome-shepherd-open")}},{key:"cancel",value:function(){this.tour.cancel(),this.trigger("cancel")}},{key:"complete",value:function(){this.tour.complete(),this.trigger("complete")}},{key:"scrollTo",value:function(){var t=this.getAttachTo(),n=t.element;typeof this.options.scrollToHandler!="undefined"?this.options.scrollToHandler(n):typeof n!="undefined"&&n.scrollIntoView()}},{key:"destroy",value:function(){typeof this.el!="undefined"&&(document.body.removeChild(this.el),delete this.el),this.tether&&this.tether.destroy(),this.tether=null,this.trigger("destroy")}},{key:"render",value:function(){var t=this;typeof this.el!="undefined"&&this.destroy(),this.el=d("<div class='sumome-shepherd-step "+(this.options.classes||"")+"' data-id='"+this.id+"' "+(this.options.idAttribute?'id="'+this.options.idAttribute+'"':"")+"></div>");var n=document.createElement("div");n.className="sumome-shepherd-content",this.el.appendChild(n);var r=document.createElement("header");n.appendChild(r),typeof this.options.title!="undefined"&&(r.innerHTML+="<h3 class='sumome-shepherd-title'>"+this.options.title+"</h3>",this.el.className+=" shepherd-has-title");if(this.options.showCancelLink){var i=d("<a href class='sumome-shepherd-cancel-link'>✕</a>");r.appendChild(i),this.el.className+=" sumome-shepherd-has-cancel-link",this.bindCancelLink(i)}typeof this.options.text!="undefined"&&function(){var e=d("<div class='sumome-shepherd-text'></div>"),r=t.options.text;typeof r=="function"&&(r=r.call(t,e)),r instanceof HTMLElement?e.appendChild(r):(typeof r=="string"&&(r=[r]),r.map(function(t){e.innerHTML+="<p>"+t+"</p>"})),n.appendChild(e)}();var s=document.createElement("footer");this.options.buttons&&function(){var e=d("<ul class='sumome-shepherd-buttons'></ul>");t.options.buttons.map(function(n){var r=d("<li><a class='sumome-shepherd-button "+(n.classes||"")+"'>"+n.text+"</a>");e.appendChild(r),t.bindButtonEvents(n,r.querySelector("a"))}),s.appendChild(e)}(),n.appendChild(s),document.body.appendChild(this.el),this.setupTether(),this.options.advanceOn&&this.bindAdvance()}},{key:"bindCancelLink",value:function(t){var n=this;t.addEventListener("click",function(e){e.preventDefault(),n.tour.trigger("close")})}},{key:"bindButtonEvents",value:function(t,n){var r=this;t.events=t.events||{},typeof t.action!="undefined"&&(t.events.click=t.action);for(var i in t.events)if({}.hasOwnProperty.call(t.events,i)){var s=t.events[i];typeof s=="string"&&function(){var e=s;s=function(){return r.tour.show(e)}}(),n.addEventListener(i,s)}this.on("destroy",function(){for(var e in t.events)if({}.hasOwnProperty.call(t.events,e)){var r=t.events[e];n.removeEventListener(e,r)}})}}]),o}(o),y=function(e){function s(){var e=this,t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];r(this,s),n(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,t),this.bindMethods(),this.options=t,this.steps=this.options.steps||[];var i=["complete","cancel","close","hide","start","show","active","inactive"];return i.map(function(t){(function(t){e.on(t,function(n){n=n||{},n.tour=e,h.trigger(t,n)})})(t)}),this}return i(s,e),t(s,[{key:"bindMethods",value:function(){var t=this,n=["next","back","cancel","complete","hide"];n.map(function(e){t[e]=t[e].bind(t)})}},{key:"addStep",value:function(t,n){typeof n=="undefined"&&(n=t);if(n instanceof g)n.tour=this;else{if(typeof t=="string"||typeof t=="number")n.id=t.toString();n=a({},this.options.defaults,n),n=new g(this,n)}return this.steps.push(n),this}},{key:"getById",value:function(t){for(var n=0;n<this.steps.length;++n){var r=this.steps[n];if(r.id===t)return r}}},{key:"getCurrentStep",value:function(){return this.currentStep}},{key:"next",value:function(){var t=this.steps.indexOf(this.currentStep);t===this.steps.length-1?(this.hide(t),this.trigger("complete"),this.done()):this.show(t+1)}},{key:"back",value:function(){var t=this.steps.indexOf(this.currentStep);this.show(t-1)}},{key:"cancel",value:function(){typeof this.currentStep!="undefined"&&this.currentStep.hide(),this.trigger("cancel"),this.done()}},{key:"complete",value:function(){typeof this.currentStep!="undefined"&&this.currentStep.hide(),this.trigger("complete"),this.done()}},{key:"hide",value:function(){typeof this.currentStep!="undefined"&&this.currentStep.hide(),this.trigger("hide"),this.done()}},{key:"done",value:function(){h.activeTour=null,l(document.body,"sumome-shepherd-active"),this.trigger("inactive",{tour:this})}},{key:"show",value:function(){var t=arguments.length<=0||arguments[0]===undefined?0:arguments[0];this.currentStep?this.currentStep.hide():(u(document.body,"sumome-shepherd-active"),this.trigger("active",{tour:this})),h.activeTour=this;var n=undefined;typeof t=="string"?n=this.getById(t):n=this.steps[t],n&&(this.trigger("show",{step:n,previous:this.currentStep}),this.currentStep=n,n.show())}},{key:"start",value:function(){this.trigger("start"),this.currentStep=null,this.next()}}]),s}(o);return a(h,{Tour:y,Step:g,Evented:o}),h}),sumo.define("countries",[],function(){return["Afghanistan","Åland Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua And Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia, Plurinational State Of","Bonaire, Sint Eustatius And Saba","Bosnia And Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (keeling) Islands","Colombia","Comoros","Congo","Congo, The Democratic Republic Of The","Cook Islands","Costa Rica","Côte D'ivoire","Croatia","Cuba","Curaçao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands (malvinas)","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-bissau","Guyana","Haiti","Heard Island And Mcdonald Islands","Holy See (vatican City State)","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran, Islamic Republic Of","Iraq","Ireland","Isle Of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Democratic People's Republic Of","Korea, Republic Of","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao","Macedonia, The Former Yugoslav Republic Of","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia, Federated States Of","Moldova, Republic Of","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestine, State Of","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Réunion","Romania","Russian Federation","Rwanda","Saint Barthélemy","Saint Helena, Ascension And Tristan Da Cunha","Saint Kitts And Nevis","Saint Lucia","Saint Martin (french Part)","Saint Pierre And Miquelon","Saint Vincent And The Grenadines","Samoa","San Marino","Sao Tome And Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten (dutch Part)","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia And The South Sandwich Islands","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Svalbard And Jan Mayen","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan, Province Of China","Tajikistan","Tanzania, United Republic Of","Thailand","Timor-leste","Togo","Tokelau","Tonga","Trinidad And Tobago","Tunisia","Turkey","Turkmenistan","Turks And Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Venezuela, Bolivarian Republic Of","Viet Nam","Virgin Islands, British","Virgin Islands, U.s.","Wallis And Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"]}),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=typeof location!="undefined"&&location.href,i=r&&location.protocol&&location.protocol.replace(/\:/,""),s=r&&location.hostname,o=r&&(location.port||void 0),u=[];sumo.define("plugins/text",[],function(){var a,f,l;return typeof window!="undefined"&&window.navigator&&window.document?f=function(e,t){var n=a.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)}:typeof process!="undefined"&&process.versions&&process.versions.node?(l=require.nodeRequire("fs"),f=function(e,t){t(l.readFileSync(e,"utf8"))}):typeof Packages!="undefined"&&(f=function(e,t){var n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),n=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),i,s,o="";try{i=new java.lang.StringBuffer,(s=n.readLine())&&s.length()&&s.charAt(0)===65279&&(s=s.substring(1));for(i.append(s);(s=n.readLine())!==null;)i.append(r),i.append(s);o=String(i.toString())}finally{n.close()}t(o)}),a={version:"1.0.2",strip:function(e){if(e){var e=e.replace(t,""),r=e.match(n);r&&(e=r[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(n=0;n<3;n++){r=e[n];try{t=new ActiveXObject(r)}catch(i){}if(t){e=[r];break}}if(!t)throw Error("createXhr(): XMLHttpRequest not available");return t},get:f,parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),e=e.substring(n+1,e.length),n=e.indexOf("!");return n!==-1&&(t=e.substring(n+1,e.length),t=t==="strip",e=e.substring(0,n)),{moduleName:r,ext:e,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=a.xdRegExp.exec(e),s;return i?(e=i[2],i=i[3],i=i.split(":"),s=i[1],i=i[0],(!e||e===t)&&(!i||i===n)&&(!s&&!i||s===r)):!0},finishLoad:function(e,t,n,r,i){n=t?a.strip(n):n,i.isBuild&&(u[e]=n),r(n)},load:function(e,t,n,u){if(u.isBuild&&!u.inlineText)n();else{var f=a.parseName(e),l=f.moduleName+"."+f.ext,c=t.toUrl(l),h=u&&u.text&&u.text.useXhr||a.useXhr;!r||h(c,i,s,o)?a.get(c,function(t){a.finishLoad(e,f.strip,t,n,u)}):t([l],function(e){a.finishLoad(f.moduleName+"."+f.ext,f.strip,e,n,u)})}},write:function(e,t,n){if(t in u){var r=a.jsEscape(u[t]);n.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,n,r,i){var t=a.parseName(t),s=t.moduleName+"."+t.ext,o=n.toUrl(t.moduleName+"."+t.ext)+".js";a.load(s,n,function(){var t=function(e){return r(o,e)};t.asModule=function(e,t){return r.asModule(e,o,t)},a.write(e,s,t,i)},i)}}})}(),sumo.define("plugins/text!lib/sumome/templates/container.handlebars",[],function(){return'<div class="sumome-container-header">\n  <span class="sumome-container-title"></span>\n</div>\n<div class="sumome-container-container"></div>\n'}),sumo.define("plugins/text!lib/sumome/templates/slide_container.handlebars",[],function(){return'<div class="sumome-settings-header">\n  <span class="sumome-settings-left"><i class="sumome-arrow-back"></i>Back</span>\n  <span class="sumome-settings-title"></span>\n  <span class="sumome-settings-right"><button class="sumome-button sumome-success sumome-tiny">Save</button></span>\n</div>\n<div class="sumome-settings-sidebar"></div>\n<div class="sumome-settings-container">\n</div>\n'}),sumo.define("plugins/text!lib/sumome/templates/wizard_container.handlebars",[],function(){return'<div class="sumome-settings-header">\n  <span class="sumome-settings-left"><i class="sumome-arrow-back"></i>Back</span>\n  <span class="sumome-settings-title"></span>\n</div>\n<div class="sumome-settings-sidebar"></div>\n<div class="sumome-settings-container">\n</div>\n<div class="sumome-settings-footer">\n  <button class="sumome-button sumome-primary sumome-tiny sumome-wizard-save">Continue</button>\n</div>'}),sumo.define("plugins/text!lib/sumome/templates/tab_container.handlebars",[],function(){return'<div class="sumome-tab-container-iconbar"></div>\n<div class="sumome-tab-container-header">\n  <span class="sumome-tab-container-left"><i class="sumome-arrow-back"></i>Back</span>\n  <span class="sumome-tab-container-title"></span>\n</div>\n<div class="sumome-tab-container-sidebar"></div>\n<div class="sumome-tab-container-container">\n</div>\n<div class="sumome-tab-container-footer">\n  <span class="sumome-tab-container-right"><button class="sumome-button sumome-success sumome-tiny">Save</button></span>\n</div>\n'}),sumo.define("plugins/text!lib/sumome/templates/mdi_container.handlebars",[],function(){return'<ul class="sumome-xdi-tab-container">\n</ul>\n<div class="sumome-xdi-container-container">\n\n</div>'}),function(e){typeof t=="function"?t.exports=e():typeof sumo.define=="function"&&sumo.define.amd?sumo.define("nprogress",e):this.NProgress=e()}(function(){function n(e,t,n){return e<t?t:e>n?n:e}function r(e){return(-1+e)*100}function i(e,n,i){var s;return t.positionUsing==="translate3d"?s={transform:"translate3d("+r(e)+"%,0,0)"}:t.positionUsing==="translate"?s={transform:"translate("+r(e)+"%,0)"}:s={"margin-left":r(e)+"%"},s.transition="all "+n+"ms "+i,s}function u(e,t){var n=typeof e=="string"?e:l(e);return n.indexOf(" "+t+" ")>=0}function a(e,t){var n=l(e),r=n+t;if(u(n,t))return;e.className=r.substring(1)}function f(e,t){var n=l(e),r;if(!u(e,t))return;r=n.replace(" "+t+" "," "),e.className=r.substring(1,r.length-1)}function l(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function c(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var e={};e.version="0.1.3";var t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};e.configure=function(e){var n,r;for(n in e)r=e[n],r!==undefined&&e.hasOwnProperty(n)&&(t[n]=r);return this},e.status=null,e.set=function(r){var u=e.isStarted();r!=0&&(r=n(r,t.minimum,1)),e.status=r===1||r===0?null:r;var a=e.render(!u),f=a.querySelector(t.barSelector),l=t.speed,c=t.easing;return a.offsetWidth,s(function(n){t.positionUsing===""&&(t.positionUsing=e.getPositioningCSS()),o(f,i(r,l,c)),r===1||r===0?(o(a,{transition:"none",opacity:1}),a.offsetWidth,setTimeout(function(){o(a,{transition:"all "+l+"ms linear",opacity:0}),setTimeout(function(){e.remove(),n()},l)},l)):setTimeout(n,l)}),this},e.isStarted=function(){return typeof e.status=="number"},e.start=function(){e.status||e.set(t.minimum);var n=function(){setTimeout(function(){if(!e.status)return;e.trickle(),n()},t.trickleSpeed)};return t.trickle&&n(),this},e.done=function(t){return!t&&!e.status?this:e.inc(.3+.5*Math.random()).set(1)},e.error=function(t){return!t&&!e.status?this:e.dec(.3+.5*Math.random()).set(0)},e.inc=function(t){var r=e.status;return r?(typeof t!="number"&&(t=(1-r)*n(Math.random()*r,.1,.95)),r=n(r+t,0,.994),e.set(r)):e.start()},e.dec=function(t){var r=e.status;return typeof t!="number"&&(t=(1-r)*n(Math.random()*r,.1,.95)),r=n(r-t,0,.994),e.set(r)},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var t=0,n=0;e.promise=function(r){return!r||r.state()=="resolved"?this:(n==0&&e.start(),t++,n++,r.always(function(){n--,n==0?(t=0,e.done()):e.set((t-n)/t)}),this)}}(),e.render=function(n){if(e.isRendered())return document.getElementById("sumome-nprogress");a(document.documentElement,"nprogress-busy");var i=document.createElement("div");i.id="sumome-nprogress",i.innerHTML=t.template;var s=i.querySelector(t.barSelector),u=n?"-100":r(e.status||0),f;o(s,{transition:"all 0 linear",transform:"translate3d("+u+"%,0,0)"}),t.showSpinner||(f=i.querySelector(t.spinnerSelector),f&&c(f));var l=document.getElementsByClassName("sumome-modal");return l&&l.length?l[0].appendChild(i):document.body.appendChild(i),i},e.remove=function(){f(document.documentElement,"nprogress-busy");var e=document.getElementById("sumome-nprogress");e&&c(e)},e.isRendered=function(){return!!document.getElementById("sumome-nprogress")},e.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var s=function(){function t(){var n=e.shift();n&&n(t)}var e=[];return function(n){e.push(n),e.length==1&&t()}}(),o=function(){function n(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function r(t){var n=document.body.style;if(t in n)return t;var r=e.length,i=t.charAt(0).toUpperCase()+t.slice(1),s;while(r--){s=e[r]+i;if(s in n)return s}return t}function i(e){return e=n(e),t[e]||(t[e]=r(e))}function s(e,t,n){t=i(t),e.style[t]=n}var e=["Webkit","O","Moz","ms"],t={};return function(e,t){var n=arguments,r,i;if(n.length==2)for(r in t)i=t[r],i!==undefined&&t.hasOwnProperty(r)&&s(e,r,i);else s(e,n[1],n[2])}}();return e}),function(){var n;n=function(e){var t,n;return t=!1,e(function(){var r;return r=(document.body||document.documentElement).style,t=r.animation!==void 0||r.WebkitAnimation!==void 0||r.MozAnimation!==void 0||r.MsAnimation!==void 0||r.OAnimation!==void 0,e(window).bind("resize.vex",function(e){if(e&&e.type=="resize"&&e.target!=window)return;return n.resize()}),e(window).bind("keyup.vex",function(e){if(e.keyCode===27)return n.closeByEscape()})}),n={globalID:1,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{vex:"sumome-vex",content:"sumome-vex-content",overlay:"sumome-vex-overlay",close:"sumome-vex-close",closing:"sumome-vex-closing",open:"sumome-vex-open"},defaultOptions:{content:"",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",openClassName:"",closeCSS:{}},open:function(t){return t=e.extend({},n.defaultOptions,t),t.id=n.globalID,n.globalID+=1,t.$vex=e("<div>").addClass(n.baseClassNames.vex).addClass(t.className).css(t.css).data({vex:t}),t.openClassName?t.$vex.addClass(t.openClassName):n.setupBodyClassName(t.$vex),t.$vexOverlay=e("<div>").addClass(n.baseClassNames.overlay).addClass(t.overlayClassName).css(t.overlayCSS).data({vex:t}),t.overlayClosesOnClick&&t.$vexOverlay.bind("click.vex",function(t){if(t.target!==this)return;return n.close(e(this).data().vex.id)}),t.$vex.append(t.$vexOverlay),t.$vexContent=e("<div>").addClass(n.baseClassNames.content).addClass(t.contentClassName).css(t.contentCSS).append(t.content).data({vex:t}),t.$vexContent.find("link").bind("load.vex",function(e){return n.resize()}),t.$vexContent.bind("resize.vex",function(e){return n.resize()}),t.$vex.append(t.$vexContent),t.customCloseButton?t.showCloseButton&&(t.$closeButton=t.$vexContent.find("."+t.closeClassName).eq(0).data({vex:t}).bind("click.vex",function(){return n.close(e(this).data().vex.id)})):t.showCloseButton&&(t.$closeButton=e("<div>").addClass(n.baseClassNames.close).addClass(t.closeClassName).css(t.closeCSS).data({vex:t}).bind("click.vex",function(){return n.close(e(this).data().vex.id)}),t.$vexContent.append(t.$closeButton)),e(t.appendLocation).append(t.$vex),t.afterOpen&&t.afterOpen(t.$vexContent,t),setTimeout(function(){return t.$vexContent.trigger("vexOpen",t)},0),t.$vexContent},getAllVexes:function(){return e("."+n.baseClassNames.vex+':not(".'+n.baseClassNames.closing+'") .'+n.baseClassNames.content)},getVexByID:function(t){return n.getAllVexes().filter(function(){return e(this).data().vex.id===t})},close:function(e){var t;if(!e){t=n.getAllVexes().last();if(!t.length)return!1;e=t.data().vex.id}return n.closeByID(e)},closeAll:function(){var t;return t=n.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(t!=null?!t.length:!void 0)?!1:(e.each(t.reverse(),function(e,t){return n.closeByID(t)}),!0)},closeByID:function(r){var i,s,o,u,a;s=n.getVexByID(r);if(!s.length)return;return i=s.data().vex.$vex,a=e.extend({},s.data().vex),o=function(){if(a.beforeClose)return a.beforeClose(s,a)},u=function(){s.trigger("vexClose",a),i.remove();if(a.afterClose)return a.afterClose(s,a)},t?(o(),i.unbind(n.animationEndEvent).bind(n.animationEndEvent,function(){return u()}).addClass(n.baseClassNames.closing)):(o(),u()),!0},resizeByID:function(t){var r,i,s,o,u;i=n.getVexByID(t);if(!i.length)return;return r=i.data().vex.$vex,u=e.extend({},i.data().vex),i.trigger("vexResize",u),!0},resize:function(){var t,r,i;return i=n.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(i!=null?!i.length:!void 0)?!1:(r=Math.max.apply(Math,i),t=n.getVexByID(r),n.resizeByID(r))},closeByEscape:function(){var t,r,i;return i=n.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(i!=null?!i.length:!void 0)?!1:(r=Math.max.apply(Math,i),t=n.getVexByID(r),t.data().vex.escapeButtonCloses!==!0?!1:n.closeByID(r))},setupBodyClassName:function(t){return t.bind("vexOpen.vex",function(){return e("body").addClass(n.baseClassNames.open)}).bind("vexClose.vex",function(){if(!n.getAllVexes().length)return e("body").removeClass(n.baseClassNames.open)})},hideLoading:function(){return e(".vex-loading-spinner").remove()},showLoading:function(){return n.hideLoading(),e("body").append('<div class="vex-loading-spinner '+n.defaultOptions.className+'"></div>')}}},typeof sumo.define=="function"&&sumo.define.amd?sumo.define("vex",["jquery"],n):typeof e=="object"?t.exports=n(require("jquery")):window.vex=n(jQuery)}.call(this),sumo.define("jquery.drags",["jquery"],function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move"},t);if(t.handle==="")var n=this;else var n=this.find(t.handle);return n.css("cursor",t.cursor).on("mousedown.drags",function(n){e(this).trigger("dragstart");if(t.handle==="")var r=e(this).addClass("draggable");else var r=e(this).addClass("active-handle").parent().addClass("draggable");var i=r.css("z-index"),s=r.outerHeight(),o=r.outerWidth(),u=r.offset().top+s-n.pageY,a=r.offset().left+o-n.pageX;r.css("z-index",10000001).parents().on("mousemove.drags",function(t){var n=t.pageY+u-s,r=t.pageX+a-o;e(".draggable").trigger("dragmove",{top:n,left:r}),e(".draggable").offset({top:n,left:r}).on("mouseup",function(){e(this).removeClass("draggable").css("z-index",i)})}),n.preventDefault()}).on("mouseup.drags",function(){if(t.handle==="")var n=e(this).removeClass("draggable");else var n=e(this).removeClass("active-handle").parent().removeClass("draggable");n.parents().unbind("mousemove.drags"),e(this).trigger("dragend")})}}),sumo.define("jquery.resizes",["jquery"],function(e){e.fn.resizes=function(t){t=e.extend({handle:"",cursor:"se-resize",body:"",min_width:200,min_height:100,onResized:null},t);if(t.handle==="")var n=this;else var n=this.find(t.handle),r=this.find(t.body);return n.css("cursor",t.cursor).on("mousedown",function(n){if(t.handle==="")var i=e(this);else var i=e(this).parent();var s=i.css("z-index"),o=i.outerHeight(),u=i.outerWidth(),a=n.pageY,f=n.pageX,l=r.outerWidth(),c=r.outerHeight();i.css("z-index",10000001).parents().on("mousemove.jqueryResize",function(e){var n=!1;u+e.pageX-f>=t.min_width&&(n=!0,i.width(u+e.pageX-f)),o+e.pageY-a>=t.min_height&&(n=!0,i.height(o+e.pageY-a),r.height(c+e.pageY-a)),n&&(t.onResized?t.onResized():r.children().trigger("resize"))}),e(document).on("mouseup",function(){i.parents().off(".jqueryResize")}),n.preventDefault()})}}),sumo.define("jquery.ui.position",["jquery"],function(e){function c(e,t,n){return[parseInt(e[0],10)*(f.test(e[0])?t/100:1),parseInt(e[1],10)*(f.test(e[1])?n/100:1)]}function h(t,n){return parseInt(e.css(t,n),10)||0}function p(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var t,n=Math.max,r=Math.abs,i=Math.round,s=/left|center|right/,o=/top|center|bottom/,u=/[\+\-]\d+%?/,a=/^\w+/,f=/%$/,l=e.fn.position;e.position={scrollbarWidth:function(){if(t!==undefined)return t;var n,r,i=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=i.children()[0];return e("body").append(i),n=s.offsetWidth,i.css("overflow","scroll"),r=s.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),t=n-r},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return l.apply(this,arguments);t=e.extend({},t);var f,d,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=p(b),b[0].preventDefault&&(t.at="left top"),d=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=s.test(e[0])?e.concat(["center"]):o.test(e[0])?["center"].concat(e):["center","center"]),e[0]=s.test(e[0])?e[0]:"center",e[1]=o.test(e[1])?e[1]:"center",n=u.exec(e[0]),r=u.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[a.exec(e[0])[0],a.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=d:t.at[0]==="center"&&(g.left+=d/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),f=c(x.at,d,v),g.left+=f[0],g.top+=f[1],this.each(function(){var s,o,u=e(this),a=u.outerWidth(),l=u.outerHeight(),p=h(this,"marginLeft"),y=h(this,"marginTop"),T=a+p+h(this,"marginRight")+E.width,N=l+y+h(this,"marginBottom")+E.height,C=e.extend({},g),k=c(x.my,u.outerWidth(),u.outerHeight());t.my[0]==="right"?C.left-=a:t.my[0]==="center"&&(C.left-=a/2),t.my[1]==="bottom"?C.top-=l:t.my[1]==="center"&&(C.top-=l/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=i(C.left),C.top=i(C.top)),s={marginLeft:p,marginTop:y},e.each(["left","top"],function(n,r){e.ui.position[S[n]]&&e.ui.position[S[n]][r](C,{targetWidth:d,targetHeight:v,elemWidth:a,elemHeight:l,collisionPosition:s,collisionWidth:T,collisionHeight:N,offset:[f[0]+k[0],f[1]+k[1]],my:t.my,at:t.at,within:w,elem:u})}),t.using&&(o=function(e){var i=m.left-C.left,s=i+d-a,o=m.top-C.top,f=o+v-l,c={target:{element:b,left:m.left,top:m.top,width:d,height:v},element:{element:u,left:C.left,top:C.top,width:a,height:l},horizontal:s<0?"left":i>0?"right":"center",vertical:f<0?"top":o>0?"bottom":"middle"};d<a&&r(i+s)<d&&(c.horizontal="center"),v<l&&r(o+f)<v&&(c.vertical="middle"),n(r(i),r(s))>n(r(o),r(f))?c.important="horizontal":c.important="vertical",t.using.call(this,e,c)}),u.offset(e.extend(C,{using:o}))})},e.ui.position={fit:{left:function(e,t){var r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=n(e.left-o,e.left)},top:function(e,t){var r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=n(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,i=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-i;if(p<0||p<r(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||r(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,i=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-i,e.top+c+h+p>a&&(v<0||v<r(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||r(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()}),sumo.define("jquery.modal",["jquery","jquery.drags","jquery.resizes","jquery.ui.position"],function(e){e.fn.extend({closeModal:function(t){var n=e(this).closest(".sumome-modal");n.fadeOut("fast",e.proxy(function(){this.triggerHandler("close.sumome-modal"),n.remove(),e("#sumome-modal-mask").remove(),t&&t()},this))},setModalTitle:function(t){var n=e(this).closest(".sumome-modal"),r=n.find(".sumome-modal-header");r.html(t)},resizeModal:function(){var t=e(this).closest("#sumome-modal-mask"),n=t.find(".sumome-modal"),r=n.find(".sumome-modal-body"),i=n.find(".sumome-modal-header"),s=n.find(".sumome-modal-notice");if(!r.parent().is(".sumome-auto")){t.is(":visible")&&n.show();var o=n.is(":visible");o||n.show();var u=i.is(":visible")?i.innerHeight():0,a=s.is(":visible")?s.innerHeight():0;o||n.hide(),r.height(r.parent().innerHeight()-u-a)}r.children().trigger("resize")},showModal:function(t){var n={className:"sumome-medium",element:window,title:"",appendTo:null,autoFocus:!0,closeButton:!0,my:"center center",at:"center center",handleTab:!0,resizable:!1,height:null,width:null};t=e.extend({},n,t);var r=e('<div id="sumome-modal-mask"></div>'),i=e('<div class="sumome-modal-header"></div>'),s=e('<p class="sumome-modal-notice"></p>'),o=e('<div class="sumome-modal-body"></div>'),u=e('<div class="sumome-modal-resizer"></div>'),a=e('<div class="sumome-modal"></div>'),f=e('<a href="javascript:void(0)" class="sumome-modal-close" title="Close"></a>');a.hide(),r.hide(),i.append(t.title),t.closeButton&&(i.prepend(f),f.on("click",e.proxy(function(){t.confirmCloseCallback?t.confirmCloseCallback()&&e(this).closeModal():e(this).closeModal()},this))),t.className&&a.addClass(t.className),t.height&&a.height(t.height),t.width&&a.width(t.width),a.append(i),a.append(s),a.append(o),t.resizer?a.append(t.resizer):t.resizable&&a.append(u),o.append(e(this)),r.appendTo(t.appendTo||e(document.body)),a.appendTo(r),a.drags({handle:i}),t.resizable&&a.resizes({handle:u,body:o,onResized:e.proxy(function(){e(this).resizeModal()},this)}),e(this).resizeModal(),r.fadeIn(100),a.animate({opacity:0},100,e.proxy(function(){a.show(),a.position({my:t.my,at:t.at,of:t.element,offset:"0 5",collision:"flipfit",within:window}),e(this).resizeModal(),t.autoFocus?a.animate({opacity:1},100,e.proxy(function(){e(a.find("a[href], button, input, select, textarea").filter(":visible").filter(":enabled").toArray().sort(function(e,t){return(e.tabIndex>0?e.tabIndex:1e3)-(t.tabIndex>0?t.tabIndex:1e3)})).eq(0).focus(),this.triggerHandler("open.sumome-modal")},this)):a.animate({opacity:1},100,e.proxy(function(){this.triggerHandler("open.sumome-modal")},this))},this)),t.handleTab&&(e(a).on("keydown",e.proxy(function(t){if(t.keyCode==9){var n=e(document.activeElement);t.preventDefault(),t.stopPropagation();var r=e(a.find("a[href], button, input, select, textarea").filter(":visible").filter(":enabled").toArray().sort(function(e,t){return(e.tabIndex>0?e.tabIndex:1e3)-(t.tabIndex>0?t.tabIndex:1e3)})),i=r.eq((r.index(n)+1)%r.length);i.focus()}else if(t.keyCode==13){var n=e(document.activeElement);n.is("input")&&(t.preventDefault(),t.stopPropagation(),this.triggerHandler("enterPressed.sumome-modal"))}},this)),e(a).on("keyup",e.proxy(function(n){n.keyCode==27&&(n.preventDefault(),n.stopPropagation(),t.confirmCloseCallback?t.confirmCloseCallback()&&e(this).closeModal():e(this).closeModal())},this)))}})}),sumo.define("jquery.sortable",["jquery"],function(e){!function(e,t,n,r){function c(e,t){var n=Math.max(0,e[0]-t[0],t[0]-e[1]),r=Math.max(0,e[2]-t[1],t[1]-e[3]);return n+r}function h(t,n,r,i){var s=t.length,o=i?"offset":"position";r=r||0;while(s--){var u=t[s].el?t[s].el:e(t[s]),a=u[o]();a.left+=parseInt(u.css("margin-left"),10),a.top+=parseInt(u.css("margin-top"),10),n[s]=[a.left-r,a.left+u.outerWidth()+r,a.top-r,a.top+u.outerHeight()+r]}}function p(e,t){var n=t.offset();return{left:e.left-n.left,top:e.top-n.top}}function d(e,t,n){t=[t.left,t.top],n=n&&[n.left,n.top];var r,i=e.length,s=[];while(i--)r=e[i],s[i]=[i,c(r,t),n&&c(r,n)];return s=s.sort(function(e,t){return t[1]-e[1]||t[2]-e[2]||t[0]-e[0]}),s}function v(t){this.options=e.extend({},o,t),this.containers=[],this.options.rootGroup||(this.scrollProxy=e.proxy(this.scroll,this),this.dragProxy=e.proxy(this.drag,this),this.dropProxy=e.proxy(this.drop,this),this.placeholder=e(this.options.placeholder),t.isValidTarget||(this.options.isValidTarget=r))}function m(t,n){this.el=t,this.options=e.extend({},s,n),this.group=v.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var r=this.rootGroup.options.itemPath;this.target=r?this.el.find(r):this.el,this.target.on(i.start,this.handle,e.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var i,s={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},o={afterMove:function(e,t,n){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"sumome-dragging",draggedClass:"sumome-dragged",placeholderClass:"sumome-placeholder",isValidTarget:function(e,t){return!0},onCancel:function(e,t,n,r){},onDrag:function(e,t,n,r){e.css(t)},onDragStart:function(t,n,r,i){t.css({height:t.outerHeight(),width:t.outerWidth()}),t.addClass(n.group.options.draggedClass),e("body").addClass(n.group.options.bodyClass)},onDrop:function(t,n,r,i){t.removeClass(n.group.options.draggedClass).removeAttr("style"),e("body").removeClass(n.group.options.bodyClass)},onMousedown:function(e,t,n){if(!n.target.nodeName.match(/^(input|select|textarea)$/i))return n.preventDefault(),!0},placeholder:'<li class="sumome-placeholder"/>',pullPlaceholder:!0,serialize:function(t,n,r){var i=e.extend({},t.data());return r?[n]:(n[0]&&(i.children=n),delete i.subContainers,delete i.sortable,i)},tolerance:0},u={},a=0,f={left:0,top:0,bottom:0,right:0},i={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},l="subContainers";v.get=function(e){return u[e.group]||(e.group===r&&(e.group=a++),u[e.group]=new v(e)),u[e.group]},v.prototype={dragInit:function(t,n){this.$document=e(n.el[0].ownerDocument),this.item=e(t.target).closest(this.options.itemSelector),this.itemContainer=n;if(this.item.is(this.options.exclude)||!this.options.onMousedown(this.item,o.onMousedown,t))return;this.setPointer(t),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0},drag:function(e){if(!this.dragging){if(!this.distanceMet(e)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,o.onDragStart,e),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(e),this.options.onDrag(this.item,p(this.pointer,this.item.offsetParent()),o.onDrag,e);var t=e.pageX||e.originalEvent.pageX,n=e.pageY||e.originalEvent.pageY,i=this.sameResultBox,s=this.options.tolerance;if(!i||i.top-s>n||i.bottom+s<n||i.left-s>t||i.right+s<t)this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=r)},drop:function(e){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,o.onCancel,e),this.options.onDrop(this.item,this.getContainer(this.item),o.onDrop,e),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=r,this.dragging=!1)},searchValidTarget:function(e,t){e||(e=this.relativePointer||this.pointer,t=this.lastRelativePointer||this.lastPointer);var n=d(this.getContainerDimensions(),e,t),i=n.length;while(i--){var s=n[i][0],o=n[i][1];if(!o||this.options.pullPlaceholder){var u=this.containers[s];if(!u.disabled){if(!this.$getOffsetParent()){var a=u.getItemOffsetParent();e=p(e,a),t=p(t,a)}if(u.searchValidTarget(e,t))return!0}}}this.sameResultBox&&(this.sameResultBox=r)},movePlaceholder:function(e,t,n,r){var i=this.lastAppendedItem;if(!r&&i&&i[0]===t[0])return;t[n](this.placeholder),this.lastAppendedItem=t,this.sameResultBox=r,this.options.afterMove(this.placeholder,e,t)},getContainerDimensions:function(){return this.containerDimensions||h(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(e){return e.closest(this.options.containerSelector).data(n)},$getOffsetParent:function(){if(this.offsetParent===r){var e=this.containers.length-1,t=this.containers[e].getItemOffsetParent();if(!this.options.rootGroup)while(e--)if(t[0]!=this.containers[e].getItemOffsetParent()[0]){t=!1;break}this.offsetParent=t}return this.offsetParent},setPointer:function(e){var t=this.getPointer(e);if(this.$getOffsetParent()){var n=p(t,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=n}this.lastPointer=this.pointer,this.pointer=t},distanceMet:function(e){var t=this.getPointer(e);return Math.max(Math.abs(this.pointer.left-t.left),Math.abs(this.pointer.top-t.top))>=this.options.distance},getPointer:function(e){return{left:e.pageX||e.originalEvent.pageX,top:e.pageY||e.originalEvent.pageY}},setupDelayTimer:function(){var e=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){e.delayMet=!0},this.options.delay))},scroll:function(e){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(t){var n=this,r=["drag","drop","scroll"];e.each(r,function(e,r){n.$document[t](i[r],n[r+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=r},clearDimensions:function(){this.traverse(function(e){e._clearDimensions()})},traverse:function(e){e(this);var t=this.containers.length;while(t--)this.containers[t].traverse(e)},_clearDimensions:function(){this.containerDimensions=r},_destroy:function(){u[this.options.group]=r}},m.prototype={dragInit:function(e){var t=this.rootGroup;!this.disabled&&!t.dragInitDone&&this.options.drag&&this.isValidDrag(e)&&t.dragInit(e,this)},isValidDrag:function(e){return e.which==1||e.type=="touchstart"&&e.originalEvent.touches.length==1},searchValidTarget:function(e,t){var n=d(this.getItemDimensions(),e,t),r=n.length,i=this.rootGroup,s=!i.options.isValidTarget||i.options.isValidTarget(i.item,this);if(!r&&s)return i.movePlaceholder(this,this.target,"append"),!0;while(r--){var o=n[r][0],u=n[r][1];if(!u&&this.hasChildGroup(o)){var a=this.getContainerGroup(o).searchValidTarget(e,t);if(a)return!0}else if(s)return this.movePlaceholder(o,e),!0}},movePlaceholder:function(t,n){var r=e(this.items[t]),i=this.itemDimensions[t],s="after",o=r.outerWidth(),u=r.outerHeight(),a=r.offset(),l={left:a.left,right:a.left+o,top:a.top,bottom:a.top+u};if(this.options.vertical){var c=(i[2]+i[3])/2,h=n.top<=c;h?(s="before",l.bottom-=u/2):l.top+=u/2}else{var p=(i[0]+i[1])/2,d=n.left<=p;d?(s="before",l.right-=o/2):l.left+=o/2}this.hasChildGroup(t)&&(l=f),this.rootGroup.movePlaceholder(this,r,s,l)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),h(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var e,t=this.el;return t.css("position")==="relative"||t.css("position")==="absolute"||t.css("position")==="fixed"?e=t:e=t.offsetParent(),e},hasChildGroup:function(e){return this.options.nested&&this.getContainerGroup(e)},getContainerGroup:function(t){var i=e.data(this.items[t],l);if(i===r){var s=this.$getChildren(this.items[t],"container");i=!1;if(s[0]){var o=e.extend({},this.options,{rootGroup:this.rootGroup,group:a++});i=s[n](o).data(n).group}e.data(this.items[t],l,i)}return i},$getChildren:function(t,n){var r=this.rootGroup.options,i=r[n+"Path"],s=r[n+"Selector"];return t=e(t),i&&(t=t.find(i)),t.children(s)},_serialize:function(t,n){var r=this,i=n?"item":"container",s=this.$getChildren(t,i).not(this.options.exclude).map(function(){return r._serialize(e(this),!n)}).get();return this.rootGroup.options.serialize(t,s,n)},traverse:function(t){e.each(this.items||[],function(n){var r=e.data(this,l);r&&r.traverse(t)}),t(this)},_clearDimensions:function(){this.itemDimensions=r},_destroy:function(){var t=this;this.target.off(i.start,this.handle),this.el.removeData(n),this.options.drop&&(this.group.containers=e.grep(this.group.containers,function(e){return e!=t})),e.each(this.items||[],function(){e.removeData(this,l)})}};var g={enable:function(){this.traverse(function(e){e.disabled=!1})},disable:function(){this.traverse(function(e){e.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(e){e._clearDimensions()})},destroy:function(){this.traverse(function(e){e._destroy()})}};e.extend(m.prototype,g),e.fn.sortable=function(t){var i=Array.prototype.slice.call(arguments,1);return this.map(function(){var s=e(this),o=s.data(n);return o&&g[t]?g[t].apply(o,i)||this:(!o&&(t===r||typeof t=="object")&&s.data(n,new m(s,t)),this)})}}(e,window,"sumome-sortable")}),sumo.define("jquery.ba-resize",["jquery"],function(e){(function(e,t,n){"$:nomunge";function c(){s=t[o](function(){r.each(function(){var t=e(this),n=t.width(),r=t.height(),i=e.data(this,a);(n!==i.w||r!==i.h)&&t.trigger(u,[i.w=n,i.h=r])}),c()},i[f])}var r=e([]),i=e.sized=e.extend(e.sized,{}),s,o="setTimeout",u="sized",a=u+"-special-event",f="delay",l="throttleWindow";i[f]=250,i[l]=!0,e.event.special[u]={setup:function(){if(!i[l]&&this[o])return!1;var t=e(this);r=r.add(t),e.data(this,a,{w:t.width(),h:t.height()}),r.length===1&&c()},teardown:function(){if(!i[l]&&this[o])return!1;var t=e(this);r=r.not(t),t.removeData(a),r.length||clearTimeout(s)},add:function(t){function s(t,i,s){var o=e(this),u=e.data(this,a);u.w=i!==n?i:o.width(),u.h=s!==n?s:o.height(),r.apply(this,arguments)}if(!i[l]&&this[o])return!1;var r;if(e.isFunction(t))return r=t,s;r=t.handler,t.handler=s}}})(e,this)}),sumo.define("sumome-lib",["underscore","jquery","backbone","handlebars","shepherd","tether","countries","plugins/text!lib/sumome/templates/container.handlebars","plugins/text!lib/sumome/templates/slide_container.handlebars","plugins/text!lib/sumome/templates/wizard_container.handlebars","plugins/text!lib/sumome/templates/tab_container.handlebars","plugins/text!lib/sumome/templates/mdi_container.handlebars","nprogress","vex","jquery.modal","jquery.sortable","jquery.ba-resize"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d={};return d.Countries=o,d.Dialog={Buttons:{OK:{id:"ok",text:"OK",type:"primary"},CANCEL:{id:"cancel",text:"Cancel",type:"secondary"},YES:{id:"yes",text:"Yes",type:"primary"},NO:{id:"no",text:"No",type:"secondary"}},alert:function(e){return typeof e=="string"&&(e={message:"<p>"+e+"</p>"}),e=t.extend({},d.Dialog.defaultAlertOptions,e),d.Dialog.open(e)},confirm:function(e){return e=t.extend({},d.Dialog.defaultConfirmOptions,e),d.Dialog.open(e)},prompt:function(e){return typeof e=="string"&&(e={message:"<p>"+e+"</p>"}),e=t.extend({},d.Dialog.defaultPromptOptions,e),e.prompt=!0,d.Dialog.open(e)},custom:function(e){return e=t.extend({},d.Dialog.defaultCustomOptions,e),d.Dialog.open(e)},open:function(e){var n=p.open({content:d.Dialog.buildDialogForm(e),className:"sumome-dialog-popup sumome-dialog-popup-"+e.size,overlayClassName:"sumome-dialog-popup-overlay",contentClassName:e.contentClassName||"sumome-dialog-popup-content",closeClassName:"sumome-dialog-popup-close",showCloseButton:e.showCloseButton,customCloseButton:e.customCloseButton,escapeButtonCloses:e.escapeButtonCloses,overlayClosesOnClick:e.overlayClosesOnClick});return e.dialog=n,e.view&&(e.view.dialog=e.dialog),n.on("vexResize",t.proxy(function(e,n){var r=Math.floor(Math.max((t(window).height()-n.$vexContent.outerHeight())/2,0));n.$vex.css({"padding-top":r+"px"})},n)),n.on("close",t.proxy(function(){p.close(this.data("vex").id)},n)),n.on("vexOpen",t.proxy(function(e,r){r.$vexContent.on("sized",t.proxy(function(){this.resize()},n));var i="small",s=r.$vexContent.parent().innerWidth();s>=1440?i="xxlarge":s>=1080?i="xlarge":s>=768?i="large":s>=480?i="medium":i="small";var o="sumome-res-"+i;r.$vexContent.parent().removeClass("sumome-res-small sumome-res-medium sumome-res-large sumome-res-xlarge sumome-res-xxlarge").addClass(o),r.$vexContent.find('input[type="text"]').focus(),this.resize()},n)),n.on("vexClose",function(){t(window).off("keydown.sumome-dialog")}),n},buildDialogForm:function(e){var n=t('<div><div class="sumome-row"><div class="sumome-12 sumome-columns"><h2 class="sumome-dialog-title"></h2></div></div><div class="sumome-row"><div class="sumome-12 sumome-columns sumome-dialog-message"></div></div><div class="sumome-row"><div class="sumome-12 sumome-columns"><hr /><div class="sumome-text-'+e.buttonAlign+' sumome-dialog-buttons"></div></div></div></div>'),r=n.find(".sumome-dialog-title"),i=n.find(".sumome-dialog-message");e.title&&e.title.length>0?r.text(e.title):r.parent().parent().remove();if(e.view)i.parent().replaceWith(e.view.el);else if(e.prompt){var s=t('<div class="sumome-dialog-popup-form" />');if(e.message){var o=t('<label class="sumome-dialog-label" />');o.html(e.message),s.append(o)}var u=t('<input type="text" class="sumome-dialog-input" />');"default"in e&&u.val(e.default),s.append(u),i.append(s)}else i.html("<h4>"+e.message+"</h4>");t(window).on("keydown.sumome-dialog",function(e){e.keyCode==13&&n.find("button").filter(function(){return["ok","yes"].indexOf(t(this).data("id"))>=0}).eq(0).trigger("click")});var a=n.find(".sumome-dialog-buttons");return(e.view||e.prompt)&&a.parent().find("hr").remove(),t.each(e.buttons,function(n,r){var i=t('<button class="sumome-button sumome-tiny sumome-radius" />').data("id",r.id).text(r.text);"type"in r&&i.addClass("sumome-"+r.type),i.click(function(){if(t(this).data("id")!=="cancel"&&"validator"in e&&e.validator&&!e.validator())return;"callback"in e&&e.callback?e.callback(t(this).data("id"),t(this).closest(".sumome-dialog-popup-content").find('input[type="text"]').val())!==!1&&p.close(e.dialog.data("vex").id):p.close(e.dialog.data("vex").id)}),a.append(i)}),n}},d.Dialog.defaultAlertOptions={title:"Alert",message:"Alert",size:"small",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!1,buttons:[d.Dialog.Buttons.OK],buttonAlign:"right"},d.Dialog.defaultCustomOptions={title:"Custom",message:"",size:"small",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!1,buttons:[],buttonAlign:"right"},d.Dialog.defaultPromptOptions={title:"Custom",message:"",size:"small",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!1,buttons:[d.Dialog.Buttons.CANCEL,d.Dialog.Buttons.OK],buttonAlign:"right"},d.Dialog.defaultConfirmOptions={title:"Confirm",message:"Confirm",size:"small",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!1,buttons:[d.Dialog.Buttons.NO,d.Dialog.Buttons.YES],buttonAlign:"right"},d.ViewHelper={parent:null,installTour:function(n){if(!n)throw"No installTour slug specified";this.tour=new i.Tour({defaults:{classes:"sumome-shepherd-theme-arrows",showCancelLink:!0,buttons:!1}}),this.on("hide",t.proxy(function(){this.tour&&(this.lastTourStep=this.tour.currentStep?this.tour.currentStep.id:null,this.tour.hide())},this)),this.on("focused",t.proxy(function(){this.tour&&this.lastTourStep&&!this.seenTour(n)&&this.tour.show(this.lastTourStep)},this)),this.on("beforeDestroy",t.proxy(function(){this.tour&&(this.tour.complete(),this.tour=null)},this)),this.tour.on("close",t.proxy(function(){d.Dialog.confirm({title:"Master, I am.",message:"So &mdash; the student has become the master, eh?",buttons:[{id:"no",type:"primary",text:"Sorry Sensei, Continue"},{id:"yes",type:"secondary",text:"Yes, End Lesson"}],callback:e.bind(function(e){e=="yes"&&(this.cancelTour(n,this.tour.currentStep.id),this.tour.cancel())},this)})},this)),"installTourSteps"in this&&e.isFunction(this.installTourSteps)&&this.installTourSteps()},seenTour:function(e){return"api"in this?"tours"in this.api.properties?this.api.properties.tours.length==0?!1:this.api.properties.tours.indexOf(e)>-1:!0:!0},completeTour:function(e,n){t.ajax({type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:this.api.properties.sumoUrl+"/api/tour/complete",data:{site_id:this.api.properties.siteId,slug:e},success:t.proxy(function(t){t.success?("api"in this&&("tours"in this.api.properties||(this.api.properties.tours=[]),this.api.properties.tours.push(e)),n&&n(null,t)):n&&n(t)},this)})},cancelTour:function(e,n,r){t.ajax({type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:this.api.properties.sumoUrl+"/api/tour/cancel",data:{site_id:this.api.properties.siteId,slug:e,step:n},success:t.proxy(function(t){t.success?("api"in this&&("tours"in this.api.properties||(this.api.properties.tours=[]),this.api.properties.tours.push(e)),r&&r(null,t)):r&&r(t)},this)})},checkDefaultProps:function(t){var n=this;e(t).each(function(e){n&&!n.hasOwnProperty(e)&&n.__proto__.hasOwnProperty(e)})},getModal:function(){var e=this;while(e&&e.getParent){if(e.isModal)return e;e=e.getParent()}return null},getContainer:function(){var e=this;while(e&&e.getParent){if(e.isContainer)return e;e=e.getParent()}return null},getParent:function(){return this.parent}},d.ModalView={modalTitle:"Unknown Modal",modalSize:"medium",modalIcon:null,modalMenu:[],isModal:!0,menuMode:!1,autoFocus:!0,stopOnClose:!0,defaultProps:{currentConfig:{}},initialize:function(n){t.extend(this,n),this.on("beforeDestroy",t.proxy(function(){this.currentView&&this.currentView.trigger("beforeDestroy")},this)),this.$el.on("close.sumome-modal",t.proxy(function(){this.trigger("beforeDestroy"),this.remove(),this.stopOnClose&&"api"in this&&this.api.close()},this)),this.$el.on("open.sumome-modal",t.proxy(function(){this.trigger("showModal"),this.trigger("resize")},this)),this.$el.on("resize",t.proxy(function(){this.trigger("resize")},this));var r="sumome-"+this.modalSize;this.modalClassName&&(r+=" "+this.modalClassName);var i=[],s="";this.modalIcon&&(s='<img src="'+this.api.properties.baseUrl+this.modalIcon+'" class="sumome-modal-icon" />',i.push(t(s)));if(this.modalMenu&&this.modalMenu.length>0){var o=t("<ul />");this.buildMenu(o,this.modalMenu),o.children("li").on("click.delegateMenu"+this.cid,t.proxy(function(n){this.menuMode=!0,n.stopPropagation(),t("body").on("click.delegateMenu"+this.cid,t.proxy(function(n){this.menuMode=!1,t("body").off("click.delegateMenu"+this.cid),this.timerId=window.setTimeout(e.bind(this.closeMenu,this,o),200)},this));var r=t(n.target);if(r.parents("ul").length>1)return;r.is("li")||(r=r.closest("li")),this.timerId&&window.clearTimeout(this.timerId),window.setTimeout(e.bind(this.openMenu,this,o,r),100)},this)),o.children("li").on("mouseenter.delegateMenu"+this.cid,t.proxy(function(n){if(this.menuMode){var r=t(n.target);if(r.parents("ul").length>1)return;r.is("li")||(r=r.closest("li")),this.timerId&&window.clearTimeout(this.timerId),window.setTimeout(e.bind(this.openMenu,this,o,r),100)}},this)),o.children("li").on("mouseleave.delegateMenu"+this.cid,t.proxy(function(t){this.timerId=window.setTimeout(e.bind(this.closeMenu,this,o),200)},this)),o.children("li").children("ul").on("mouseenter.delegateMenu"+this.cid,t.proxy(function(e){window.clearTimeout(this.timerId)},this)),i.push(o),o.hide()}else i.push(this.modalTitle);this.$el.showModal({resizable:!0,min_width:250,className:r,title:i,autoFocus:this.autoFocus,confirmCloseCallback:e.bind(this.confirmClose,this)}),t(window).on("resize.sumome-modal"+this.cid,t.proxy(function(e){if(e&&e.type=="resize"&&e.target!=window)return;this.modalSize!="auto"&&this.$el.resizeModal(),this.trigger("resize")},this))},confirmClose:function(){var n="getDirty"in this?this.getDirty():!1;if(n){var r=document.activeElement;return d.Dialog.confirm({title:"Close Window",message:"Are you sure you want to close this window without saving? Changes will be lost.",callback:e.bind(function(e){e=="yes"?this.$el.closeModal():t(r).focus()},this)}),!1}return!0},remove:function(){this.undelegateMenu(),t(window).off(".sumome-modal"+this.cid),n.View.prototype.remove.call(this)},removeMenu:function(){this.undelegateMenu(),this.$el.closest(".sumome-modal").find(".sumome-modal-header > ul").remove()},hideMenu:function(){this.$el.closest(".sumome-modal").find(".sumome-modal-header > ul").hide()},showMenu:function(){this.$el.closest(".sumome-modal").find(".sumome-modal-header > ul").show()},openMenu:function(n,r){n.children("li").removeClass("sumome-open"),r.find("li").each(e.bind(function(n,r){var i=t(r),s=i.data("sumome-menu-item");if("visibilityCallback"in s){var o=s.visibilityCallback;e.isFunction(o)||(o=this[o]),o.call(this,i)}else i.removeAttr("class"),i.show()},this)),r.addClass("sumome-open")},closeMenu:function(e){e.children("li").removeClass("sumome-open")},buildMenu:function(n,r){var i;for(i=0;i<r.length;i++){var s=t("<li />").data("sumome-menu-item",r[i]),o=t('<a href="javascript:void(0);">'+r[i].title+"</a>");s.append(o);if("items"in r[i]){var u=t("<ul />");this.buildMenu(u,r[i].items),s.append(u)}if("callback"in r[i]){var a="click.delegateMenu"+this.cid,f=r[i].callback;e.isFunction(f)||(f=this[f]),f&&(f=e.bind(f,this),o.on(a,f))}n.append(s)}return n},showNotice:function(e,t){var n=this.$el.closest(".sumome-modal"),r=n.find(".sumome-modal-notice");r.html(e),t&&typeof t=="string"&&(r.css("cursor","pointer"),r.on("click",function(){window.location.hash="",setTimeout(function(){window.location.hash=t},0)})),r.show(),this.$el.resizeModal()},hideNotice:function(){var e=this.$el.closest(".sumome-modal"),t=e.find(".sumome-modal-notice");t.hide(),t.css("cursor","auto"),t.off("click"),this.$el.resizeModal()},close:function(e){this.$el.off("close.sumome-modal"),this.trigger("beforeDestroy"),this.el.parentNode!==null?this.$el.closeModal(e):e&&e()},setSize:function(e){var n=this.$el.parents(".sumome-modal"),r="sumome-"+e;if(!n.hasClass(r)){n.css("width",""),n.removeClass("sumome-auto sumome-tiny sumome-small sumome-medium sumome-large sumome-xlarge sumome-max").addClass(r),n.css("left",Math.floor((window.innerWidth-n.width())/2)+"px"),(e=="large"&&t(window).height()<480||e=="xlarge"&&t(window).height()<640)&&n.css("height",t(window).height()+"px"),n.resize();var i=Math.max(Math.floor((t(window).height()-n.outerHeight())/2),0);n.css("top",i+"px")}},toggleSidebar:function(e){e?(this.$parent=this.$el.children(".sumome-settings-container"),this.$parent.css("width","60%"),this.$sidebar=this.$el.children(".sumome-settings-sidebar"),this.$sidebar.css("display","inline"),this.$sidebar.html(e)):(this.$parent=this.$el.children(".sumome-settings-container"),this.$parent.css("width","100%"),this.$sidebar=this.$el.children(".sumome-settings-sidebar"),this.$sidebar.css("display","none"))},toggleFooter:function(e){e?(this.$footer=this.$el.children(".sumome-settings-footer"),this.$footer.show(),this.trigger("resize")):(this.$footer=this.$el.children(".sumome-settings-footer"),this.$footer.hide(),this.trigger("resize"))},setSidebar:function(e){this.$sidebar.html(e)},showProgressBar:function(){h.start()},errorProgressBar:function(){h.error()},finishProgressBar:function(){h.done()},undelegateMenu:function(){this.$el.closest(".sumome-modal").find("ul, li, a").off(".delegateMenu"+this.cid)},resize:function(){var e=this.$el.parents(".sumome-modal"),t="small",n=e.innerWidth();n>=1440?t="xxlarge":n>=1080?t="xlarge":n>=768?t="large":n>=480?t="medium":t="small";var r="sumome-res-"+t;e.removeClass("sumome-res-small sumome-res-medium sumome-res-large sumome-res-xlarge sumome-res-xxlarge").addClass(r),s.position()}},e.extend(d.ModalView,d.ViewHelper),d.ContainerChildView={showSidebar:!1,showFooter:!0,containerTemplate:r.compile(u),defaultProps:{currentConfig:{}},initialize:function(e){var n=this.getModal();sumo.require(["plugins/css!../css/sumome-container.css"],t.proxy(function(){this.resize()},this)),this.on("resize",this.resize,this),n.toggleFooter(this.showFooter),n.toggleSidebar(this.showSidebar),this.$wrapEl=t("<div />").addClass("sumome-container"),this.$wrapEl.html(this.containerTemplate()),this.$containerEl=this.$wrapEl.find(".sumome-container-container"),this.$containerEl.append(this.$el),this.$headerEl=this.$wrapEl.find(".sumome-container-header"),this.$titleEl=this.$headerEl.find(".sumome-container-title"),this.containerTitle&&this.$titleEl.html(this.containerTitle)},resize:function(){var e=this.$wrapEl.parent().innerHeight(),t=this.$wrapEl.find(".sumome-container-header").outerHeight(),n=this.$el.find(".sumome-container-footer").css("display")!="none"?this.$el.find(".sumome-container-footer").outerHeight():0;this.$wrapEl.height(e),e-=t,e-=n,this.$containerEl.height(e)},getEl:function(){return this.$wrapEl}},e.extend(d.ContainerChildView,d.ViewHelper),d.SlideChildView={canGoBack:!1,canSave:!1,containerTitle:"",buttonTitle:"Save",wizardButtonTitle:"Next",previousView:null,showSidebar:!1,showFooter:!0,defaultProps:{isDirty:!1,currentConfig:{}},initialize:function(e){var t=this.getModal(),n=this.getContainer();this.isDirty=!1,this.wizard=n.wizard,n.setCanGoBack(this.canGoBack),n.setCanSave(this.canSave),n.setTitle(this.containerTitle),n.setButtonTitle(this.wizard?this.wizardButtonTitle:this.buttonTitle),this.setDirty(this.getDirty()),t.toggleFooter(this.showFooter),t.toggleSidebar(this.showSidebar)},setDirty:function(e){this.isDirty=e!==!1;if(this.isDirty){var t=this.getContainer();t&&t.$saveEl&&t.$saveEl.find(".sumome-button.sumome-success").addClass("sumome-hvr-back-pulse")}else{var t=this.getContainer();t&&t.$saveEl&&t.$saveEl.find(".sumome-button.sumome-success").removeClass("sumome-hvr-back-pulse")}},getDirty:function(){return this.isDirty},goBack:function(){this.getContainer().goBack()},goForward:function(){this.getContainer().goForward()},"goto":function(e){this.getContainer().goto(e)},getEl:function(){return this.$el}},e.extend(d.SlideChildView,d.ViewHelper),d.SlideStaticGridView={listItems:[],events:{"click ul li":"rowClick","mouseenter ul li":"rowEnter","mouseleave ul li":"rowLeave"},initialize:function(e){this.$el.addClass("sumome-12 sumome-columns"),this.render()},rowClick:e.debounce(function(e){var n=t(e.target).closest("li").index();if(n>=0&&n<this.listItems.length){var r=this.listItems[n];!r.preventDefault&&r.view&&this.getContainer().slideTo(r.view,"left",r.params),r.onClickCallback&&r.onClickCallback(r.params,e.target,this)}},500,!0),render:function(){this.$el.html('<ul class="sumome-small-block-grid-3 sumome-settings-grid"></ul>');var e,n=this.$el.find("ul");for(e=0;e<this.listItems.length;e++){var r=this.listItems[e],i=t("<li></li>");r.image?i.append('<img src="'+r.image+'" />'):r.icon&&i.append('<span><i class="sumome-fa sumome-fa-white sumome-fa-medium '+r.icon+'"></i></span>'),i.append("<h6>"+r.params.title+"</h6>"),n.append(i)}if(!this.listItems.length&&this.emptyMessage){var i=t('<li style="cursor:default;"></li>');i.append(this.emptyMessage),n.append(i)}}},d.SlideStaticListView={listItems:[],events:{"click ul li":"rowClick"},initialize:function(e){this.$el.addClass("sumome-settings-list"),this.render()},rowClick:e.debounce(function(e){var n=t(e.target).closest("li").index();if(n>=0&&n<this.listItems.length){var r=this.listItems[n];!r.preventDefault&&r.view&&this.getContainer().slideTo(r.view,"left",r.params),r.onClickCallback&&r.onClickCallback(r.params,e.target,this)}},500,!0),render:function(){this.$el.html("<ul></ul>");var e,n=this.$el.find("ul");for(e=0;e<this.listItems.length;e++){var r=this.listItems[e],i=t("<li></li>");r.image?i.append('<span style="background:transparent;"><i class="sumome-fa sumome-fa-white sumome-fa-medium" style="width:30px; background-size:contain; background-image: url(\''+r.image+"');\"></i></span>"):r.icon&&i.append('<span><i class="sumome-fa sumome-fa-white sumome-fa-medium '+r.icon+'"></i></span>'),i.append(r.title),r.noArrow||i.append('<i class="sumome-arrow-forward sumome-right">&gt;</i>'),n.append(i)}if(!this.listItems.length&&this.emptyMessage){var i=t('<li style="cursor:default;"></li>');i.append(this.emptyMessage),n.append(i)}}},d.SlideWizardView={template:r.compile(f),tagName:"div",className:"sumome-settings",wizard:!0,isContainer:!0,currentViewIndex:0,currentView:null,events:{"click .sumome-settings-left":"goBack","click .sumome-settings-right":"save","click .sumome-wizard-save":"save"},defaultProps:{currentConfig:{}},initialize:function(e){this.on("resize",this.resize,this),this.on("beforeDestroy",t.proxy(function(){this.currentView&&this.currentView.trigger("beforeDestroy")},this)),this.render(),this.resize(),this.listItems&&this.listItems.length>0&&(this.currentView=this.appendView(this.listItems[0].view),this.currentView.trigger("focused"))},getEl:function(){return this.$el},getDirty:function(){return this.currentView&&this.currentView.getDirty()},render:function(){this.$el.html(this.template()),this.$backEl=this.$el.find(".sumome-settings-header .sumome-settings-left"),this.$titleEl=this.$el.find(".sumome-settings-header .sumome-settings-title"),this.$saveEl=this.$el.find(".sumome-settings-header .sumome-settings-right, .sumome-wizard-save"),this.$containerEl=this.$el.find(".sumome-settings-container"),this.$containerEl.addClass("sumome-animated-container"),this.$sidebarEl=this.$el.find(".sumome-settings-sidebar")},"goto":function(e){if(e>=0&&e+1<this.listItems.length){this.currentViewIndex=e;var t=this.listItems[this.currentViewIndex];t.view&&this.slideTo(t.view,"right",t.params)}},goBack:e.throttle(function(){if(this.currentViewIndex>0){var e=this.listItems[this.currentViewIndex];this.currentViewIndex-=1;var t=this.listItems[this.currentViewIndex];t.view&&this.slideTo(t.view,"right",t.params),e.removeOnBack&&this.listItems.splice(this.currentViewIndex+1)}},500),goForward:function(){if(this.currentViewIndex+1<this.listItems.length){this.currentViewIndex+=1;var e=this.listItems[this.currentViewIndex];e.view&&this.slideTo(e.view,"left",e.params)}},save:e.debounce(function(){this.currentView&&this.currentView.trigger("save")},500,!0),setButtonTitle:function(e){this.$saveEl.find("button").text(e)},setTitle:function(e){this.$titleEl.html(e)},resize:function(){var e=this.$el.parent().innerHeight(),t=this.$el.find(".sumome-settings-header").outerHeight(),n=this.$el.find(".sumome-settings-footer").css("display")!="none"?this.$el.find(".sumome-settings-footer").outerHeight():0;this.$el.height(e),e-=t,e-=n,this.$containerEl.height(e),this.$sidebarEl.height(e),this.currentView&&this.currentView.trigger("resize")},showView:function(e){var t=this.listItems[e];t.view&&this.slideTo(t.view,"left",t.params)},setCanGoBack:function(e){this.$backEl.toggle(e&&this.currentViewIndex>0)},setCanSave:function(e){this.$saveEl.toggle(e)},appendView:function(e,n){var r=new e(t.extend({},{api:this.api,settings:this,parent:this},n));return this.$containerEl.append(r.getEl()),this.clearData={},r.trigger("resize"),r},slideTo:function(e,t,n){var r=this.appendView(e,n);return this.slide(r,this.currentView,t||"left"),r},slide:function(e,n,r){var i=this.$containerEl,s=t(e.getEl()),o=t(n.getEl());this.toggleSidebar(!1),o.show(),s.show(),i.addClass("sumome-animated-container-slide-"+r+"-ct"),s.addClass("sumome-animated-container-slide-"+r+"-new"),setTimeout(t.proxy(function(){i.addClass("sumome-animated-container-slide-"+r+"-ct-sliding"),setTimeout(t.proxy(function(){o.hide(),i.removeClass("sumome-animated-container-slide-"+r+"-ct"),i.removeClass("sumome-animated-container-slide-"+r+"-ct-sliding"),s.removeClass("sumome-animated-container-slide-"+r+"-new"),setTimeout(t.proxy(function(){n.trigger("beforeDestroy"),n.remove(),this.currentView=e,this.currentView.trigger("focused"),this.$containerEl.scrollTop(0)},this),0)},this),450)},this),0)}},e.extend(d.SlideWizardView,d.ViewHelper),d.SlideContainerView={template:r.compile(a),tagName:"div",wizard:!1,isContainer:!0,className:"sumome-settings",events:{"click .sumome-settings-left":"goBack","click .sumome-settings-right":"save"},defaultProps:{currentView:null,previousViewParams:[],previousViewStack:[],clearData:{},currentConfig:{}},initialize:function(e){this.checkDefaultProps(["defaultView"]),this.on("resize",this.resize,this),this.on("beforeDestroy",t.proxy(function(){this.currentView&&this.currentView.trigger("beforeDestroy")},this)),this.on("hide",t.proxy(function(){this.currentView&&this.currentView.trigger("hide")},this)),this.render(),this.resize(),this.currentView=this.appendView(this.defaultView),this.currentView.trigger("focused"),this.trigger("initialized")},getEl:function(){return this.$el},render:function(){this.$el.html(this.template()),this.$backEl=this.$el.find(".sumome-settings-header .sumome-settings-left"),this.$titleEl=this.$el.find(".sumome-settings-header .sumome-settings-title"),this.$saveEl=this.$el.find(".sumome-settings-header .sumome-settings-right"),this.$containerEl=this.$el.find(".sumome-settings-container"),this.$containerEl.addClass("sumome-animated-container"),this.$sidebarEl=this.$el.find(".sumome-settings-sidebar"),this.clearData={}},goBack:e.throttle(function(){this.clearData.runOnBack&&this.clearData.runOnBack(this),this.previousViewParams.length>1&&this.previousViewParams.pop(),this.previousViewStack.length>0&&this.slideTo(this.previousViewStack.pop(),"right",this.previousViewParams[this.previousViewParams.length-1])},500),save:function(){this.currentView&&this.currentView.trigger("save")},setButtonTitle:function(e){this.$saveEl.find("button").text(e)},setTitle:function(e){this.$titleEl.html(e)},setCanGoBack:function(e){this.$backEl.toggle(e)},setCanSave:function(e){this.$saveEl.toggle(e)},resize:function(){var e=this.$el.parent().innerHeight(),t=this.$el.find(".sumome-settings-header").outerHeight(),n=this.$el.find(".sumome-settings-footer").css("display")!="none"?this.$el.find(".sumome-settings-footer").outerHeight():0;this.$el.height(e),e-=t,e-=n,this.$containerEl.height(e),this.$sidebarEl.height(e),this.currentView&&this.currentView.trigger("resize"),s.position()},getDirty:function(){return this.currentView&&this.currentView.getDirty()},appendView:function(e,n){var r=new e(t.extend({},{api:this.api,settings:this,parent:this},n));return this.$containerEl.append(r.getEl()),this.clearData={},r.trigger("resize"),r},slideTo:function(e,t,n){var r=this.appendView(e,n);return this.currentView&&(t||"left")=="left"&&(this.previousViewParams.push(n),this.previousViewStack.push(this.currentView.constructor)),this.slide(r,this.currentView,t||"left"),this.clearData={},r},slide:function(e,n,r){var i=this.$containerEl,s=t(e.getEl()),o=t(n.getEl());this.toggleSidebar(!1),o.show(),s.show(),i.addClass("sumome-animated-container-slide-"+r+"-ct"),s.addClass("sumome-animated-container-slide-"+r+"-new"),setTimeout(t.proxy(function(){i.addClass("sumome-animated-container-slide-"+r+"-ct-sliding"),setTimeout(t.proxy(function(){o.hide(),i.removeClass("sumome-animated-container-slide-"+r+"-ct"),i.removeClass("sumome-animated-container-slide-"+r+"-ct-sliding"),s.removeClass("sumome-animated-container-slide-"+r+"-new"),setTimeout(t.proxy(function(){n.trigger("beforeDestroy"),n.remove(),this.currentView=e,this.currentView.trigger("focused"),this.$containerEl.scrollTop(0)},this),0)},this),450)},this),0)}},e.extend(d.SlideContainerView,d.ViewHelper),d.MDIContainerView={template:r.compile(c),isContainer:!0,wizard:!1,className:"sumome-xdi",defaultProps:{extraParams:{},wasInitialized:!1,tabItems:[],actionTab:null,canShowTabBar:!0,currentConfig:{}},initialize:function(e){t.extend(this,e),sumo.require(["plugins/css!../css/sumome-xdi-container.css"],t.proxy(function(){this.resize()},this)),this.on("beforeDestroy",t.proxy(function(){var e=0;for(e=0;e<this.tabItems.length;e++){var t=this.tabItems[e];"view"in t&&t.view&&t.viewAppended&&(t.view.trigger("beforeDestroy"),t.view.remove(),t.view=null,t.viewAppended=!1)}},this)),this.on("resize",this.resize,this),this.on("focused",this.focused,this),this.render();var n=null;this.$tabBarEl.sortable({nested:!1,vertical:!1,delay:200,afterMove:t.proxy(function(e,t,r){n&&e.css({width:n.outerWidth(),height:n.outerHeight()})},this),onDrop:t.proxy(function(e,n,r,i){e.removeClass("sumome-dragged").removeAttr("style"),t("body").removeClass("sumome-dragging"),this.updateTabOrder(),this.trigger("reorder")},this),onDrag:t.proxy(function(e,t,n,r){var i=this.$tabBarEl.offset();e.css({left:t.left-i.left})},this),onDragStart:t.proxy(function(e,r,i,s){n=e,e.addClass("sumome-dragged"),t("body").addClass("sumome-dragging")},this)}),this.trigger("initialized"),this.wasInitialized=!0},remove:function(){this.$tabBarEl&&this.$tabBarEl.sortable("destroy"),this.closeAllTabs(),n.View.prototype.remove.call(this)},render:function(){this.$el.html(this.template({baseUrl:this.api.properties.baseUrl})),this.$containerEl=this.$el.find(".sumome-xdi-container-container"),this.$tabBarEl=this.$el.find(".sumome-xdi-tab-container").hide(),this.canShowTabBar&&this.$tabBarEl.show(),this.actionTab!==null&&this.addTab({id:"action",title:this.actionTab.title,callback:this.actionTab.callback,closeable:!1})},focused:function(){s.position()},resize:function(){var e=this.$el.find(".sumome-xdi-tab-container").outerHeight(),t=this.$el.parent().innerHeight();this.$el.height(t),this.canShowTabBar&&(t-=e),this.$containerEl.height(t);var n=this.getSelectedTab();n&&"view"in n&&n.view&&n.viewAppended&&n.view.trigger("resize"),s.position()},findTab:function(e){for(var t=0;t<this.tabItems.length;t++){var n=this.tabItems[t];if(n.title==e)return n}return null},addAndSelectTab:function(e){this.addTab(e),this.selectTab(e.id)},getTab:function(e){for(var t=0;t<this.tabItems.length;t++){var n=this.tabItems[t];if(n.id==e)return n}return null},getTabs:function(){return this.tabItems},updateTabOrder:function(){var n=this.$tabBarEl.children(".sumome-xdi-tab-item").map(function(e,n){return t(n).data("sumome-tab")}).get();this.tabItems=e.sortBy(this.tabItems,function(e,t){return n.indexOf(e.id)-n.indexOf(t.id)})},addTab:function(n){if(this.getTab(n.id))return;this.tabItems.push(n);var r=t('<li class="sumome-xdi-tab-item" data-sumome-tab="'+n.id+'"><label>'+n.title+'</label><a href="javascript:void(0);" title="Close"></a></li>');this.actionTab!==null&&this.$tabBarEl.children().length>0?this.$tabBarEl.children().last().before(r):this.$tabBarEl.append(r);if("icon"in n&&n.icon){var i=t('<img src="'+this.api.properties.baseUrl+n.icon+'" />');r.find("label").prepend(i)}"closeable"in n&&n.closeable===!1&&r.find("a").remove(),"view"in n&&n.view&&(n.viewAppended=!1),"id"in n&&n.id=="action"?r.find("label").on("click",t.proxy(function(t){if("callback"in n){var r=n.callback;e.isFunction(r)||(r=this[r]),r=e.bind(r,this),r()}},this)):r.find("label").on("click",t.proxy(function(e){this.selectTab(n.id),this.trigger("change")},this)),r.find("a").on("click",t.proxy(function(e){this.closeTab(n.id),this.trigger("change")},this)),this.tabItems.length>1&&this.$tabBarEl.show(),s.position()},closeAllTabs:function(){var e=0;for(e=0;e<this.tabItems.length;e++){var t=this.tabItems[e];"view"in t&&t.view&&t.viewAppended&&(t.view.trigger("beforeDestroy"),t.view.remove())}this.$tabBarEl.find(".sumome-xdi-tab-item").remove(),this.tabItems=[]},closeTab:function(n,r){var i=this.getTab(n),s=null;if(!r&&i&&"view"in i&&i.view&&i.viewAppended){var o=i.view.getDirty();if(o){d.Dialog.confirm({title:"Close Tab",message:"Are you sure you want to close this tab without saving? Changes will be lost.",callback:e.bind(function(e){e=="yes"&&this.closeTab(n,!0)},this)});return}}var u=this.$tabBarEl.find('.sumome-xdi-tab-item[data-sumome-tab="'+n+'"]').eq(0);if(u.length>0){s=u.next(".sumome-xdi-tab-item");if(s.length==0||s.data("sumome-tab")=="action")s=u.prev(".sumome-xdi-tab-item");u.remove()}i&&("view"in i&&i.view&&i.viewAppended&&(i.view.trigger("beforeDestroy"),i.view.remove()),this.tabItems=t.grep(this.tabItems,function(e){return e.id!=n})),s&&s.length>0&&this.selectTab(s.data("sumome-tab"))},renameTab:function(e,t){var n=this.$tabBarEl.find('.sumome-xdi-tab-item[data-sumome-tab="'+e+'"]').eq(0);if(n.length>0){n.find("label").contents().filter(function(){return this.nodeType==3}).first().replaceWith(t);var r=this.getTab(e);r&&(r.title=t)}},getTabCount:function(){return this.tabItems.length},showTabBar:function(){this.canShowTabBar=!0,this.$tabBarEl.show(),this.resize()},hideTabBar:function(){this.canShowTabBar=!1,this.$tabBarEl.hide(),this.resize()},getDirty:function(){var e=this.getSelectedTab(),t=[];return e&&e.view&&e.viewAppended&&e.view.getDirty()&&t.push(e.id),this.tabItems.forEach(function(e){e&&e.view&&e.viewAppended&&e.view.getDirty()&&t.indexOf(e.id)<0&&t.push(e.id)}),t.length>0?(this.selectTab(t[0]),!0):!1},getSelectedTab:function(){var e=this.$tabBarEl.find(".sumome-xdi-tab-item.sumome-selected").eq(0);return e.length>0?this.getTab(e.data("sumome-tab")):!1},selectTab:function(e){var n=this.getSelectedTab();n&&n.view.trigger("hide");var r=this.$tabBarEl.find('.sumome-xdi-tab-item[data-sumome-tab="'+e+'"]').eq(0);r.length>0&&(this.$tabBarEl.find(".sumome-xdi-tab-item").removeClass("sumome-selected"),r.addClass("sumome-selected"));var i=this.getTab(e);i&&(this.$containerEl.children().hide(),"view"in i&&i.view&&(i.viewAppended||(i.view=this.appendView(i.view,"params"in i?i.params:{}),i.viewAppended=!0),t(i.view.getEl()).show(),i.view.trigger("focused"),i.view.trigger("resize")))},appendView:function(e,n){var r=this.hasOwnProperty("settings")?this.settings:this,i=new e(t.extend({},{api:this.api,settings:r,parent:this},n,this.extraParams));return this.$containerEl.append(i.getEl()),this.clearData={},i},getEl:function(){return this.$el},slideTo:function(e,t,n){var r=this.appendView(e,n);return this.currentView&&(t||"left")=="left"&&(this.previousViewParams.push(n),this.previousViewStack.push(this.currentView.constructor)),this.slide(r,this.currentView,t||"left"),this.clearData={},r}},e.extend(d.MDIContainerView,d.ViewHelper),d.TabContainerView={template:r.compile(l),tagName:"div",isContainer:!0,wizard:!1,className:"sumome-tab-container",modalClassName:"sumome-modal-tab",events:{"click .sumome-tab-container-left":"goBack","click .sumome-tab-container-right":"save"},defaultProps:{extraParams:{},currentView:null,wasInitialized:!1,clearData:{},previousViewStack:[],previousViewParams:[],currentConfig:{}},initialize:function(e){t.extend(this,e),this.checkDefaultProps(["defaultView","tabItems"]);var n=this.getModal();this.modalClassName&&t(n.el).closest(".sumome-modal").addClass(this.modalClassName),sumo.require(["plugins/css!../css/sumome-tab-container.css"],t.proxy(function(){this.resize()},this)),this.on("resize",this.resize,this),this.on("focused",this.focused,this),this.on("beforeDestroy",t.proxy(function(){this.currentView&&(this.currentView.trigger("beforeDestroy"),this.currentView.remove(),this.currentView=null)},this)),this.on("hide",t.proxy(function(){this.currentView&&this.currentView.trigger("hide")},this)),this.render(),this.defaultView&&(this.currentView=this.appendView(this.defaultView),t(this.currentView.getEl()).show(),this.currentView.trigger("focused")),this.trigger("initialized"),this.wasInitialized=!0},render:function(){this.$el.html(this.template({baseUrl:this.api.properties.baseUrl})),this.$iconBarEl=this.$el.find(".sumome-tab-container-iconbar"),this.$backEl=this.$el.find(".sumome-tab-container-header .sumome-tab-container-left"),this.$titleEl=this.$el.find(".sumome-tab-container-header .sumome-tab-container-title"),this.$saveEl=this.$el.find(".sumome-tab-container-footer .sumome-tab-container-right"),this.$containerEl=this.$el.find(".sumome-tab-container-container"),this.$containerEl.addClass("sumome-animated-container"),this.clearData={};for(var e=0;e<this.tabItems.length;e++){var t=this.tabItems[e];this.addTab(t)}},getEl:function(){return this.$el},insertTab:function(e,t){for(var n=0;n<this.tabItems.length;n++){var r=this.tabItems[n];if(r.title==e.title)return}this.tabItems.push(e),this.addTab(e,t)},goBack:e.throttle(function(){function t(){this.clearData.runOnBack&&this.clearData.runOnBack(this),this.previousViewParams.length>1&&this.previousViewParams.pop(),this.previousViewStack.length>0&&this.slideTo(this.previousViewStack.pop(),"right",this.previousViewParams[this.previousViewParams.length-1])}var n=this.currentView&&this.currentView.getDirty();n?d.Dialog.confirm({title:"Leave Page",message:"Are you sure you want to go back without saving? Changes will be lost.",callback:e.bind(function(e){e=="yes"&&t.call(this)},this)}):t.call(this)},500),save:function(){this.currentView&&this.currentView.trigger("save")},setButtonTitle:function(e){this.$saveEl.find("button").text(e)},setTitle:function(e){this.$titleEl.html(e),this.selectTab(e)},selectTab:function(e){var t=this.$iconBarEl.find('.sumome-item[data-sumome-tab="'+e+'"]').eq(0);t.length>0&&(this.$iconBarEl.find(".sumome-item").removeClass("sumome-selected"),t.addClass("sumome-selected"))},toggleContainerFooter:function(e){e?(this.$footer=this.$el.children(".sumome-tab-container-footer"),this.$footer.show(),this.trigger("resize")):(this.$footer=this.$el.children(".sumome-tab-container-footer"),this.$footer.hide(),this.trigger("resize"))},setCanGoBack:function(e){this.$backEl.toggle(e)},setCanSave:function(e){this.$saveEl.toggle(e),this.toggleContainerFooter(e)},focused:function(){this.currentView&&this.currentView.trigger("focused"),s.position()},resize:function(){var e=this.$el.parent().innerHeight(),t=this.$el.find(".sumome-tab-container-header").outerHeight(),n=this.$el.find(".sumome-tab-container-footer").css("display")!="none"?this.$el.find(".sumome-tab-container-footer").outerHeight():0;this.$el.height(e),e-=t,e-=n,this.$containerEl.height(e);try{this.$iconBarEl.removeClass("sumome-compressed");var r=this.$iconBarEl.prop("scrollHeight"),i=this.$iconBarEl.height();r>i&&this.$iconBarEl.addClass("sumome-compressed")}catch(o){}this.currentView&&this.currentView.trigger("resize"),s.position()},addSwitch:function(e){var n=t('<div class="sumome-switch-item"><div class="sumome-switch sumome-round sumome-tiny"><input type="checkbox" id="switch'+this.cid+'" /><label for="switch'+this.cid+'"></label></div><label></label></div>');this.$iconBarEl.prepend(n),this.$switchEl=n.find('input[type="checkbox"]'),this.$switchLabelEl=n.find(">label"),this.$switchLabelEl.text("Paused"),this.$switchEl.on("change",t.proxy(function(){this.$switchLabelEl.text(this.$switchEl.prop("checked")?"Active":"Paused"),this.trigger("switched")},this)),s.position()},removeSwitch:function(){var t=this.$iconBarEl.find(".sumome-switch-item");t.length&&t.remove()},setSwitch:function(e){this.$switchEl&&(this.$switchEl.prop("checked",e),this.$switchLabelEl.text(this.$switchEl.prop("checked")?"Active":"Paused"))},isSwitched:function(){return this.$switchEl?this.$switchEl.prop("checked"):null},toggleSwitch:function(){this.setSwitch(!this.isSwitched()),this.trigger("switched")},addTab:function(n,r){var i=t('<a class="sumome-item" href="javascript:void(0);" data-sumome-tab="'+n.title+'"><img src="'+this.api.properties.baseUrl+n.icon+'"><label>'+n.title+"</label></a>");r===undefined?this.$iconBarEl.append(i):this.$iconBarEl.children(".sumome-item").eq(r).before(i),i.on("click",t.proxy(function(t){var r=function(e){"view"in e&&e.view?this.slideTo(e.view):"url"in e&&e.url?window.location.href=e.url:"hash"in e&&e.hash&&(window.location.hash="",setTimeout(function(){window.location.hash=e.hash},0))},i=this.currentView&&this.currentView.getDirty();i?d.Dialog.confirm({title:"Leave Tab",message:"Are you sure you want to leave this tab without saving? Changes will be lost.",callback:e.bind(function(e){e=="yes"&&r.call(this,n)},this)}):r.call(this,n)},this)),this.$iconBarEl.find("a.sumome-item").length>5&&this.$iconBarEl.addClass("sumome-over-five"),s.position()},findTab:function(e){for(var t=0;t<this.tabItems.length;t++){var n=this.tabItems[t];if(n.title==e)return n}return null},removeTab:function(e){var n=this.findTab(e);n&&(this.tabItems=t.grep(this.tabItems,function(t){return t.title!=e}),this.$iconBarEl.find('[data-sumome-tab="'+n.title+'"]').remove())},appendView:function(e,n){var r=this.hasOwnProperty("settings")?this.settings:this,i=new e(t.extend({},{api:this.api,settings:r,parent:this},n,this.extraParams));return this.$containerEl.append(i.getEl()),this.clearData={},i.trigger("resize"),i},slideTo:function(e,t,n){var r=this.appendView(e,n);return this.currentView&&(t||"left")=="left"&&(this.previousViewParams.push(n),this.previousViewStack.push(this.currentView.constructor)),this.slide(r,this.currentView,t||"left"),this.clearData={},r},slide:function(e,n,r){var i=this.$containerEl,s=t(e.getEl());if(n){var o=t(n.getEl());o.hide()}s.show(),n&&(n.trigger("beforeDestroy"),n.remove(),n=null),this.currentView=e,this.currentView.trigger("focused"),this.$containerEl.scrollTop(0)},getDirty:function(){return this.currentView&&this.currentView.getDirty()}},e.extend(d.TabContainerView,d.ViewHelper),d}),sumo.define("lib/heatmaps",["require"],function(e){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},n=function(){var n=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=0,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},r=t.defaultRadius;return n.prototype={_organiseData:function(e,t){var n=e[this._xField],i=e[this._yField],s=this._radi,o=this._data,u=this._max,a=this._min,f=e[this._valueField]||1,l=e.radius||this._cfgRadius||r;return o[n]||(o[n]=[],s[n]=[]),o[n][i]?o[n][i]+=f:(o[n][i]=f,s[n][i]=l),o[n][i]>u?(t?this.setDataMax(o[n][i]):this._max=o[n][i],!1):{x:n,y:i,value:f,radius:l,min:a,max:u}},_unOrganizeData:function(){var e=[],t=this._data,n=this._radi;for(var r in t)for(var i in t[r])e.push({x:r,y:i,radius:n[r][i],value:t[r][i]});return{min:this._min,max:this._max,data:e}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0){var e=arguments[0],t=e.length;while(t--)this.addData.call(this,e[t])}else{var n=this._organiseData(arguments[0],!0);n&&this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]})}return this},setData:function(e){var t=e.data,n=t.length;this._data=[],this._radi=[];for(var r=0;r<n;r++)this._organiseData(t[r],!1);return this._max=e.max,this._min=e.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(e){return this._max=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(e){return this._min=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(e){this._coordinator=e},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},n}(),r=function(){function i(e){var n=e.container,r=this.shadowCanvas=document.createElement("canvas"),i=this.canvas=e.canvas||document.createElement("canvas"),s=this._renderBoundaries=[1e4,1e4,0,0],o=getComputedStyle(e.container)||{};i.className="sumome-heatmap-canvas",this._width=i.width=r.width=+o.width.replace(/px/,""),this._height=i.height=r.height=+o.height.replace(/px/,""),this.shadowCtx=r.getContext("2d"),this.ctx=i.getContext("2d"),i.style.cssText=r.style.cssText="position:absolute;left:0;top:0;",i.style.width=this._width+"px",i.style.height=this._height+"px",n.style.position="relative",n.appendChild(i),this._palette=t(e),this._templates={},this._setStyles(e)}var t=function(e){var t=e.gradient||e.defaultGradient,n=document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,1);for(var s in t)i.addColorStop(s,t[s]);return r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data},n=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=e,s=e;n.width=n.height=e*2;if(t==1)r.beginPath(),r.arc(i,s,e,0,2*Math.PI,!1),r.fillStyle="rgba(0,0,0,1)",r.fill();else{var o=r.createRadialGradient(i,s,e*t,i,s,e);o.addColorStop(0,"rgba(0,0,0,1)"),o.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=o,r.fillRect(0,0,2*e,2*e)}return n},r=function(e){var t=[],n=e.min,r=e.max,i=e.radi,e=e.data,s=Object.keys(e),o=s.length;while(o--){var u=s[o];if(!e.hasOwnProperty(u))continue;var a=Object.keys(e[u]),f=a.length;while(f--){var l=a[f];if(!e[u].hasOwnProperty(l))continue;var c=e[u][l],h=i[u][l];t.push({x:u,y:l,value:c,radius:h})}}return{min:n,max:r,data:t}};return i.prototype={renderPartial:function(e){this._drawAlpha(e),this._colorize()},renderAll:function(e){this._clear(),this._drawAlpha(r(e)),this._colorize()},_updateGradient:function(e){this._palette=t(e)},updateConfig:function(e){e.gradient&&this._updateGradient(e),this._setStyles(e)},setDimensions:function(e,t){this._width=e,this._height=t,this.canvas.width=this.shadowCanvas.width=e,this.canvas.height=this.shadowCanvas.height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(e){this._blur=e.blur==0?0:e.blur||e.defaultBlur,e.backgroundColor&&(this.canvas.style.backgroundColor=e.backgroundColor),this._opacity=(e.opacity||0)*255,this._maxOpacity=(e.maxOpacity||e.defaultMaxOpacity)*255,this._minOpacity=(e.minOpacity||e.defaultMinOpacity)*255,this._useGradientOpacity=!!e.useGradientOpacity},_drawAlpha:function(e){var t=this._min=e.min,r=this._max=e.max,e=e.data||[],i=e.length,s=1-this._blur;while(i--){var o=e[i],u=o.x,a=o.y,f=o.radius,l=Math.min(o.value,r),c=u-f,h=a-f,p=this.shadowCtx,d;this._templates[f]?d=this._templates[f]:this._templates[f]=d=n(f,s),p.globalAlpha=(l-t)/(r-t),p.drawImage(d,c,h),c<this._renderBoundaries[0]&&(this._renderBoundaries[0]=c),h<this._renderBoundaries[1]&&(this._renderBoundaries[1]=h),c+2*f>this._renderBoundaries[2]&&(this._renderBoundaries[2]=c+2*f),h+2*f>this._renderBoundaries[3]&&(this._renderBoundaries[3]=h+2*f)}},_colorize:function(){var e=this._renderBoundaries[0],t=this._renderBoundaries[1],n=this._renderBoundaries[2]-e,r=this._renderBoundaries[3]-t,i=this._width,s=this._height,o=this._opacity,u=this._maxOpacity,a=this._minOpacity,f=this._useGradientOpacity;e<0&&(e=0),t<0&&(t=0),e+n>i&&(n=i-e),t+r>s&&(r=s-t);var l=this.shadowCtx.getImageData(e,t,n,r),c=l.data,h=c.length,p=this._palette;for(var d=3;d<h;d+=4){var v=c[d],m=v*4;if(!m)continue;var g;o>0?g=o:v<u?v<a?g=a:g=v:g=u,c[d-3]=p[m],c[d-2]=p[m+1],c[d-1]=p[m+2],c[d]=f?p[m+3]:g}l.data=c,this.ctx.putImageData(l,e,t),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(e){var t,n=this.shadowCtx,r=n.getImageData(e.x,e.y,1,1),i=r.data[3],s=this._max,o=this._min;return t=Math.abs(s-o)*(i/255)>>0,t},getDataURL:function(){return this.canvas.toDataURL()}},i}(),i=function(){var n=!1;return t.defaultRenderer==="canvas2d"&&(n=r),n}(),s={merge:function(){var e={},t=arguments.length;for(var n=0;n<t;n++){var r=arguments[n];for(var i in r)e[i]=r[i]}return e}},o=function(){function u(){var e=this._config=s.merge(t,arguments[0]||{});this._coordinator=new r;if(e.plugin){var u=e.plugin;if(!t.plugins[u])throw new Error("Plugin '"+u+"' not found. Maybe it was not registered.");var a=t.plugins[u];this._renderer=new a.renderer(e),this._store=new a.store(e)}else this._renderer=new i(e),this._store=new n(e);o(this)}var r=function(){function t(){this.cStore={}}return t.prototype={on:function(e,t,n){var r=this.cStore;r[e]||(r[e]=[]),r[e].push(function(e){return t.call(n,e)})},emit:function(e,t){var n=this.cStore;if(n[e]){var r=n[e].length;for(var i=0;i<r;i++){var s=n[e][i];s(t)}}}},t}(),o=function(e){var t=e._renderer,n=e._coordinator,r=e._store;n.on("renderpartial",t.renderPartial,t),n.on("renderall",t.renderAll,t),n.on("extremachange",function(t){e._config.onExtremaChange&&e._config.onExtremaChange({min:t.min,max:t.max,gradient:e._config.gradient||e._config.defaultGradient})}),r.setCoordinator(n)};return u.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(e){return this._config=s.merge(this._config,e),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(e){return this._store.getValueAt?this._store.getValueAt(e):this._renderer.getValueAt?this._renderer.getValueAt(e):null}},u}(),u={create:function(e){return new o(e)},register:function(e,n){t.plugins[e]=n}};return u}),sumo.define("punycode",function(){}),sumo.define("IPv6",function(){}),sumo.define("SecondLevelDomains",function(){}),function(n,r){typeof e=="object"?t.exports=r(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):typeof sumo.define=="function"&&sumo.define.amd?sumo.define("URI",["./punycode","./IPv6","./SecondLevelDomains"],r):n.URI=r(n.punycode,n.IPv6,n.SecondLevelDomains,n)}(this,function(e,t,n,r){function s(e,t){return this instanceof s?(e===undefined&&(typeof location!="undefined"?e=location.href+"":e=""),this.href(e),t!==undefined?this.absoluteTo(t):this):new s(e,t)}function a(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function f(e){return e===undefined?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function l(e){return f(e)==="Array"}function c(e,t){var n={},r,i;if(l(t))for(r=0,i=t.length;r<i;r++)n[t[r]]=!0;else n[t]=!0;for(r=0,i=e.length;r<i;r++)n[e[r]]!==undefined&&(e.splice(r,1),i--,r--);return e}function h(e,t){var n,r;if(l(t)){for(n=0,r=t.length;n<r;n++)if(!h(e,t[n]))return!1;return!0}var i=f(t);for(n=0,r=e.length;n<r;n++)if(i==="RegExp"){if(typeof e[n]=="string"&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function p(e,t){if(!l(e)||!l(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function d(e){return escape(e)}function v(e){return encodeURIComponent(e).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}var i=r&&r.URI;s.version="1.12.0";var o=s.prototype,u=Object.prototype.hasOwnProperty;s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}},s.duplicateQueryParameters=!1,s.escapeQuerySpace=!0,s.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,s.idn_expression=/[^a-z0-9\.-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,s.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},s.getDomAttribute=function(e){if(!e||!e.nodeName)return undefined;var t=e.nodeName.toLowerCase();return t==="input"&&e.type!=="image"?undefined:s.domAttributes[t]},s.encode=v,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=v,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},s.encodeQuery=function(e,t){var n=s.encode(e+"");return t?n.replace(/%20/g,"+"):n},s.decodeQuery=function(e,t){e+="";try{return s.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}},s.recodePath=function(e){var t=(e+"").split("/");for(var n=0,r=t.length;n<r;n++)t[n]=s.encodePathSegment(s.decode(t[n]));return t.join("/")},s.decodePath=function(e){var t=(e+"").split("/");for(var n=0,r=t.length;n<r;n++)t[n]=s.decodePathSegment(t[n]);return t.join("/")};var m={encode:"encode",decode:"decode"},g,y=function(e,t){return function(n){return s[t](n+"").replace(s.characters[e][t].expression,function(n){return s.characters[e][t].map[n]})}};for(g in m)s[g+"PathSegment"]=y("pathname",m[g]);s.encodeReserved=y("reserved","encode"),s.parse=function(e,t){var n;return t||(t={}),n=e.indexOf("#"),n>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),n>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),e.substring(0,2)==="//"?(t.protocol=null,e=e.substring(2),e=s.parseAuthority(e,t)):(n=e.indexOf(":"),n>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(s.protocol_expression)?t.protocol=undefined:t.protocol==="file"?e=e.substring(n+3):e.substring(n+1,n+3)==="//"?(e=e.substring(n+3),e=s.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},s.parseHost=function(e,t){var n=e.indexOf("/"),r,i;return n===-1&&(n=e.length),e.charAt(0)==="["?(r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,n)||null):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,n)||null,t.port=null):(i=e.substring(0,n).split(":"),t.hostname=i[0]||null,t.port=i[1]||null),t.hostname&&e.substring(n).charAt(0)!=="/"&&(n++,e="/"+e),e.substring(n)||"/"},s.parseAuthority=function(e,t){return e=s.parseUserinfo(e,t),s.parseHost(e,t)},s.parseUserinfo=function(e,t){var n=e.indexOf("/"),r=n>-1?e.lastIndexOf("@",n):e.indexOf("@"),i;return r>-1&&(n===-1||r<n)?(i=e.substring(0,r).split(":"),t.username=i[0]?s.decode(i[0]):null,i.shift(),t.password=i[0]?s.decode(i.join(":")):null,e=e.substring(r+1)):(t.username=null,t.password=null),e},s.parseQuery=function(e,t){if(!e)return{};e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!e)return{};var n={},r=e.split("&"),i=r.length,o,u,a;for(var f=0;f<i;f++)o=r[f].split("="),u=s.decodeQuery(o.shift(),t),a=o.length?s.decodeQuery(o.join("="),t):null,n[u]?(typeof n[u]=="string"&&(n[u]=[n[u]]),n[u].push(a)):n[u]=a;return n},s.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),!e.urn&&(t||e.hostname)&&(t+="//"),t+=s.buildAuthority(e)||"",typeof e.path=="string"&&(e.path.charAt(0)!=="/"&&typeof e.hostname=="string"&&(t+="/"),t+=e.path),typeof e.query=="string"&&e.query&&(t+="?"+e.query),typeof e.fragment=="string"&&e.fragment&&(t+="#"+e.fragment),t},s.buildHost=function(e){var t="";return e.hostname?(s.ip6_expression.test(e.hostname)?e.port?t+="["+e.hostname+"]:"+e.port:t+=e.hostname:(t+=e.hostname,e.port&&(t+=":"+e.port)),t):""},s.buildAuthority=function(e){return s.buildUserinfo(e)+s.buildHost(e)},s.buildUserinfo=function(e){var t="";return e.username&&(t+=s.encode(e.username),e.password&&(t+=":"+s.encode(e.password)),t+="@"),t},s.buildQuery=function(e,t,n){var r="",i,o,a,f;for(o in e)if(u.call(e,o)&&o)if(l(e[o])){i={};for(a=0,f=e[o].length;a<f;a++)e[o][a]!==undefined&&i[e[o][a]+""]===undefined&&(r+="&"+s.buildQueryParameter(o,e[o][a],n),t!==!0&&(i[e[o][a]+""]=!0))}else e[o]!==undefined&&(r+="&"+s.buildQueryParameter(o,e[o],n));return r.substring(1)},s.buildQueryParameter=function(e,t,n){return s.encodeQuery(e,n)+(t!==null?"="+s.encodeQuery(t,n):"")},s.addQuery=function(e,t,n){if(typeof t=="object")for(var r in t)u.call(t,r)&&s.addQuery(e,r,t[r]);else{if(typeof t!="string")throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(e[t]===undefined){e[t]=n;return}typeof e[t]=="string"&&(e[t]=[e[t]]),l(n)||(n=[n]),e[t]=e[t].concat(n)}},s.removeQuery=function(e,t,n){var r,i,o;if(l(t))for(r=0,i=t.length;r<i;r++)e[t[r]]=undefined;else if(typeof t=="object")for(o in t)u.call(t,o)&&s.removeQuery(e,o,t[o]);else{if(typeof t!="string")throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");n!==undefined?e[t]===n?e[t]=undefined:l(e[t])&&(e[t]=c(e[t],n)):e[t]=undefined}},s.hasQuery=function(e,t,n,r){if(typeof t=="object"){for(var i in t)if(u.call(t,i)&&!s.hasQuery(e,i,t[i]))return!1;return!0}if(typeof t!="string")throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(f(n)){case"Undefined":return t in e;case"Boolean":var o=Boolean(l(e[t])?e[t].length:e[t]);return n===o;case"Function":return!!n(e[t],t,e);case"Array":if(!l(e[t]))return!1;var a=r?h:p;return a(e[t],n);case"RegExp":if(!l(e[t]))return Boolean(e[t]&&e[t].match(n));if(!r)return!1;return h(e[t],n);case"Number":n=String(n);case"String":if(!l(e[t]))return e[t]===n;if(!r)return!1;return h(e[t],n);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},s.commonPath=function(e,t){var n=Math.min(e.length,t.length),r;for(r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}if(r<1)return e.charAt(0)===t.charAt(0)&&e.charAt(0)==="/"?"/":"";if(e.charAt(r)!=="/"||t.charAt(r)!=="/")r=e.substring(0,r).lastIndexOf("/");return e.substring(0,r+1)},s.withinString=function(e,t,n){n||(n={});var r=n.start||s.findUri.start,i=n.end||s.findUri.end,o=n.trim||s.findUri.trim,u=/[a-z0-9-]=["']?$/i;r.lastIndex=0;for(;;){var a=r.exec(e);if(!a)break;var f=a.index;if(n.ignoreHtml){var l=e.slice(Math.max(f-3,0),f);if(l&&u.test(l))continue}var c=f+e.slice(f).search(i),h=e.slice(f,c).replace(o,"");if(n.ignore&&n.ignore.test(h))continue;c=f+h.length;var p=t(h,f,c,e);e=e.slice(0,f)+p+e.slice(c),r.lastIndex=f+p.length}return r.lastIndex=0,e},s.ensureValidHostname=function(t){if(t.match(s.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(s.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},s.noConflict=function(e){if(e){var n={URI:this.noConflict()};return URITemplate&&typeof URITemplate.noConflict=="function"&&(n.URITemplate=URITemplate.noConflict()),t&&typeof t.noConflict=="function"&&(n.IPv6=t.noConflict()),SecondLevelDomains&&typeof SecondLevelDomains.noConflict=="function"&&(n.SecondLevelDomains=SecondLevelDomains.noConflict()),n}return r.URI===this&&(r.URI=i),this},o.build=function(e){if(e===!0)this._deferred_build=!0;else if(e===undefined||this._deferred_build)this._string=s.build(this._parts),this._deferred_build=!1;return this},o.clone=function(){return new s(this)},o.valueOf=o.toString=function(){return this.build(!1)._string},m={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},y=function(e){return function(t,n){return t===undefined?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}};for(g in m)o[g]=y(m[g]);m={query:"?",fragment:"#"},y=function(e,t){return function(n,r){return n===undefined?this._parts[e]||"":(n!==null&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!r),this)}};for(g in m)o[g]=y(g,m[g]);m={search:["?","query"],hash:["#","fragment"]},y=function(e,t){return function(n,r){var i=this[e](n,r);return typeof i=="string"&&i.length?t+i:i}};for(g in m)o[g]=y(m[g][1],m[g][0]);o.pathname=function(e,t){if(e===undefined||e===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return e?s.decodePath(n):n}return this._parts.path=e?s.recodePath(e):"/",this.build(!t),this},o.path=o.pathname,o.href=function(e,t){var n;if(e===undefined)return this.toString();this._string="",this._parts=s._parts();var r=e instanceof s,i=typeof e=="object"&&(e.hostname||e.path||e.pathname);if(e.nodeName){var o=s.getDomAttribute(e);e=e[o]||"",i=!1}!r&&i&&e.pathname!==undefined&&(e=e.toString());if(typeof e=="string")this._parts=s.parse(e,this._parts);else{if(!r&&!i)throw new TypeError("invalid input");var a=r?e._parts:e;for(n in a)u.call(this._parts,n)&&(this._parts[n]=a[n])}return this.build(!t),this},o.is=function(e){var t=!1,r=!1,i=!1,o=!1,u=!1,a=!1,f=!1,l=!this._parts.urn;this._parts.hostname&&(l=!1,r=s.ip4_expression.test(this._parts.hostname),i=s.ip6_expression.test(this._parts.hostname),t=r||i,o=!t,u=o&&n&&n.has(this._parts.hostname),a=o&&s.idn_expression.test(this._parts.hostname),f=o&&s.punycode_expression.test(this._parts.hostname));switch(e.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return o;case"sld":return u;case"ip":return t;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return i;case"idn":return a;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return f}return null};var b=o.protocol,w=o.port,E=o.hostname;o.protocol=function(e,t){if(e!==undefined&&e){e=e.replace(/:(\/\/)?$/,"");if(!e.match(s.protocol_expression))throw new TypeError("Protocol '"+e+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]")}return b.call(this,e,t)},o.scheme=o.protocol,o.port=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e!==undefined){e===0&&(e=null);if(e){e+="",e.charAt(0)===":"&&(e=e.substring(1));if(e.match(/[^0-9]/))throw new TypeError("Port '"+e+"' contains characters other than [0-9]")}}return w.call(this,e,t)},o.hostname=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e!==undefined){var n={};s.parseHost(e,n),e=n.hostname}return E.call(this,e,t)},o.host=function(e,t){return this._parts.urn?e===undefined?"":this:e===undefined?this._parts.hostname?s.buildHost(this._parts):"":(s.parseHost(e,this._parts),this.build(!t),this)},o.authority=function(e,t){return this._parts.urn?e===undefined?"":this:e===undefined?this._parts.hostname?s.buildAuthority(this._parts):"":(s.parseAuthority(e,this._parts),this.build(!t),this)},o.userinfo=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined){if(!this._parts.username)return"";var n=s.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return e[e.length-1]!=="@"&&(e+="@"),s.parseUserinfo(e,this._parts),this.build(!t),this},o.resource=function(e,t){var n;return e===undefined?this.path()+this.search()+this.hash():(n=s.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},o.subdomain=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,r),o=new RegExp("^"+a(i));return e&&e.charAt(e.length-1)!=="."&&(e+="."),e&&s.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(o,e),this.build(!t),this},o.domain=function(e,t){if(this._parts.urn)return e===undefined?"":this;typeof e=="boolean"&&(t=e,e=undefined);if(e===undefined){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(t).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!e)throw new TypeError("cannot set domain empty");s.ensureValidHostname(e);if(!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var i=new RegExp(a(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(i,e)}return this.build(!t),this},o.tld=function(e,t){if(this._parts.urn)return e===undefined?"":this;typeof e=="boolean"&&(t=e,e=undefined);if(e===undefined){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(r+1);return t!==!0&&n&&n.list[i.toLowerCase()]?n.get(this._parts.hostname)||i:i}var s;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");s=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}return this.build(!t),this},o.directory=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?s.decodePath(r):r}var i=this._parts.path.length-this.filename().length,o=this._parts.path.substring(0,i),u=new RegExp("^"+a(o));return this.is("relative")||(e||(e="/"),e.charAt(0)!=="/"&&(e="/"+e)),e&&e.charAt(e.length-1)!=="/"&&(e+="/"),e=s.recodePath(e),this._parts.path=this._parts.path.replace(u,e),this.build(!t),this},o.filename=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined||e===!0){if(!this._parts.path||this._parts.path==="/")return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return e?s.decodePathSegment(r):r}var i=!1;e.charAt(0)==="/"&&(e=e.substring(1)),e.match(/\.?\//)&&(i=!0);var o=new RegExp(a(this.filename())+"$");return e=s.recodePath(e),this._parts.path=this._parts.path.replace(o,e),i?this.normalizePath(t):this.build(!t),this},o.suffix=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined||e===!0){if(!this._parts.path||this._parts.path==="/")return"";var n=this.filename(),r=n.lastIndexOf("."),i,o;return r===-1?"":(i=n.substring(r+1),o=/^[a-z0-9%]+$/i.test(i)?i:"",e?s.decodePathSegment(o):o)}e.charAt(0)==="."&&(e=e.substring(1));var u=this.suffix(),f;if(!u){if(!e)return this;this._parts.path+="."+s.recodePath(e)}else e?f=new RegExp(a(u)+"$"):f=new RegExp(a("."+u)+"$");return f&&(e=s.recodePath(e),this._parts.path=this._parts.path.replace(f,e)),this.build(!t),this},o.segment=function(e,t,n){var r=this._parts.urn?":":"/",i=this.path(),s=i.substring(0,1)==="/",o=i.split(r);e!==undefined&&typeof e!="number"&&(n=t,t=e,e=undefined);if(e!==undefined&&typeof e!="number")throw new Error("Bad segment '"+e+"', must be 0-based integer");s&&o.shift(),e<0&&(e=Math.max(o.length+e,0));if(t===undefined)return e===undefined?o:o[e];if(e===null||o[e]===undefined){if(l(t)){o=[];for(var u=0,a=t.length;u<a;u++){if(!t[u].length&&(!o.length||!o[o.length-1].length))continue;o.length&&!o[o.length-1].length&&o.pop(),o.push(t[u])}}else if(t||typeof t=="string")o[o.length-1]===""?o[o.length-1]=t:o.push(t)}else t||typeof t=="string"&&t.length?o[e]=t:o.splice(e,1);return s&&o.unshift(""),this.path(o.join(r),n)},o.segmentCoded=function(e,t,n){var r,i,o;typeof e!="number"&&(n=t,t=e,e=undefined);if(t===undefined){r=this.segment(e,t,n);if(!l(r))r=r!==undefined?s.decode(r):undefined;else for(i=0,o=r.length;i<o;i++)r[i]=s.decode(r[i]);return r}if(!l(t))t=typeof t=="string"?s.encode(t):t;else for(i=0,o=t.length;i<o;i++)t[i]=s.decode(t[i]);return this.segment(e,t,n)};var S=o.query;return o.query=function(e,t){if(e===!0)return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof e=="function"){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=e.call(this,n);return this._parts.query=s.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return e!==undefined&&typeof e!="string"?(this._parts.query=s.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):S.call(this,e,t)},o.setQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof e=="object")for(var i in e)u.call(e,i)&&(r[i]=e[i]);else{if(typeof e!="string")throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");r[e]=t!==undefined?t:null}return this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof e!="string"&&(n=t),this.build(!n),this},o.addQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.addQuery(r,e,t===undefined?null:t),this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof e!="string"&&(n=t),this.build(!n),this},o.removeQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.removeQuery(r,e,t),this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof e!="string"&&(n=t),this.build(!n),this},o.hasQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(r,e,t,n)},o.setSearch=o.setQuery,o.addSearch=o.addQuery,o.removeSearch=o.removeQuery,o.hasSearch=o.hasQuery,o.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},o.normalizeProtocol=function(e){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},o.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},o.normalizePort=function(e){return typeof this._parts.protocol=="string"&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},o.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||this._parts.path==="/")return this;var t,n=this._parts.path,r="",i,o;n.charAt(0)!=="/"&&(t=!0,n="/"+n),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(r=n.substring(1).match(/^(\.\.\/)+/)||"",r&&(r=r[0]));for(;;){i=n.indexOf("/..");if(i===-1)break;if(i===0){n=n.substring(3);continue}o=n.substring(0,i).lastIndexOf("/"),o===-1&&(o=i),n=n.substring(0,o)+n.substring(i+3)}return t&&this.is("relative")&&(n=r+n.substring(1)),n=s.recodePath(n),this._parts.path=n,this.build(!e),this},o.normalizePathname=o.normalizePath,o.normalizeQuery=function(e){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},o.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},o.normalizeSearch=o.normalizeQuery,o.normalizeHash=o.normalizeFragment,o.iso8859=function(){var e=s.encode,t=s.decode;return s.encode=escape,s.decode=decodeURIComponent,this.normalize(),s.encode=e,s.decode=t,this},o.unicode=function(){var e=s.encode,t=s.decode;return s.encode=v,s.decode=unescape,this.normalize(),s.encode=e,s.decode=t,this},o.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&t._parts.path.charAt(0)!=="/"&&(n+="/"),n+=t.path(!0);if(t._parts.query){var r="";for(var i=0,o=t._parts.query.split("&"),u=o.length;i<u;i++){var a=(o[i]||"").split("=");r+="&"+s.decodeQuery(a[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),a[1]!==undefined&&(r+="="+s.decodeQuery(a[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+=s.decodeQuery(t.hash(),!0),n},o.absoluteTo=function(e){var t=this.clone(),n=["protocol","username","password","hostname","port"],r,i,o;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");e instanceof s||(e=new s(e)),t._parts.protocol||(t._parts.protocol=e._parts.protocol);if(this._parts.hostname)return t;for(i=0;o=n[i];i++)t._parts[o]=e._parts[o];return t._parts.path?t._parts.path.substring(-2)===".."&&(t._parts.path+="/"):(t._parts.path=e._parts.path,t._parts.query||(t._parts.query=e._parts.query)),t.path().charAt(0)!=="/"&&(r=e.directory(),t._parts.path=(r?r+"/":"")+t._parts.path,t.normalizePath()),t.build(),t},o.relativeTo=function(e){var t=this.clone().normalize(),n,r,i,o,u;if(t._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");e=(new s(e)).normalize(),n=t._parts,r=e._parts,o=t.path(),u=e.path();if(o.charAt(0)!=="/")throw new Error("URI is already relative");if(u.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");n.protocol===r.protocol&&(n.protocol=null);if(n.username!==r.username||n.password!==r.password)return t.build();if(n.protocol!==null||n.username!==null||n.password!==null)return t.build();if(n.hostname!==r.hostname||n.port!==r.port)return t.build();n.hostname=null,n.port=null;if(o===u)return n.path="",t.build();i=s.commonPath(t.path(),e.path());if(!i)return t.build();var a=r.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return n.path=a+n.path.substring(i.length),t.build()},o.equals=function(e){var t=this.clone(),n=new s(e),r={},i={},o={},a,f,c;t.normalize(),n.normalize();if(t.toString()===n.toString())return!0;a=t.query(),f=n.query(),t.query(""),n.query("");if(t.toString()!==n.toString())return!1;if(a.length!==f.length)return!1;r=s.parseQuery(a,this._parts.escapeQuerySpace),i=s.parseQuery(f,this._parts.escapeQuerySpace);for(c in r)if(u.call(r,c)){if(!l(r[c])){if(r[c]!==i[c])return!1}else if(!p(r[c],i[c]))return!1;o[c]=!0}for(c in i)if(u.call(i,c)&&!o[c])return!1;return!0},o.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},o.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},s}),sumo.define("jquery.article",["jquery"],function(e){e.expr[":"].emptytext=e.expr.createPseudo(function(t){return function(t){return e.trim(e(t).text())===""}}),e.fn.findIncludeSelf=function(t,n){var r;return t==":has(> p + p + p)"?r=this.find("p + p + p").parent():r=this.find(t),e(this).is(n)?r:r.addBack(t)},e.fn.exists=function(){return this.length!==0},e.fn.findLeaves=function(n,r){var i=e(this),s=i.findIncludeSelf(n,"body").filter(r);return s=s.filter(t),s.filter(function(){return!e(this).find(s).exists()})},e.fn.findTrunks=function(n,r){var i=e(this),s=i.findIncludeSelf(n,"body").filter(r);return s=s.filter(t),s.filter(function(){return!e(this).parents().filter(s).exists()})};var t=function(){this._header||(this._header=r(e(this))),this._titleText||(this._titleText=o(this));if(this._header){var t=e(this).outerHeight()*.666;if(t&&this._header.outerHeight()>=t)return!1}return!0},n=function(t){var n=t||e("body").find("main, [role=main]").eq(0).get(0)||"body",r=e(),i=':not("[class^=comment],[id^=comment],[class*=footer],.sidebar:not(body) *,aside *,#sidebar *,footer *,[class*=footer]:not(body, [class*=not-footer]) *,#comments *,#livefyre-comments *,[class^=fyre] *,[class^=comment],[id^=comment] *,[class*=related-post]:not(body) *,.archive-page,.aside,.hentry-metro,.hrf-entry,:emptytext,.tve-leads-lightbox article")',s=[];s.push("article"),s.push(".post"),s.push(".entry-content"),s.push(".post-content"),s.push(".post_box"),s.push(".post-item"),s.push(".blog-post-wrapper"),s.push(".type-post"),s.push("#content"),s.push(".blog_content"),n!="body"?(s.push(".hentry"),s.push(".content")):(s.push("main .hentry"),s.push("[role=main] .hentry"),s.push("main .content"),s.push("[role=main] .content")),s.push("#post-content"),s.push("#blog-content"),s.push(".blog-post");var o=[":has(> p + p + p)"];for(var u=0;u<s.length;u++){r=e(n).findLeaves(s[u],i);if(r.length>0)return r}for(var u=0;u<o.length;u++){r=e(n).findTrunks(o[u],i);if(r.length>0)return r}return r},r=function(t){var n=null,r=[".main-title","header",".post-header",".post-title","h1","h2","h3","h4","h5","h6",".title",".headline"],i={};try{r.forEach(function(r){n=e(t).find(r);if(n.length>0)throw i})}catch(s){if(s===i)return n.eq(0);throw s}return null},i=function(t){var n=null,r=[".fyre","footer",".post-footer",".footer",".entry-footer",'[class^="comment"]:not(.post-meta-info *, [class^=comment-count], [class^=comments-link], [class^=comments-number], li)',".fb-comments","iframe[title=Disqus]","#disqus_thread"],i={};try{r.forEach(function(r){n=e(t).find(r);if(n.length>0)throw i})}catch(s){if(s===i)return n.eq(0).hasClass("fb-comments")&&n.eq(0).prev("h3 + p").length>0?n.eq(0).prev("h3 + p").prev("h3"):n.eq(0);throw s}return null},s=function(e){return r(e)},o=function(e){var t=null;return!e._title&&e._header&&(e._title=e._header),e._title&&(t=e._title.text().trim()),t},u=function(t){var n=null,r=["a[rel=bookmark]","h1 > a","h2 > a","h3 > a","header > a"],i={};try{r.forEach(function(r){n=e(t).find(r).filter("[href]");if(n.length>0)throw i})}catch(s){if(s===i)return n.eq(0);throw s}return null};e.articles=function(t){if("__smCache"in window&&"articles"in window.__smCache)return window.__smCache.articles;var a=n(t);return a.each(function(){this._header||(this._header=r(e(this))),this._footer=i(e(this)),this._title=this._header?s(this._header):null,this._titleText||(this._titleText=o(this));var t=this._header?u(this._header):null;t?this._anchor=t:this._anchor=u(e(this)),this._anchor?this._url=this._anchor.attr("href"):this._url=null,this._url||(this._url=window.location.href)}),"__smDebug"in window&&window.__smDebug&&a.each(function(){e(this).css("background","rgba(0,0,255,.5)"),this._header&&this._header.css("background","rgba(0,255,0,.5)"),this._title&&this._title.css("background","rgba(255,0,0,.5)"),this._footer&&this._footer.css("background","rgba(255,255,0,.5)")}),"__smCache"in window||(window.__smCache={}),window.__smCache.articles=a,setTimeout(function(){"__smCache"in window&&delete window.__smCache.articles},1e4),a},e.article=function(){return e.articles().eq(0)}}),sumo.define("jquery.displayrules",["jquery","URI","jquery.article"],function(e,t){e.isCurrentUrlAllowed=function(n,r,i,s){function o(e,t,n,r){var i=[];if(e&&e.length)for(var s=0;s<e.length;s++){var o=e[s];if(typeof o=="object"&&o.hasOwnProperty(t)&&o[t]==n){i.push(o);if(r)return i[0]}}return r?null:i}if(n&&n.length){var u=o(n,"filter_type","article",!0),a=[];u&&(a=e.articles()),i||(i=!1);var f=function(e){var t=Object.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},l=function(e){var t=f(e),n=t.length;return function(e){if(e==null)return!n;e=new Object(e);for(var r=0;r<n;r++){var i=t[r],s=i[0];if(i[1]!==e[s]||!(s in e))return!1}return!0}},c=function(e){var e=e.substr(1).split("&");if(e=="")return{};var t={};for(var n=0;n<e.length;++n){var r=e[n].split("=",2);if(r.length==1)t[r[0]]="";else try{t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}catch(i){t[r[0]]=r[1].replace(/\+/g," ")}}return t},h=function(e,t,n){if(e.has_hash&&e.hash!=t)return!1;if(e.has_query_params){var r=c(e.search),i=c(n),s=l(r);if(s(i))return!0;if(!(["containing","beginning"].indexOf(e.filter_type)>=0))return!1;var o=!0,u=Object.keys(r);for(var a=0;a<u.length;a++){var f=u[a],h=r[u[a]];if(h&&h.length)if(f in i){if(i[f].indexOf(h)!=0)return!1}else{if(e.filter_type!="containing")return!1;var p=!1;Object.keys(i).forEach(function(e){e.lastIndexOf(f)>=0&&f==e.substring(e.lastIndexOf(f))&&i[e].indexOf(h)==0&&(p=!0)});if(!p)return!1}else{if(f in i)continue;var d=Object.keys(i),p=!1;for(var v=0;v<d.length;v++){var m=d[v];if(m.indexOf(f)==0){p=!0;break}}if(!p)return!1}}}return!0},p=o(n,"parsedUserAgent",!0,!0),d=window.location.toString();d&&(d=d.toLowerCase());var v=window.location.pathname.toString();v&&(v=v.toLowerCase());var m=window.location.hostname+v;m&&(m=m.toLowerCase()),v[v.length-1]=="/"&&(v=v.substring(0,v.length-1),m=m.substring(0,m.length-1)),m.indexOf("www.")==0&&(m=m.substring(4));var g=window.location.search;g&&(g=g.toLowerCase());var y=window.location.hash;y&&(y=y.toLowerCase(),y[0]!="#"&&(y="#"+y));var b=c(g),w=Math.min(window.screen.availWidth||e(window).width(),e(window).width()),E=document.cookie.split(";"),S={},x=[];for(var T=0;T<E.length;T++){var N=E[T].substring(0,E[T].indexOf("=")).trim(),C=E[T].substring(E[T].indexOf("=")+1).trim();x.push(N),S[N]=C}var k=document.referrer;if(k&&k.length){k=k.toLowerCase();try{var L=t(k);if(L.is("ip")){var A=L.hostname();A&&(A=A.toLowerCase())}else{var A=L.domain();A&&(A=A.toLowerCase())}var O=L.path();O&&(O=O.toLowerCase());var M=L.tld();M&&(M=M.toLowerCase());var _=L.hostname()?L.hostname().toLowerCase()+O:O;O[O.length-1]=="/"&&(O=O.substring(0,O.length-1),_=_.substring(0,_.length-1)),_.indexOf("www.")==0&&(_=_.substring(4));var D=L.search(),P=L.hash()}catch(H){k=!1}}else k=!1;var B=function(t){var n=!1;return e.each(t,function(e,t){var r=!1;t.forEach(function(e){var t=!1;if(!r)if(e.filter_type=="article")a.length==1&&(t=!0);else if(e.filter_type=="smaller"){if(isNaN(parseFloat(e.filter_value))||w<parseFloat(e.filter_value))t=!0}else if(e.filter_type=="bigger"){if(isNaN(parseFloat(e.filter_value))||w>=parseFloat(e.filter_value))t=!0}else if(e.filter_type=="views_lt"){if(isNaN(e.pageviews)||s<e.pageviews)t=!0}else if(e.filter_type=="views_eq"){if(isNaN(e.pageviews)||s==e.pageviews)t=!0}else if(e.filter_type=="views_gt"){if(isNaN(e.pageviews)||s>e.pageviews)t=!0}else if(e.filter_type=="countryis")i==e.filter_value.toLowerCase()&&(t=!0);else if(e.filter_type=="countryisnot"){if(!i||i!=e.filter_value.toLowerCase())t=!0}else if(e.filter_type=="c_exists")x.indexOf(e.filter_value)>=0&&(t=!0);else if(e.filter_type=="c_dne")x.indexOf(e.filter_value)<0&&(t=!0);else if(e.filter_type=="c_equals")x.indexOf(e.filter_value)>=0&&S[e.filter_value]==e.param_value&&(t=!0);else if(e.filter_type=="c_notequals"){if(x.indexOf(e.filter_value)<0||S[e.filter_value]!=e.param_value)t=!0}else if(e.filter_type=="c_contains")x.indexOf(e.filter_value)>=0&&S[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if(e.filter_type=="c_notcontains"){if(x.indexOf(e.filter_value)<0||S[e.filter_value].indexOf(e.param_value)<0)t=!0}else if(e.filter_type=="q_exists")b&&b.hasOwnProperty(e.filter_value.toLowerCase())&&(t=!0);else if(e.filter_type=="q_dne"){if(!b||!b.hasOwnProperty(e.filter_value))t=!0}else if(e.filter_type=="q_equals")b&&b[e.filter_value]&&b[e.filter_value]==e.param_value&&(t=!0);else if(e.filter_type=="q_notequals"){if(!b||!b[e.filter_value]||b[e.filter_value]!=e.param_value)t=!0}else if(e.filter_type=="q_contains")b&&b[e.filter_value]&&b[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if(e.filter_type=="q_notcontains"){if(!b||!b[e.filter_value]||b[e.filter_value].indexOf(e.param_value)<0)t=!0}else if(e.filter_type=="exact"){var n=h(e,y,g);if(n)if(e.full_url)m==e.match_url&&(t=!0);else if(e.match_url==null&&n)t=!0;else if(m==e.match_url||v==e.match_url)t=!0}else if(e.filter_type=="beginning"){var n=h(e,y,g);if(n)if(e.full_url)m.indexOf(e.match_url.toLowerCase())==0&&(t=!0);else if(e.match_url==null&&n)t=!0;else if(m.indexOf(e.match_url.toLowerCase())==0||v.indexOf(e.match_url.toLowerCase())==0)t=!0}else if(e.filter_type=="containing"){var n=h(e,y,g);n&&(e.full_url?m.indexOf(e.match_url.toLowerCase())>=0&&(t=!0):e.match_url==null&&n?t=!0:m.indexOf(e.match_url.toLowerCase())>=0&&(t=!0))}else if(k&&["r_url_exact","r_domain_exact","r_url_beginning","r_domain_beginning","r_url_containing","r_domain_containing"].indexOf(e.filter_type)>=0)if(e.filter_type=="r_url_exact"){var n=h(e,P,D);e.full_url?n&&_==e.match_url.toLowerCase()&&(t=!0):n&&_==e.match_url.toLowerCase()?t=!0:e.match_url==null&&n&&(t=!0)}else if(e.filter_type=="r_domain_exact")e.host?e.host==A&&(t=!0):e.filter_value==A&&(t=!0);else if(e.filter_type=="r_url_beginning"){var n=h(e,P,D);e.full_url?n&&_.indexOf(e.match_url)==0&&(t=!0):n&&_.indexOf(e.match_url)==0?t=!0:e.match_url==null&&n&&(t=!0)}else if(e.filter_type=="r_domain_beginning")e.host&&A.indexOf(e.host)==0?t=!0:A.indexOf(e.filter_value)==0&&(t=!0);else if(e.filter_type=="r_url_containing"){var n=h(e,P,D);e.full_url?n&&_.indexOf(e.match_url)>=0&&(t=!0):n&&_.indexOf(e.match_url)>=0?t=!0:e.match_url==null&&n&&(t=!0)}else e.filter_type=="r_domain_containing"&&(e.host&&A.indexOf(e.host)>=0?t=!0:A.indexOf(e.filter_value)>=0&&(t=!0));else if(e.filter_type=="ua_os"&&p&&p.compareOS){var o=[e.filter_value];e.filter_value=="winmobile"?o=["windows mobile","windows phone"]:e.filter_value=="macos"?o=["mac os"]:e.filter_value=="windesktop"&&(o=["windows"]),o.indexOf(p.compareOS)>=0&&(t=!0)}else if(e.filter_type=="ua_browser"&&p&&p.compareBrowser){var o=[e.filter_value];e.filter_value=="chrome"?o=["chrome","chromium"]:e.filter_value=="ie"?o=["ie","ie mobile"]:e.filter_value=="opera"?o=["opera","opera mini","opera mobile","opera tablet"]:e.filter_value=="safari"&&(o=["safari","mobile safari"]),o.indexOf(p.compareBrowser)>=0&&(t=!0)}else if(e.filter_type=="ua_exact")e.filter_value.toLowerCase()==navigator.userAgent.toLowerCase()&&(t=!0);else if(e.filter_type=="ua_beginning")navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())==0&&(t=!0);else if(e.filter_type=="ua_containing")navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())>=0&&(t=!0);else if(e.filter_type=="hash_exact"){var u=e.filter_value[0]=="#"?e.filter_value:"#"+e.filter_value;u.toLowerCase()==y.toLowerCase()&&(t=!0)}else if(e.filter_type=="hash_beginning"){var u=e.filter_value[0]=="#"?e.filter_value:"#"+e.filter_value;y.toLowerCase().indexOf(u.toLowerCase())==0&&(t=!0)}else if(e.filter_type=="hash_containing"){var u=e.filter_value[0]=="#"?e.filter_value:"#"+e.filter_value;y.toLowerCase().indexOf(u.toLowerCase())>=0&&(t=!0)}else e.filter_type=="all"&&(t=!0);t||(r=!0)});if(!r)return n=!0,!1}),n},j=o(n,"rule_type","include",!1);if(j&&j.length){var F={},I=0;j.forEach(function(e){e.group_id&&e.group_id.length?F.hasOwnProperty(e.group_id)?F[e.group_id].push(e):F[e.group_id]=[e]:(F[I]=[e],I+=1)}),currentUrlIncluded=B(F)}else currentUrlIncluded=!0;if(!currentUrlIncluded)return!1;var q=o(n,"rule_type","exclude",!1),R=!1;if(!q||!q.length)return!0;var U={},I=0;return q.forEach(function(e){e.group_id&&e.group_id.length?U.hasOwnProperty(e.group_id)?U[e.group_id].push(e):U[e.group_id]=[e]:(U[I]=[e],I+=1)}),R=B(U),R?!1:!0}return!0}}),sumo.define("2c40add5-3570-45d7-8212-8fc2942f7f74/heatmaps",["jquery","underscore","sumome-lib","lib/heatmaps","jquery.displayrules","jquery.drags","jquery.resizes"],function(e,t,n,r){var i=function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},s=function(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))<t.r?!0:!1},o=function(e,t){return e.x>t.x1&&e.x<t.x2&&e.y>t.y1&&e.y<t.y2},u=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},a=function(t,n){l.containerEl.css("left","100%");var r=document.elementFromPoint(t,n);l.containerEl.css("left","");var i=e(r).getSelector()[0];return i},f=function(e,t,n){Array.isArray(t)||(t=[t]);var r=n?-1:1;return e.sort(function(e,n){var i=e[t[0]],s=n[t[0]],o=i<s?-1*r:i>s?1*r:0;if(o==0&&t[1]){i=e[t[1]];var s=n[t[1]];o=i<s?-1*r:i>s?1*r:0}return o})},l={isPro:!1,isShown:!1,isRecording:!1,currentData:null,reopenApp:!1,currentCampaign:null,elementData:null,lastPagePos:null,countsEnabled:!0,elementListShowing:!1,elementListHovered:!1,controlsHovered:!1,noAnimationTimer:null,selectedElements:{},activeClickLabelSelector:null,theme:{backgroundColor:"rgba(3, 3, 16, .3)",gradient:{0:"#03030f",.125:"#1f1159",.25:"#952a66",.375:"#b73b50",.5:"#d6693f",.625:"#e8a736",.75:"#efd455",.875:"#fbfbc4"}},load:function(t){l.$control&&l.$control.addClass("sumome-heatmaps-control-show"),l.containerEl&&e('<div class="sumome-heatmaps-loading" />').html("Loading heat map data...<br />Press ESC to exit").appendTo(l.containerEl),e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:l.api.properties.sumoUrl+"/apps/heatmaps/load",data:{site_id:l.api.properties.siteId,path:window.location.pathname+window.location.search,campaign_id:t||null,geoLocation:this.api.properties.geoLocation,pageViews:this.api.properties.views,userAgent:navigator.userAgent},success:function(t){t.success?(l.isPro=t.pro,l.currentData=t.data,l.theme=t.theme,l.currentCampaign=t.campaigns,l.$elementListWrapper&&l.$elementListWrapper.css("height",""),l.refresh(),l.updateControl()):(l.currentData=null,l.currentCampaign=null,l.updateControl()),e(".sumome-heatmaps-loading").remove(),l.$control&&setTimeout(function(){e(".sumome-heatmaps-control").removeClass("sumome-heatmaps-control-show")},1e4)}})},refresh:function(){l.findElements(l.currentData)},findElements:function(t){var n=Number.NaN,r=Number.NaN,i=[],s={};if(t)for(var u=0;u<t.length;u++){var a,c=t[u].selector;if(["html","body"].indexOf(c)>=0)continue;a=e(c);if(!a.length){s[c]={element:null,selector:c,clicks:parseInt(t[u].value),count:parseInt(t[u].value),top:99999,visible:!1};continue}if(!a.is(":visible")){s[c]={element:null,selector:c,clicks:parseInt(t[u].value),count:parseInt(t[u].value),top:99998,visible:!1};continue}if(a.hasClass("sumome-heatmap-canvas"))continue;s[c]?(s[c].count+=parseInt(t[u].value),s[c].clicks=s[c].count):(s[c]={element:a[0],selector:c,clicks:parseInt(t[u].value),count:parseInt(t[u].value),left:a.offset().left,top:a.offset().top,width:a.outerWidth(),height:a.outerHeight(),visible:!0},s[c].rectangle={x1:a.offset().left,x2:a.offset().left+a.outerWidth(),y1:a.offset().top,y2:a.offset().top+a.outerHeight()});if(a===null)continue;var h=l.findPosForElement(a,t[u].x,t[u].y);if(!h)continue;var p=parseInt(t[u].value,10);isNaN(n)?n=p:n=Math.min(p,n),isNaN(r)?r=p:r=Math.max(r,p);var d={x:Math.round(h.left),y:Math.round(h.top),value:p};i.push(d)}l.elementData={min:0,max:r,data:i,elements:[]};for(var c in s)l.elementData.elements.push(s[c]);s=l.elementData.elements;for(var u=0;u<s.length;u++)if(s[u].visible)for(var v=0;v<s.length;v++){var h={x:s[v].left+s[v].width/2,y:s[v].top+s[v].height/2},m=s[u].width-s[v].width>=0&&s[u].height-s[v].height>=0;u!=v&&s[v].visible&&m&&o(h,s[u].rectangle)&&(s[u].count+=s[v].clicks)}f(s,"count",!0);for(var u=0;u<s.length;u++)s[u].rank=u+1;l.redraw(),l.renderElementsList()},redraw:function(){if(!l.elementData||!l.map)return;var t=e(window).scrollTop(),n=e(window).scrollLeft(),r=e(window).height(),i={min:l.elementData.min,max:l.elementData.max,data:[]};for(var s=0;s<l.elementData.data.length;s++){var o=l.elementData.data[s].x-n,u=l.elementData.data[s].y-t;if(u<0||u>r)continue;i.data.push({x:o,y:u,value:l.elementData.data[s].value})}l.map.setData(i),l.map.configure(l.theme)},toggle:function(){l.isShown?l.hide():l.show()},hide:function(){e(window).off(".sumome-heatmaps-widget"),e(document).off(".sumome-heatmaps-widget"),l.containerEl.remove(),l.containerEl=null,l.map=null,l.isShown=!1,l.countsEnabled=!0,l.elementListShowing=!1,l.elementListHovered=!1,l.controlsHovered=!1,l.selectedElements={},l.api.emit("showControl"),l.reopenApp&&(l.api.on("2c40add5-3570-45d7-8212-8fc2942f7f74/app/started",function(e){l.api.off("2c40add5-3570-45d7-8212-8fc2942f7f74/app/started"),l.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/app/route","campaigns")}),l.api.emit("startApp","2c40add5-3570-45d7-8212-8fc2942f7f74"),l.reopenApp=!1)},show:function(n){n&&(l.reopenApp=!0);if(l.isShown){l.load(n);return}l.isShown=!0,l.api.emit("hideControl");var i=e("<div />").addClass("sumome-heatmaps").appendTo(document.body);l.$control=e('<div class="sumome-heatmaps-control sumome-heatmaps-control-show" />'),l.$close=e('<a class="sumome-heatmaps-close">&#x2715;</a>').appendTo(l.$control),l.$title=e('<span class="sumome-heatmaps-title" />').text("Loading...").appendTo(l.$control),l.$clicks=e('<span class="sumome-heatmaps-clicks" />').text(" ").appendTo(l.$control),l.$prev=e('<a class="sumome-heatmaps-prev sumome-heatmaps-disabled" />').appendTo(l.$control).text("Previous Campaign").attr("title","Previous Campaign").click(l.previous),l.$stop=e('<a class="sumome-heatmaps-stop sumome-heatmaps-disabled" />').appendTo(l.$control).text("STOP").attr("title","Stop Campaign").click(l.stop),l.$record=e('<a class="sumome-heatmaps-record sumome-heatmaps-disabled" />').appendTo(l.$control).text("RECORD").css("display","none").attr("title","Record New Campaign").click(l.record),l.$next=e('<a class="sumome-heatmaps-next sumome-heatmaps-disabled" />').appendTo(l.$control).text("Next Campaign").attr("title","Next Campaign").click(l.next),l.$counts=e('<a class="sumome-heatmaps-counts sumome-heatmaps-disabled sumome-heatmaps-counts-on" />').appendTo(l.$control).text("HIDE COUNTS").attr("title","Toggle Click Counts").click(l.toggleCounts),l.$control.append(e("<br />")),l.$listToggle=e('<a class="sumome-heatmaps-list-toggle sumome-heatmaps-disabled" />').appendTo(l.$control).attr("title","Toggle Element List").click(l.toggleElementList),l.$listToggleTitle=e('<span class="sumome-heatmaps-list-toggle-title" />').appendTo(l.$listToggle).text("SHOW ELEMENT LIST"),l.$wrapper=e('<div class="sumome-heatmaps-control-wrapper" />'),l.$control.appendTo(l.$wrapper),l.$thermometer=e('<div class="sumome-heatmaps-thermometer" />'),l.$thermCount=e('<span class="sumome-heatmaps-thermometer-count" />').appendTo(l.$thermometer),l.$thermStem=e('<span class="sumome-heatmaps-thermometer-stem" />').appendTo(l.$thermometer),l.$thermometer.appendTo(i),l.$elementListWrapper=e('<div class="sumome-heatmaps-element-list-wrapper" />'),l.$elementListTitle=e('<div class="sumome-heatmaps-element-list-title" />').text("CLICKED ELEMENT LIST").appendTo(l.$elementListWrapper),l.$elementListClose=e('<a class="sumome-heatmaps-element-list-close">&#x2715;</a>').appendTo(l.$elementListWrapper),l.$elementListBody=e('<div class="sumome-heatmaps-element-list-body" />').appendTo(l.$elementListWrapper),l.$elementListTable=e('<table class="sumome-heatmaps-element-list-table"><thead><tr><th data-sort="rank">#</th><th data-sort="selector">element name</th><th data-sort="count">clicks</th></tr></thead></table>').appendTo(l.$elementListBody),l.$elementListItems=e('<tbody class="sumome-heatmaps-element-list-items" />').appendTo(l.$elementListTable),l.$elementListCorner=e('<a class="sumome-heatmaps-element-list-corner"></a>').appendTo(l.$elementListWrapper),l.$elementListWrapper.appendTo(l.$wrapper),l.$elementListWrapper.drags({handle:".sumome-heatmaps-element-list-title"}),l.$elementListWrapper.resizes({handle:l.$elementListCorner,cursor:"nwse-resize",min_width:250,min_height:85,onResized:e.proxy(function(){var t=l.$elementListTable.height()+25+2,n=e(window).height()-parseInt(l.$elementListWrapper.css("top").replace("px"));t>n&&(t=n);var r=e(window).width()-parseInt(l.$elementListWrapper.css("left").replace("px"));l.$elementListWrapper.css({"max-height":t,"max-width":r})},this)}),l.$elementListTitle.dblclick(function(t){var n=l.$elementListTable.height()+25+2,r=e(window).height();l.$elementListWrapper.css({top:"0px",left:"0px",width:"1px",height:n,"max-height":r})}),l.$elementListClose.click(function(e){l.toggleElementList(e,!0)}),l.$elementListWrapper.on("mouseenter",function(){l.elementListHovered=!0}),l.$elementListWrapper.on("mouseleave",function(){l.elementListHovered=!1}),l.$control.on("mouseenter",function(){l.controlsHovered=!0}),l.$control.on("mouseleave",function(){l.controlsHovered=!1}),l.$clicked=e('<div class="sumome-heatmaps-clicked sumome-heatmaps-clicked-animate" />'),l.$clickedLabel=e('<span class="sumome-heatmaps-clicked-label" />').appendTo(l.$clicked).text(".selector"),l.$clickedSelected=e('<div class="sumome-heatmaps-clicked-selected" />').appendTo(i),l.$clicked.click(l.selectActiveElClickEvent),l.$thermometer.click(l.selectActiveElClickEvent),l.$elementListTable.find("th").click(function(t){var n=0;e(this).hasClass("sumome-heatmaps-element-list-tab-sort-down")&&(n=1),e(this).hasClass("sumome-heatmaps-element-list-tab-sort-up")&&(n=-1),e(this).parent().find("th").removeClass("sumome-heatmaps-element-list-tab-sort-up").removeClass("sumome-heatmaps-element-list-tab-sort-down");var r=e(this).data("sort");if(r){var i=!1;n>0&&(i=!0),(r=="count"||r=="rank")&&n==0&&(i=!0),e(this).addClass(i?"sumome-heatmaps-element-list-tab-sort-up":"sumome-heatmaps-element-list-tab-sort-down"),f(l.elementData.elements,r,i),l.renderElementsList()}}),l.$clicked.appendTo(i),l.$wrapper.appendTo(i),l.$close.click(function(e){e.preventDefault(),l.hide()}),l.containerEl=i;var s={container:i.get(0)};e.extend(s,l.theme);var o=r.create(s);i.css({position:"fixed"}),l.map=o,l.load(n),i.on("mousemove",t.debounce(function(e){l.refreshClickedLabel(e)},150)),i.on("mousemove",t.debounce(function(e){l.refreshThermometer(e)},1)),e(window).on("resize.sumome-heatmaps-widget",t.debounce(function(){var e=l.containerEl.width(),t=l.containerEl.height();l.map._renderer.setDimensions(e,t),l.refresh(),l.refreshClickedLabel(),l.refreshSelectedLabels()},300)),e(window).on("scroll.sumome-heatmaps-widget",t.debounce(function(){l.redraw(),l.refreshClickedLabel(),l.refreshSelectedLabels()},1)),e(document).on("keyup.sumome-heatmaps-widget",function(e){e.which==27&&l.hide()})},renderElementsList:function(){var t=55+30*l.elementData.elements.length+2,n;l.$elementListWrapper&&l.$elementListWrapper[0]&&l.$elementListWrapper[0].hasAttribute("style")&&l.$elementListWrapper.attr("style").replace("max-height:","").indexOf("height:")>-1&&l.$elementListWrapper.height()<=t||l.$elementListWrapper.css("height",t),l.$elementListItems.empty(),l.elementData.elements.forEach(function(t){function u(r,i){var s=e(t.selector),o=s.offset().top,u=s.height(),a=o+u,f=e(window).height(),c;u<f?c=o-(f/2-u/2):c=o;var h=250,p=e(window).scrollTop(),d=e(window).height()+p;p<=o&&d>=o&&p<=a&&d>=a&&(h=0),h&&e("html, body").stop().animate({scrollTop:c},h),clearTimeout(n),n=setTimeout(function(){l.showClickedWrapper(t),i&&i()},h)}var r=t.selector in l.selectedElements,i=e('<tr class="sumome-heatmaps-element-list-item'+(r?" sumome-heatmaps-element-list-item-selected":"")+'" selector="'+t.selector+'"><td>'+t.rank+'</td><td class="sumome-heatmaps-element-list-item-selector">'+t.selector+"</td><td>"+t.count+"</td></tr>"),s=500,o;t.visible?(i.on("click",function(n){clearTimeout(o);var r=Object?Object.keys(l.selectedElements).length:0,i=t.selector in l.selectedElements&&r==1;if(!n.shiftKey&&!n.ctrlKey&&!n.metaKey&&!i){l.$clickedSelected.empty();var s="sumome-heatmaps-element-list-item-selected";e("."+s).removeClass(s),l.selectedElements={}}if(t.selector in l.selectedElements&&l.selectedElements[t.selector]){e(this).removeClass("sumome-heatmaps-element-list-item-selected"),e("#"+l.selectedElements[t.selector].id).remove(),delete l.selectedElements[t.selector];return}e(this).addClass("sumome-heatmaps-element-list-item-selected"),u(n,function(){l.setSelectedElEvent(t.selector)})}),i.on("mouseenter",function(){clearTimeout(o),o=setTimeout(u,s)}),i.on("mouseleave",function(){clearTimeout(o)})):(i.addClass("sumome-heatmaps-element-list-item-invisible"),i.attr("title","Element is not visible"),i.find(".sumome-heatmaps-element-list-item-selector").text(t.selector+" [not visible]")),l.$elementListItems.append(i)}),l.$elementListWrapper.attr("style").indexOf("left: calc(50%")>=0&&l.$elementListWrapper.css("left","calc(50% - "+l.$elementListWrapper.width()/2+"px)")},findPosForElement:function(e,t,n){var r=e.offset(),i=e.outerWidth(),s=e.outerHeight();return r.top+=s*n,r.left+=i*t,r},toggleCounts:function(t){if(e(this).hasClass("sumome-heatmaps-disabled"))return;l.countsEnabled?(l.$counts.removeClass("sumome-heatmaps-counts-on"),l.$counts.text("VIEW COUNTS"),l.countsEnabled=!1,l.hideClickedWrapper(),l.$thermometer.css("opacity","0")):(l.$counts.addClass("sumome-heatmaps-counts-on"),l.$counts.text("HIDE COUNTS"),l.countsEnabled=!0)},toggleElementList:function(t,n){if(l.isPro){if(e(this).hasClass("sumome-heatmaps-disabled"))return;l.elementListShowing||n?(l.$listToggle.removeClass("sumome-heatmaps-list-toggle-on"),l.$listToggleTitle.text("SHOW ELEMENT LIST"),l.$elementListWrapper.removeClass("sumome-heatmaps-element-list-wrapper-showing"),l.elementListShowing=!1):(l.$elementListWrapper.css("max-width",parseInt(e(window).width()/2)),l.$elementListWrapper.css({left:"calc(50% - "+l.$elementListWrapper.width()/2+"px)",top:"","max-height":""}),l.$listToggle.addClass("sumome-heatmaps-list-toggle-on"),l.$listToggleTitle.text("HIDE ELEMENT LIST"),l.$elementListWrapper.addClass("sumome-heatmaps-element-list-wrapper-showing"),l.elementListShowing=!0)}else l.upsell()},previous:function(){if(e(this).hasClass("sumome-heatmaps-disabled"))return;var t=l.currentCampaign;t&&t.previous&&l.load(t.previous)},next:function(){if(e(this).hasClass("sumome-heatmaps-disabled"))return;var t=l.currentCampaign;t&&t.next&&l.load(t.next)},stop:function(){if(e(this).hasClass("sumome-heatmaps-disabled"))return;e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:l.api.properties.sumoUrl+"/apps/heatmaps/stop",data:{site_id:l.api.properties.siteId,path:window.location.pathname+window.location.search},success:function(e){e.success&&(l.load(),l.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/stop"))}})},record:function(){if(e(this).hasClass("sumome-heatmaps-disabled"))return;e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:l.api.properties.sumoUrl+"/apps/heatmaps/start",data:{site_id:l.api.properties.siteId,path:window.location.pathname+window.location.search},success:function(e){e.success&&(l.load(),l.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/start"))}})},autoRecord:function(t,n,r){t==null&&(t=l.api.properties.siteId),n==null&&(n=l.api.properties.sumoUrl);if(e(this).hasClass("sumome-heatmaps-disabled"))return;e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:n+"/apps/heatmaps/start/auto",data:{site_id:t,path:window.location.pathname+window.location.search},success:r})},updateControl:function(){var e=l.currentCampaign;if(!l.$control||!l.$title)return;if(e&&e.current){var t="";if(e.current.started_at){var n=new Date(e.current.started_at);t=n.toLocaleDateString()+" "+n.toLocaleTimeString()}if(e.current.finished_at){var r=new Date(e.current.finished_at);t+=" - "+r.toLocaleDateString()+" "+r.toLocaleTimeString()}else t+=" - ACTIVE CAMPAIGN";l.$title.text(t),l.$clicks.html('<span class="sumome-heatmaps-clicks-count">'+i(e.current.total_clicks)+"</span>"+" CLICK"+(e.current.total_clicks==1?"":"S")+" RECORDED")}else l.$title.text(""),l.$clicks.text("");l.$prev.toggleClass("sumome-heatmaps-disabled",e==null||e.previous==null),l.$stop.toggleClass("sumome-heatmaps-disabled",l.isRecording==0),l.$record.toggleClass("sumome-heatmaps-disabled",l.isRecording==1),l.isRecording?(l.$record.hide(),l.$stop.show()):(l.$stop.hide(),l.$record.show()),l.$next.toggleClass("sumome-heatmaps-disabled",e==null||e.next==null),l.$counts.removeClass("sumome-heatmaps-disabled");var s="elements"in l.elementData&&l.elementData.elements.length>0;l.$listToggle.toggleClass("sumome-heatmaps-disabled",!s),!s&&l.isPro&&l.toggleElementList(null,!0),l.selectedElements={},l.$clickedSelected.empty()},setRecording:function(e){l.isRecording=e,l.isShown&&l.updateControl()},refreshClickedLabel:function(t){var n=e(window).scrollTop(),r=e(window).scrollLeft(),i=e(window).height(),s=null,u=null,f=!1;t?(s={x:t.clientX,y:t.clientY},l.lastPagePos=s,f=!0):s=l.lastPagePos,u={x:s.x+r,y:s.y+n};if(u&&l.countsEnabled&&l.elementData&&!l.elementListHovered&&!l.controlsHovered&&l.containerEl){var c=!1,h=l.elementData.elements,p=[],d=0;for(var v=0;v<h.length;v++)h[v].visible&&o(u,h[v].rectangle)&&p.push(h[v]);if(p.length>0){var m=0;for(var v=0;v<p.length;v++){var g=a(s.x,s.y);if(g==p[v].selector){m=v;break}}var y=p[m];p.pop(m),p.unshift(y),!f&&l.$clicked.hasClass("sumome-heatmaps-clicked-animate")&&(l.$clicked.removeClass("sumome-heatmaps-clicked-animate"),window.clearTimeout(l.noAnimationTimer),l.noAnimationTimer=setTimeout(function(){l.$clicked.addClass("sumome-heatmaps-clicked-animate")},250)),l.showClickedWrapper(p[0])}else l.hideClickedWrapper()}else!l.elementListHovered&&!l.controlsHovered&&l.hideClickedWrapper()},refreshSelectedLabels:function(t){if(l.selectedElements){var n=e(window).scrollTop(),r=e(window).scrollLeft();for(selector in l.selectedElements){var i=l.selectedElements[selector],s=e("#"+i.id);if(s.length>0){var o=e(i.selector);s.css({top:o.offset().top-n-2,left:o.offset().left-r-2,width:o.outerWidth()+4,height:o.outerHeight()+4})}}}},showClickedWrapper:function(t){var n=e(window).scrollTop(),r=e(window).scrollLeft(),s=e(window).height(),o=l.currentCampaign,u="current"in o&&o.current?o.current.total_clicks:null,a=(t.count*100/u).toFixed(0),f=t.left-r-2,c=t.top-n-2,h=t.width+4,p=t.height+4,d=s-(c+p);l.$clicked.css("opacity","1"),l.$clicked.css("left",f).css("top",c).css("width",h).css("height",p);var v=i(t.count)+(t.count==1?" click":" clicks");u&&(v=v+" ("+a+"%)"),l.$clickedLabel.html('<span class="sumome-heatmaps-clicked-label-name">'+t.selector+'</span><span class="sumome-heatmaps-clicked-label-stat">'+v+"</span>"),l.activeClickLabelSelector=t.selector;if(c>20||d>20){l.$clickedLabel.removeClass("sumome-heatmaps-clicked-label-mid"),l.$clickedLabel.css("top","");var m=c*-1+s-18;m>p?l.$clickedLabel.removeClass("sumome-heatmaps-clicked-label-top"):l.$clickedLabel.addClass("sumome-heatmaps-clicked-label-top")}else l.$clickedLabel.removeClass("sumome-heatmaps-clicked-label-top"),l.$clickedLabel.addClass("sumome-heatmaps-clicked-label-mid"),l.$clickedLabel.css("top",c*-1+5)},hideClickedWrapper:function(){l.$clicked.css("opacity","0"),l.activeClickLabelSelector=null},refreshThermometer:function(t){var n=e(window).scrollTop(),r=e(window).scrollLeft(),o=e(window).width(),a={x:t.clientX,y:t.clientY},f=!1,c=0;if(l.elementData&&l.countsEnabled&&!l.elementListHovered&&!l.controlsHovered){for(var h=0;h<l.elementData.data.length;h++){var p={x:l.elementData.data[h].x-r,y:l.elementData.data[h].y-n,r:40};if(s(a,p)){f=!0;var d=l.elementData.data[h].value,v=u(a,p).toFixed(2),m=(1-v/45).toFixed(2);v<5&&(m=1),c+=Math.round(d*m)}}if(f){var g=a.y-21,y=a.x-0;l.$thermometer.css("opacity","1"),l.$thermometer.css("left",y).css("top",g),c<=0&&(c=1),l.$thermCount.text(c>1?i(c)+" clicks":"1 click"),y>o-200?(l.$thermometer.addClass("sumome-heatmaps-thermometer-left"),l.$thermometer.css("left","initial").css("right",o-y)):(l.$thermometer.removeClass("sumome-heatmaps-thermometer-left"),l.$thermometer.css("right",""))}else l.$thermometer.css("opacity","0")}else l.$thermometer.css("opacity","0")},setSelectedElEvent:function(e){var t="sumome-heatmaps-clicked-"+(new Date).getUTCMilliseconds(),n=l.$clicked.clone().removeClass("sumome-heatmaps-clicked-animate").addClass("sumome-heatmaps-clicked-selected").attr("id",t);n.appendTo(l.$clickedSelected),l.selectedElements[e]={id:t,selector:e}},selectActiveElClickEvent:function(t){var n=l.activeClickLabelSelector;if(l.isPro&&n){var r=Object?Object.keys(l.selectedElements).length:0,i=n in l.selectedElements&&r==1;if(!t.shiftKey&&!t.ctrlKey&&!t.metaKey&&!i){l.$clickedSelected.empty();var s="sumome-heatmaps-element-list-item-selected";e("."+s).removeClass(s),l.selectedElements={}}if(n in l.selectedElements&&l.selectedElements[n]){e(".sumome-heatmaps-element-list-item[selector='"+n+"']").removeClass("sumome-heatmaps-element-list-item-selected"),e("#"+l.selectedElements[n].id).remove(),delete l.selectedElements[n];return}e(".sumome-heatmaps-element-list-item[selector='"+n+"']").addClass("sumome-heatmaps-element-list-item-selected"),l.setSelectedElEvent(l.activeClickLabelSelector)}},upgrade:function(){window.location.hash="",setTimeout(function(){window.location.hash="#/sumome/app/app_store/ed48844c-6a37-4fbd-ba65-8e3a1a97abe6#ref-heatmaps-element-list"},0)},upsell:function(e){n.Dialog.confirm({title:"Heat Maps Pro Only",message:"Clicked Element List is a Heat Maps Pro feature. Would you like to upgrade now?",callback:function(e){e=="yes"&&(l.hide(),l.upgrade())}})}};return l}),sumo.define("selectorator",["jquery"],function(e){var t,n,r,i,s,o,u,a;return u=e.map,s=e.extend,o=e.inArray,r=function(e,t){return o(e,t)!==-1},i=function(e){return e.replace(/([\!\"\#\$\%\&'\(\)\*\+\,\.\/\:\;<\=>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},n=function(e,t){return u(e,function(e){return e===t?null:e})},a=function(e){return u(e,function(t,n){return parseInt(n,10)===parseInt(e.indexOf(t),10)?t:null})},t=function(){function t(t,n){this.element=t,this.options=s(s({},e.selectorator.options),n),this.cachedResults={}}return t.prototype.query=function(t){var n;return(n=this.cachedResults)[t]||(n[t]=e(t.replace(/#([^\s]+)/g,"[id='$1']")))},t.prototype.getProperTagName=function(){if(this.element[0])return this.element[0].tagName.toLowerCase()=="span"&&this.getIgnore("class")&&r(this.element.attr("class"),this.getIgnore("class"))?this.hasParent()?this.element.parent()[0].tagName.toLowerCase():null:this.element[0].tagName.toLowerCase();return null},t.prototype.hasParent=function(){return this.element&&0<this.element.parent().size()},t.prototype.isElement=function(){var e;return e=this.element[0],e&&e.nodeType===e.ELEMENT_NODE},t.prototype.validate=function(e,t,n,i){var s,o;n==null&&(n=!0),i==null&&(i=!1),o=this.query(e);if(n&&1<o.size()||!n&&0===o.size()){if(!t||e.indexOf(":")!==-1)return null;s=i?" > ":" ",e=t+s+e,o=this.query(e);if(n&&1<o.size()||!n&&0===o.size())return null}return r(this.element[0],o.get())?e:null},t.prototype.generate=function(){var e,t,r,i,s;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];t=[],s=[this.generateSimple,this.generateAncestor,this.generateRecursive];for(r=0,i=s.length;r<i;r++){e=s[r],t=a(n(e.call(this)));if(t&&t.length>0)return t}return a(t)},t.prototype.generateText=function(){var e,t,r,i,s;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];t=[],s=[this.generateTextSelector];for(r=0,i=s.length;r<i;r++){e=s[r],t=a(n(e.call(this)));if(t&&t.length>0)return t}return a(t)},t.prototype.generateAncestor=function(){var n,r,i,s,o,u,a,f,l,c,h,p,d,v;o=[],v=this.element.parents();for(f=0,h=v.length;f<h;f++){r=v[f],n=!0,a=this.generateSimple(null,!1);for(l=0,p=a.length;l<p;l++){u=a[l],s=(new t(e(r),this.options)).generateSimple(null,!1);for(c=0,d=s.length;c<d;c++)i=s[c],e.merge(o,this.generateSimple(i,!0,n))}n=!1}return o},t.prototype.generateSimple=function(e,t,r){var i,s,o,a,f,l,c,h;o=this,a=o.getProperTagName(),f=function(n){return o.validate(n,e,t,r)},h=[[o.getIdSelector],[o.getClassSelector],[o.getIdSelector,!0],[o.getClassSelector,!0],[o.getNameSelector],[function(){return[o.getProperTagName()]}]];for(l=0,c=h.length;l<c;l++){i=h[l],s=i[0].call(o,i[1])||[],s=n(u(s,f));if(s.length>0)return s}return[]},t.prototype.generateTextSelector=function(e,t,r){var i,s,o,u,a,f,l,c;o=this,u=o.getProperTagName(),a=function(n){return o.validate(n,e,t,r)},c=[[o.getIdSelector],[o.getTextSelector,!0],[function(){return[o.getProperTagName()]}]];for(f=0,l=c.length;f<l;f++){i=c[f],s=i[0].call(o,i[1])||[],s=n(s);if(s.length>0)return s}return[]},t.prototype.generateRecursive=function(){var e,n,r,i;return i=this.getProperTagName(),i.indexOf(":")!==-1&&(i="*"),n=this.element.parent(),r=(new t(n)).generate()[0],e=n.children(i).index(this.element),i=""+i+":eq("+e+")",r!==""&&(i=r+" > "+i),[i]},t.prototype.getIdSelector=function(e){var t;return e==null&&(e=!1),e=e?this.getProperTagName():"",t=this.element.attr("id"),typeof t=="string"&&t.trim().length&&!r(t,this.getIgnore("id"))&&t.indexOf("yui")!=0?[""+e+"#"+i(t)]:null},t.prototype.getTextSelector=function(n){var r="";if(this.hasParent()){var i=this.element.parent()[0];n=n?i.tagName.toLowerCase():"",i=e(i);var s=i.text();typeof s=="string"&&s.length>0&&(r=n+":similar("+s+")")}var o=this.element.prev();if(o.length){var u=(new t(o)).generateSimple(null,!1);u&&(r+=" > "+u)}return r?[r]:null},t.prototype.getClassSelector=function(e){var t,n,s;return e==null&&(e=!1),s=this.getProperTagName(),/^(body|html)$/.test(s)?null:(e=e?s:"",n=this.getIgnore("class"),t=(this.element.attr("class")||"").replace(/\{.*\}/,"").split(/\s/),u(t,function(t){return t&&!r(t,n)?""+e+"."+i(t):null}))},t.prototype.getNameSelector=function(){var e,t;return t=this.getProperTagName(),e=this.element.attr("name"),e&&!r(e,this.getIgnore("name"))?[""+t+"[name='"+e+"']"]:null},t.prototype.getIgnore=function(e){var t,n,r;return n=this.options.ignore||{},t=e==="class"?"classes":""+e+"s",r=n[e]||n[t],typeof r=="string"?[r]:r},t}(),e.selectorator={options:{},unique:a,clean:n,escapeSelector:i},e.fn.selectorator=function(n){return new t(e(this),n)},e.fn.getSelector=function(e){return this.selectorator(e).generate()},e.fn.getTextSelector=function(e){return this.selectorator(e).generateText()},this}),sumo.define("jquery.similar",["jquery"],function(e){String.prototype.levenshtein=function(e){var t=new Array,n=e,r=this,i=n.length,s=this.length,o,u,a=function(e,t,n){var r=e;return t<r&&(r=t),n<r&&(r=n),r};if(i==0)return;if(s==0)return;for(var o=0;o<=i;o++)t[o]=new Array;for(o=0;o<=i;o++)t[o][0]=o;for(u=0;u<=s;u++)t[0][u]=u;for(o=1;o<=i;o++){var f=n.charAt(o-1);for(u=1;u<=s;u++){var l=r.charAt(u-1);f==l?t[o][u]=t[o-1][u-1]:t[o][u]=1+a(t[o-1][u-1],t[o][u-1],t[o-1][u])}}return t[i][s]},e.fn.textExcept=function(t){if(!this.get(0)||e.inArray(this.get(0).nodeName.toLowerCase(),["script"])!=-1)return"";try{var n=e(this).contents().filter(function(){return e(this).is(t)!=1}).map(function(){if(this.nodeType==1&&e.inArray(this.nodeName.toLowerCase(),["script"])==-1)return e(this).textExcept(t);if(this.nodeType==3)return e.trim(this.data)}).get().join("");return n}catch(r){}return""},e.expr[":"].similar=e.expr.createPseudo(function(t){return function(n){var r=e(n).textExcept(".sumome-leads-edit").replace(/[^0-9a-zA-Z\s.,]/g,"").substr(0,128);return r&&r.levenshtein(t.substr(0,128))<5}})}),sumo.define("2c40add5-3570-45d7-8212-8fc2942f7f74/service",["jquery","2c40add5-3570-45d7-8212-8fc2942f7f74/heatmaps","selectorator","jquery.similar"],function(e,t){return function(n){var r=!1,i=!1,s=0,o=function(e){var t=(new Date).getTime();while((new Date).getTime()<t+e);},u=function(){if(i)return;e(document).on("mousedown.sumome-heatmaps",function(t){if(t.which!=1)return;var r,i,s;if(document.elementFromPoint)i=document.elementFromPoint(t.clientX,t.clientY);else if(document.caretPositionFromPoint)r=document.caretPositionFromPoint(t.clientX,t.clientY),i=r.offsetNode,s=r.offset;else{if(!document.caretRangeFromPoint)return;r=document.caretRangeFromPoint(t.clientX,t.clientY),i=r.startContainer,s=r.startOffset}e(i).parents("svg").length>=1&&(i=e(i).parents("svg")[0]);if(e(i).closest(".sumome-control").length>0||e(i).closest(".sumome-heatmaps").length>0)return;s=e(i).offset();if(!(!!s&&"left"in s&&"top"in s))return;s.left=t.pageX-s.left,s.top=t.pageY-s.top;var u=.05,a=s.left/e(i).outerWidth(),f=s.top/e(i).outerHeight();a=(Math.round(a/u)*u).toFixed(2),f=(Math.round(f/u)*u).toFixed(2);var l={left:a,top:f},c=e(i).getSelector()[0];if(!c||isNaN(l.left)||isNaN(l.top)||!isFinite(l.left)||!isFinite(l.top))return;var h={site_id:n.properties.siteId,selector:c,x:l.left,y:l.top,path:window.location.pathname+window.location.search,_:Math.random()},p=e("<img />").css({display:"none"}).attr("src",n.properties.sumoUrl+"/apps/heatmaps/click?"+e.param(h));p.on("error",function(){e(this).remove()}),p.on("load",function(){e(this).remove()}),e(document.body).append(p),t.target&&"href"in t.target&&t.target.href&&t.target.href.indexOf("#")!==0&&t.target.href.toLowerCase().indexOf("javascript")!=0&&o(500)}),i=!0},a=function(){if(!i)return;e(document).off("mousedown.sumome-heatmaps"),i=!1},f=function(){e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:n.properties.sumoUrl+"/apps/heatmaps/status",data:{site_id:n.properties.siteId,path:window.location.pathname+window.location.search},success:function(i){var o=!0;i.success?(r=i.campaign!=null&&i.campaign.finished_at==null,s=i.count,o=i.track_all_users):r=!1,n.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:r,campaignCount:s});var f=n.properties.geoLocation&&n.properties.geoLocation.ctry?n.properties.geoLocation.ctry:!1,l=n.properties.views?n.properties.views:1;i.pro&&i.count<=0&&i.display_rules.length>0&&e.isCurrentUrlAllowed(i.display_rules,null,f,l)?t.autoRecord(n.properties.siteId,n.properties.sumoUrl,function(e){e.success&&(r=!0,s=1,n.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:r,campaignCount:s}),u())}):r&&(o==1||o==0&&n.properties.user==null)?u():a()}})},l=function(e,t){n.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/checkStatus",function(){n.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:r,campaignCount:s})}),n.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/start",function(){f()}),n.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/stop",function(){f()}),f(),t()},c=function(e){e()};return{init:l,destroy:c}}}),sumo.define("2c40add5-3570-45d7-8212-8fc2942f7f74/service",function(){})})(undefined,undefined);